<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.17">
<meta name="keywords" content="computer, architecture">
<meta name="author" content="Cándido Aramburu">
<title>IBM PC</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
pre.rouge table td { padding: 5px; }
pre.rouge table pre { margin: 0; }
pre.rouge .cm {
  color: #999988;
  font-style: italic;
}
pre.rouge .cp {
  color: #999999;
  font-weight: bold;
}
pre.rouge .c1 {
  color: #999988;
  font-style: italic;
}
pre.rouge .cs {
  color: #999999;
  font-weight: bold;
  font-style: italic;
}
pre.rouge .c, pre.rouge .ch, pre.rouge .cd, pre.rouge .cpf {
  color: #999988;
  font-style: italic;
}
pre.rouge .err {
  color: #a61717;
  background-color: #e3d2d2;
}
pre.rouge .gd {
  color: #000000;
  background-color: #ffdddd;
}
pre.rouge .ge {
  color: #000000;
  font-style: italic;
}
pre.rouge .gr {
  color: #aa0000;
}
pre.rouge .gh {
  color: #999999;
}
pre.rouge .gi {
  color: #000000;
  background-color: #ddffdd;
}
pre.rouge .go {
  color: #888888;
}
pre.rouge .gp {
  color: #555555;
}
pre.rouge .gs {
  font-weight: bold;
}
pre.rouge .gu {
  color: #aaaaaa;
}
pre.rouge .gt {
  color: #aa0000;
}
pre.rouge .kc {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kd {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kn {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kp {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kr {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kt {
  color: #445588;
  font-weight: bold;
}
pre.rouge .k, pre.rouge .kv {
  color: #000000;
  font-weight: bold;
}
pre.rouge .mf {
  color: #009999;
}
pre.rouge .mh {
  color: #009999;
}
pre.rouge .il {
  color: #009999;
}
pre.rouge .mi {
  color: #009999;
}
pre.rouge .mo {
  color: #009999;
}
pre.rouge .m, pre.rouge .mb, pre.rouge .mx {
  color: #009999;
}
pre.rouge .sa {
  color: #000000;
  font-weight: bold;
}
pre.rouge .sb {
  color: #d14;
}
pre.rouge .sc {
  color: #d14;
}
pre.rouge .sd {
  color: #d14;
}
pre.rouge .s2 {
  color: #d14;
}
pre.rouge .se {
  color: #d14;
}
pre.rouge .sh {
  color: #d14;
}
pre.rouge .si {
  color: #d14;
}
pre.rouge .sx {
  color: #d14;
}
pre.rouge .sr {
  color: #009926;
}
pre.rouge .s1 {
  color: #d14;
}
pre.rouge .ss {
  color: #990073;
}
pre.rouge .s, pre.rouge .dl {
  color: #d14;
}
pre.rouge .na {
  color: #008080;
}
pre.rouge .bp {
  color: #999999;
}
pre.rouge .nb {
  color: #0086B3;
}
pre.rouge .nc {
  color: #445588;
  font-weight: bold;
}
pre.rouge .no {
  color: #008080;
}
pre.rouge .nd {
  color: #3c5d5d;
  font-weight: bold;
}
pre.rouge .ni {
  color: #800080;
}
pre.rouge .ne {
  color: #990000;
  font-weight: bold;
}
pre.rouge .nf, pre.rouge .fm {
  color: #990000;
  font-weight: bold;
}
pre.rouge .nl {
  color: #990000;
  font-weight: bold;
}
pre.rouge .nn {
  color: #555555;
}
pre.rouge .nt {
  color: #000080;
}
pre.rouge .vc {
  color: #008080;
}
pre.rouge .vg {
  color: #008080;
}
pre.rouge .vi {
  color: #008080;
}
pre.rouge .nv, pre.rouge .vm {
  color: #008080;
}
pre.rouge .ow {
  color: #000000;
  font-weight: bold;
}
pre.rouge .o {
  color: #000000;
  font-weight: bold;
}
pre.rouge .w {
  color: #bbbbbb;
}
pre.rouge {
  background-color: #f8f8f8;
}
</style>
</head>
<body class="book">
<div id="header">
<h1>IBM PC</h1>
<div class="details">
<span id="author" class="author">Cándido Aramburu</span><br>
<span id="email" class="email"><a href="mailto:candido@unavarra.es">candido@unavarra.es</a></span><br>
<span id="revdate">2022-10-23</span>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_dudas">1. Dudas</a></li>
<li><a href="#_referencias">2. Referencias</a>
<ul class="sectlevel2">
<li><a href="#_arquitecture_computer">2.1. Arquitecture computer</a></li>
<li><a href="#_ibm">2.2. IBM</a>
<ul class="sectlevel3">
<li><a href="#_book">2.2.1. Book</a></li>
<li><a href="#_manuals">2.2.2. Manuals</a></li>
<li><a href="#_ibm_list">2.2.3. IBM list</a></li>
</ul>
</li>
<li><a href="#_manuales_lenovo">2.3. Manuales Lenovo</a></li>
<li><a href="#_info">2.4. info</a></li>
</ul>
</li>
<li><a href="#_herramientas_comandos_aplicaciones_etc">3. Herramientas: comandos, aplicaciones, etc</a>
<ul class="sectlevel2">
<li><a href="#_comandos_linux">3.1. comandos linux</a></li>
<li><a href="#_links">3.2. links</a></li>
<li><a href="#_intel_utils">3.3. Intel-utils</a></li>
</ul>
</li>
<li><a href="#_sistema_de_ficheros">4. Sistema de Ficheros</a></li>
<li><a href="#_tools_x86">5. Tools x86</a>
<ul class="sectlevel2">
<li><a href="#_sencillo">5.1. sencillo</a></li>
<li><a href="#_memory">5.2. memory</a></li>
<li><a href="#_kernel_x86">5.3. kernel x86</a></li>
<li><a href="#_avanzado">5.4. avanzado</a></li>
</ul>
</li>
<li><a href="#_códigos">6. Códigos</a>
<ul class="sectlevel2">
<li><a href="#_uuid">6.1. uuid</a></li>
</ul>
</li>
<li><a href="#_linux_s_o">7. Linux S.O</a>
<ul class="sectlevel2">
<li><a href="#_variables_de_configuración">7.1. variables de configuración</a></li>
<li><a href="#_configuration">7.2. configuration</a></li>
<li><a href="#_linux_kernel_arquitectura_isa">7.3. Linux Kernel: Arquitectura (ISA)</a></li>
<li><a href="#_configuracion_del_kernel_instalado">7.4. Configuracion del kernel instalado</a></li>
<li><a href="#_drivers_o_modulos_del_kernel">7.5. Drivers o Modulos del Kernel</a></li>
<li><a href="#_kernel_parameters_or_kernel_options">7.6. Kernel parameters or Kernel options</a></li>
</ul>
</li>
<li><a href="#_plataforma">8. Plataforma</a>
<ul class="sectlevel2">
<li><a href="#_comandos_linux_aplicaciones">8.1. comandos linux, aplicaciones</a></li>
<li><a href="#_hw_probe">8.2. hw-probe</a>
<ul class="sectlevel3">
<li><a href="#_refs">8.2.1. refs</a></li>
<li><a href="#_install">8.2.2. install</a></li>
<li><a href="#_ejecucion_en_el_servidor_despacho">8.2.3. ejecucion en el servidor despacho</a></li>
<li><a href="#_id">8.2.4. ID</a></li>
<li><a href="#_ejecución_con_id">8.2.5. Ejecución con ID</a></li>
<li><a href="#_your_computer_in_data_base_of_linux_hardware_org">8.2.6. Your computer in data base of linux-hardware.org</a></li>
<li><a href="#_listado_de_pruebas">8.2.7. listado de pruebas</a></li>
<li><a href="#_descarga_de_la_prueba_en_el_ordenador">8.2.8. Descarga de la prueba en el ordenador</a></li>
<li><a href="#_monitorización">8.2.9. Monitorización</a></li>
<li><a href="#_test">8.2.10. test</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_cpu">9. CPU</a>
<ul class="sectlevel2">
<li><a href="#_comandos_links">9.1. comandos, links</a></li>
<li><a href="#_cpu_mode_operation">9.2. cpu mode operation</a>
<ul class="sectlevel3">
<li><a href="#_modes">9.2.1. modes</a></li>
<li><a href="#_protection_mode">9.2.2. protection mode</a></li>
<li><a href="#_virtual_mode">9.2.3. virtual mode</a></li>
<li><a href="#_long_mode">9.2.4. long mode</a></li>
<li><a href="#_system_management_mode_ssm">9.2.5. system management mode SSM</a></li>
<li><a href="#_rings">9.2.6. rings</a></li>
</ul>
</li>
<li><a href="#_cpu_flags">9.3. CPU-flags</a>
<ul class="sectlevel3">
<li><a href="#_refs_2">9.3.1. Refs</a></li>
</ul>
</li>
<li><a href="#_clock">9.4. Clock</a></li>
</ul>
</li>
<li><a href="#_cpu_microarchitecture">10. CPU Microarchitecture</a>
<ul class="sectlevel2">
<li><a href="#_referencias_2">10.1. Referencias</a></li>
<li><a href="#_intel_info">10.2. Intel Info</a></li>
<li><a href="#_shell_info">10.3. Shell Info</a>
<ul class="sectlevel3">
<li><a href="#_tools">10.3.1. Tools</a></li>
<li><a href="#_cpuid">10.3.2. cpuid</a></li>
<li><a href="#_flags">10.3.3. flags</a></li>
</ul>
</li>
<li><a href="#_web_info">10.4. Web Info</a>
<ul class="sectlevel3">
<li><a href="#_características_core_i5">10.4.1. Características core i5</a></li>
</ul>
</li>
<li><a href="#_comparativas_cpu">10.5. Comparativas CPU</a></li>
<li><a href="#_code_names">10.6. Code Names</a></li>
<li><a href="#_microarchitecture_code_name">10.7. Microarchitecture Code Name</a></li>
<li><a href="#_sandy_bridge">10.8. Sandy Bridge</a>
<ul class="sectlevel3">
<li><a href="#_introduccion">10.8.1. Introduccion</a></li>
<li><a href="#_referencia">10.8.2. Referencia</a></li>
</ul>
</li>
<li><a href="#_generaciones">10.9. Generaciones</a></li>
<li><a href="#_filosofía_tick_tock_de_intel">10.10. Filosofía tick-tock de Intel</a></li>
<li><a href="#_branding_names">10.11. Branding Names</a>
<ul class="sectlevel3">
<li><a href="#_roadmap">10.11.1. RoadMap</a></li>
<li><a href="#_core">10.11.2. Core</a></li>
<li><a href="#_otros">10.11.3. Otros</a></li>
<li><a href="#_atom">10.11.4. Atom</a></li>
</ul>
</li>
<li><a href="#_microcode">10.12. Microcode</a></li>
</ul>
</li>
<li><a href="#_memory_2">11. Memory</a></li>
<li><a href="#_dram">12. DRAM</a>
<ul class="sectlevel2">
<li><a href="#_refs_3">12.1. refs</a></li>
<li><a href="#_memory_controller">12.2. memory controller</a></li>
</ul>
</li>
<li><a href="#_virtual_memory">13. Virtual Memory</a>
<ul class="sectlevel2">
<li><a href="#_cache">13.1. cache</a></li>
</ul>
</li>
<li><a href="#_intel_chipset">14. Intel Chipset</a>
<ul class="sectlevel2">
<li><a href="#_northbridge_southbridge">14.1. Northbridge-Southbridge</a></li>
<li><a href="#_platform_controller_hub_pch">14.2. Platform Controller Hub-PCH</a></li>
</ul>
</li>
<li><a href="#_hard_disk">15. Hard Disk</a>
<ul class="sectlevel2">
<li><a href="#_optimization">15.1. optimization</a></li>
<li><a href="#_benchmark">15.2. benchmark</a></li>
<li><a href="#_iommu">15.3. iommu</a></li>
<li><a href="#_buffercached">15.4. buffer/cached</a></li>
<li><a href="#_dma">15.5. DMA</a>
<ul class="sectlevel3">
<li><a href="#_ultra_dma_udma">15.5.1. Ultra DMA (udma)</a></li>
</ul>
</li>
<li><a href="#_firmware">15.6. Firmware</a></li>
<li><a href="#_aviso_lenovo">15.7. aviso lenovo</a></li>
</ul>
</li>
<li><a href="#_controladora_gráfica">16. Controladora Gráfica</a>
<ul class="sectlevel2">
<li><a href="#_driver_intel_graphics">16.1. Driver Intel Graphics</a></li>
</ul>
</li>
<li><a href="#_controladora_gráfica_de_intel">17. Controladora Gráfica de Intel</a></li>
<li><a href="#_graficos_modo_consola_framebuffer_driver">18. Graficos Modo Consola: Framebuffer Driver</a>
<ul class="sectlevel2">
<li><a href="#_framebuffer">18.1. framebuffer</a>
<ul class="sectlevel3">
<li><a href="#_instalacion_fb">18.1.1. instalacion-fb</a></li>
<li><a href="#_intel_driver_inteldrmfb">18.1.2. intel driver inteldrmfb</a></li>
</ul>
</li>
<li><a href="#_instalaciones_de_fb_que_no_hay_que_realizar">18.2. instalaciones de fb que no hay que realizar</a></li>
<li><a href="#_kernel_mode_setting_kms">18.3. Kernel Mode Setting (KMS)</a>
<ul class="sectlevel3">
<li><a href="#_referencias_3">18.3.1. Referencias</a></li>
<li><a href="#_nvidia">18.3.2. NVIDIA</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_network">19. Network</a>
<ul class="sectlevel2">
<li><a href="#_wifi">19.1. wifi</a></li>
</ul>
</li>
<li><a href="#_bios">20. BIOS</a>
<ul class="sectlevel2">
<li><a href="#_refs_4">20.1. refs</a>
<ul class="sectlevel3">
<li><a href="#_books">20.1.1. books</a></li>
<li><a href="#_aplicaciones">20.1.2. aplicaciones</a></li>
</ul>
</li>
<li><a href="#_intro">20.2. Intro</a></li>
<li><a href="#_biosdecode">20.3. biosdecode</a></li>
<li><a href="#_dmidecode">20.4. dmidecode</a></li>
</ul>
</li>
<li><a href="#_uefi">21. UEFI</a></li>
<li><a href="#_acpi">22. ACPI</a>
<ul class="sectlevel2">
<li><a href="#_refs_5">22.1. refs</a></li>
<li><a href="#_acpi_vs_dtb">22.2. acpi vs DTB</a></li>
</ul>
</li>
<li><a href="#_consumo">23. Consumo</a></li>
<li><a href="#_measure_performance_benchmark">24. Measure Performance Benchmark</a>
<ul class="sectlevel2">
<li><a href="#_references">24.1. References</a>
<ul class="sectlevel3">
<li><a href="#_ingeniero">24.1.1. ingeniero</a></li>
<li><a href="#_web">24.1.2. web</a></li>
<li><a href="#_book_2">24.1.3. book</a></li>
</ul>
</li>
<li><a href="#_openbenchmarking">24.2. openbenchmarking</a></li>
<li><a href="#_introduction">24.3. Introduction</a></li>
<li><a href="#_linux">24.4. Linux</a>
<ul class="sectlevel3">
<li><a href="#_cpu_2">24.4.1. cpu</a></li>
<li><a href="#_disk">24.4.2. disk</a></li>
<li><a href="#_consumo_bateria">24.4.3. consumo bateria</a></li>
<li><a href="#_phoronix">24.4.4. phoronix</a></li>
</ul>
</li>
<li><a href="#_windows">24.5. Windows</a></li>
<li><a href="#_ejemplos">24.6. Ejemplos</a></li>
</ul>
</li>
<li><a href="#_optimization_2">25. Optimization</a>
<ul class="sectlevel2">
<li><a href="#_benchmark_2">25.1. benchmark</a>
<ul class="sectlevel3">
<li><a href="#_programas">25.1.1. programas</a></li>
<li><a href="#_boot">25.1.2. boot</a></li>
<li><a href="#_disk_2">25.1.3. disk</a></li>
<li><a href="#_cached">25.1.4. cached</a></li>
<li><a href="#_virtual_memory_2">25.1.5. virtual memory</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_tips">26. Tips</a></li>
<li><a href="#_cirosantilli">27. Cirosantilli</a>
<ul class="sectlevel2">
<li><a href="#_refs_6">27.1. refs</a></li>
<li><a href="#_macros">27.2. macros</a>
<ul class="sectlevel3">
<li><a href="#_common_h">27.2.1. common.h</a></li>
<li><a href="#_begin">27.2.2. BEGIN</a></li>
<li><a href="#_clear">27.2.3. CLEAR</a></li>
<li><a href="#_protected_mode">27.2.4. PROTECTED MODE</a></li>
<li><a href="#_vga">27.2.5. VGA</a></li>
</ul>
</li>
<li><a href="#_hardware">27.3. hardware</a>
<ul class="sectlevel3">
<li><a href="#_vga_2">27.3.1. vga</a></li>
</ul>
</li>
<li><a href="#_protected_mode_2">27.4. protected_mode</a>
<ul class="sectlevel3">
<li><a href="#_hello_world">27.4.1. hello_world</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_grub">28. grub</a></li>
<li><a href="#_operating_system_asm">29. operating system asm</a></li>
<li><a href="#_ubuntu_errors">30. Ubuntu Errors</a>
<ul class="sectlevel2">
<li><a href="#_locale">30.1. locale</a></li>
</ul>
</li>
<li><a href="#_kernel">31. Kernel</a>
<ul class="sectlevel2">
<li><a href="#_oficial">31.1. oficial</a></li>
<li><a href="#_driver">31.2. driver</a></li>
</ul>
</li>
<li><a href="#_inventario_hw">32. Inventario HW</a>
<ul class="sectlevel2">
<li><a href="#_news">32.1. News</a></li>
<li><a href="#_touchpad_mouse">32.2. Touchpad mouse</a></li>
</ul>
</li>
<li><a href="#_temperatura">33. Temperatura</a>
<ul class="sectlevel2">
<li><a href="#_pasta_térmica">33.1. Pasta térmica</a></li>
</ul>
</li>
<li><a href="#_pantalla">34. Pantalla</a>
<ul class="sectlevel2">
<li><a href="#_fundamentos">34.1. Fundamentos</a></li>
<li><a href="#_ojos">34.2. ojos</a></li>
<li><a href="#_características">34.3. Características</a></li>
</ul>
</li>
<li><a href="#_e_writere_reader">35. e-Writer/e-Reader</a>
<ul class="sectlevel2">
<li><a href="#_importante">35.1. IMPORTANTE</a></li>
<li><a href="#_refs_7">35.2. Refs</a></li>
<li><a href="#_conceptos">35.3. Conceptos</a></li>
<li><a href="#_devices">35.4. Devices</a></li>
<li><a href="#_editor">35.5. Editor</a></li>
</ul>
</li>
<li><a href="#_keyboard">36. Keyboard</a>
<ul class="sectlevel2">
<li><a href="#_teoria">36.1. Teoria</a></li>
<li><a href="#_hardware_2">36.2. Hardware</a></li>
<li><a href="#_software">36.3. Software</a></li>
<li><a href="#_assembly">36.4. Assembly</a>
<ul class="sectlevel3">
<li><a href="#_halicery">36.4.1. halicery</a></li>
<li><a href="#_art_of_assembly">36.4.2. art_of_assembly</a></li>
<li><a href="#_kernel_2">36.4.3. Kernel</a></li>
<li><a href="#_xorg">36.4.4. Xorg</a></li>
<li><a href="#_keyboard_controller_i8042">36.4.5. keyboard controller i8042</a></li>
<li><a href="#_drivers_fuentes">36.4.6. Drivers Fuentes</a></li>
</ul>
</li>
<li><a href="#_udev">36.5. udev</a>
<ul class="sectlevel3">
<li><a href="#_character_devices">36.5.1. character devices</a></li>
<li><a href="#_proc">36.5.2. /proc</a></li>
<li><a href="#_sys">36.5.3. /sys</a></li>
</ul>
</li>
<li><a href="#_interrupciones">36.6. interrupciones</a></li>
<li><a href="#_initialization_and_registering">36.7. Initialization and Registering</a></li>
<li><a href="#_aplicaciones_2">36.8. Aplicaciones</a></li>
<li><a href="#_scancodes">36.9. Scancodes</a></li>
<li><a href="#_ejemplos_2">36.10. Ejemplos</a></li>
<li><a href="#_referencias_4">36.11. Referencias</a></li>
</ul>
</li>
<li><a href="#_analisis_de_algunas_computadoras">37. Analisis de algunas computadoras</a>
<ul class="sectlevel2">
<li><a href="#_lenovo_thinkpad_t560">37.1. Lenovo ThinkPad T560</a></li>
<li><a href="#_lenovo_thinkpad_t520">37.2. Lenovo ThinkPad T520</a></li>
<li><a href="#_otras_computadoras">37.3. Otras computadoras</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_dudas">1. Dudas</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><code>getconf -a</code></p>
</li>
<li>
<p>ls /sys/devices/system/memory</p>
</li>
<li>
<p>hwinfo | grep -i class</p>
</li>
<li>
<p>info del memory controller -&lt; ¿en sys,proc,dev,etc?</p>
</li>
<li>
<p>device tree overlay</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_referencias">2. Referencias</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_arquitecture_computer">2.1. Arquitecture computer</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://wiki.osdev.org/Main_Page" class="bare">https://wiki.osdev.org/Main_Page</a></p>
</li>
<li>
<p><a href="https://wxdublin.gitbooks.io/deep-into-linux-and-beyond/content/index.html" class="bare">https://wxdublin.gitbooks.io/deep-into-linux-and-beyond/content/index.html</a> &#8594; gustavo duarte</p>
<div class="ulist">
<ul>
<li>
<p>mapa de la memoria, etc</p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="https://wxdublin.gitbooks.io/deep-into-linux-and-beyond/content/memory_map.html" class="bare">https://wxdublin.gitbooks.io/deep-into-linux-and-beyond/content/memory_map.html</a></p>
</li>
<li>
<p>Gustavo Duarte : <a href="https://manybutfinite.com/about/" class="bare">https://manybutfinite.com/about/</a></p>
<div class="ulist">
<ul>
<li>
<p>las imagenes no se cargan en google-chrome pero en firefox sí</p>
</li>
<li>
<p><a href="https://manybutfinite.com/archives/" class="bare">https://manybutfinite.com/archives/</a></p>
</li>
<li>
<p><a href="https://manybutfinite.com/post/how-computers-boot-up/" class="bare">https://manybutfinite.com/post/how-computers-boot-up/</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_ibm">2.2. IBM</h3>
<div class="ulist">
<ul>
<li>
<p><a href="http://es.wikipedia.org/wiki/IBM_PC" class="bare">http://es.wikipedia.org/wiki/IBM_PC</a></p>
<div class="ulist">
<ul>
<li>
<p><a href="http://es.wikipedia.org/wiki/IBM_Personal_Computer_BASIC" class="bare">http://es.wikipedia.org/wiki/IBM_Personal_Computer_BASIC</a></p>
</li>
<li>
<p><a href="http://es.wikipedia.org/wiki/IBM_PC_ROM_BIOS" class="bare">http://es.wikipedia.org/wiki/IBM_PC_ROM_BIOS</a></p>
</li>
<li>
<p>IBM PC 5150 and IBM PC XT 5160</p>
<div class="ulist">
<ul>
<li>
<p><a href="http://www-03.ibm.com/ibm/history/exhibits/pc25/pc25_intro.html" class="bare">http://www-03.ibm.com/ibm/history/exhibits/pc25/pc25_intro.html</a></p>
<div class="ulist">
<ul>
<li>
<p><a href="http://www-03.ibm.com/ibm/history/exhibits/pc25/pc25_reference.html" class="bare">http://www-03.ibm.com/ibm/history/exhibits/pc25/pc25_reference.html</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>PC Hardware programming</p>
<div class="ulist">
<ul>
<li>
<p><a href="http://pdos.csail.mit.edu/6.828/2014/reference.html">mit</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_book">2.2.1. Book</h4>
<div class="ulist">
<ul>
<li>
<p><a href="http://karbosguide.com/books/pcarchitecture/start.htm">PC</a></p>
</li>
<li>
<p><a href="http://www.zator.com/index.htm">organiZATOR</a></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_manuals">2.2.2. Manuals</h4>
<div class="ulist">
<ul>
<li>
<p><a href="./home/candido/Escritorio/apuntes_EstructuraComputadores/ARQUITECTURA/micros_board/PC/IBM">local</a></p>
<div class="ulist">
<ul>
<li>
<p>ibm_xt</p>
</li>
<li>
<p>ibm_at</p>
</li>
<li>
<p>ibm_serie300: pentium pro</p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="http://www.retroarchive.org/dos/docs/ibm5160techref.pdf">ibm5160</a></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_ibm_list">2.2.3. IBM list</h4>
<div class="ulist">
<ul>
<li>
<p><a href="http://es.wikipedia.org/wiki/Lista_de_computadoras_personales_de_IBM" class="bare">http://es.wikipedia.org/wiki/Lista_de_computadoras_personales_de_IBM</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_manuales_lenovo">2.3. Manuales Lenovo</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://pcsupport.lenovo.com/" class="bare">https://pcsupport.lenovo.com/</a> &#8594; serial: MP15YSW7</p>
<div class="ulist">
<ul>
<li>
<p>guia de usuario</p>
</li>
<li>
<p>guia de mantenimiento : lo utilizan el servicio técnico de mantenimiento &#8594; hay programas que sólo lo pueden utilizar ellos.</p>
<div class="ulist">
<ul>
<li>
<p>como usar el diagnostico UEFI</p>
</li>
</ul>
</div>
</li>
<li>
<p>controladores y software</p>
<div class="ulist">
<ul>
<li>
<p>descargar bios</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_info">2.4. info</h3>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.ubuntu.com/certification/hardware/201102-7229/">ubuntu certificate test</a></p>
</li>
<li>
<p><a href="http://www.notebookcheck.net/Review-Lenovo-Thinkpad-T520-Notebook.51596.0.html" class="bare">http://www.notebookcheck.net/Review-Lenovo-Thinkpad-T520-Notebook.51596.0.html</a></p>
</li>
<li>
<p><a href="http://www.thinkwiki.org/wiki/ThinkWiki" class="bare">http://www.thinkwiki.org/wiki/ThinkWiki</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_herramientas_comandos_aplicaciones_etc">3. Herramientas: comandos, aplicaciones, etc</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_comandos_linux">3.1. comandos linux</h3>
<div class="ulist">
<ul>
<li>
<p>listado</p>
<div class="listingblock">
<div class="content">
<pre>lshw -h
sudo lshw -X
sudo lshw-gtk
sudo lshw -short
sudo lshw -short -C memory


inxi -h
inxi -b
inxi -c 0 -F
inxi -x
inxi -xxx
inxi -M
inxi -m
inxi -c 0 -ACdGMNSz

hwinfo -h
hwinfo --all -&gt; controladores:MEMORY!!, DMA, etc
hwinfo --short -&gt; frecuencia actual de la cpu -&gt; es dinámico, ejecuto más de una vez y da resultados diferentes.

hw-probe

dmidecode -h
dmidecode -t
sudo dmidecode -t system ó sudo dmidecode -t 1
sudo dmidecode -t baseboard ó sudo dmidecode -t 2

biosdecode -h
sudo biosdecode ó sudo biosdecode --dev-mem /dev/mem
sudo biosdecode --pir full


lscpu
lsmem
lsblk
lspci
lsusb
lsmod

cpuid
sudo lshw -C cpu
inxi -Cxxx
sudo dmidecode -t processor
cat /proc/cpuinfo
lscpu


lsmem
free -m
vmstat -h
vmstat -a
vmstat -s

ls /sys/devices/system/cpu/cpu0/cache/
ls /sys/devices/system/cpu/cpu0/cache/index0
cat /sys/devices/system/cpu/cpu0/cache/index0/level
getconf LEVEL1_DCACHE_LINESIZE

getconf TABTAB
getconf -a


sudo blkid
sudo blkid info /dev/sda
lsblk /dev/sda
sudo hdparm -Ttv /dev/sda5
sudo hdparm -I /dev/sda | more</pre>
</div>
</div>
</li>
<li>
<p>comandos relacionados con la arquitectura</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://unix.stackexchange.com/questions/77718/32-bit-64-bit-cpu-op-mode-on-linux/77724" class="bare">https://unix.stackexchange.com/questions/77718/32-bit-64-bit-cpu-op-mode-on-linux/77724</a></p>
<div class="listingblock">
<div class="content">
<pre>hwinfo -cpu | more -&gt; MUCHISIMA INFORMACION
hwinfo -HARDWARITEM
HARDWARITEM: all, arch, bios, block, bluetooth, braille, bridge, camera, cdrom, chipcard,  cpu,  disk,  dsl,  dvb,  fingerprint,  floppy,framebuffer, gfxcard, hub, ide, isapnp, isdn, joystick, keyboard, memory, mmc-ctrl, modem, monitor, mouse, netcard, network,
partition, pci, pcmcia, pcmcia-ctrl, pppoe, printer, redasd, reallyall, scanner, scsi, smp, sound, storage-ctrl, sys,  tape,tv, uml, usb, usb-ctrl, vbe, wlan, xen, zip

- show all disks
              hwinfo --disk

       - just an overview
              hwinfo --short --block

       - show a particular disk
              hwinfo --disk --only /dev/sdb

       - save disk config state
              hwinfo --disk --save-config=all

       - try 4 graphics card ports for monitor data (default: 3)
              hwprobe=bios.ddc.ports=4 hwinfo --monitor



dpgk --print-architecture
dpkg --print-foreign-architectures
lshw --short
uname -a
getconf WORD_BIT
getconf LONG_BIT
cat /proc/cpuinfo
lscpu
file /usr/bin/ld
[ $((0xffffffff)) -eq -1 ] &amp;&amp; echo 32 || echo 64</pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_links">3.2. links</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://linuxhandbook.com/check-cpu-info-linux/" class="bare">https://linuxhandbook.com/check-cpu-info-linux/</a> &#8594; muy buenooooooooooooooooo</p>
</li>
<li>
<p>googling linux info of cpu registers</p>
</li>
<li>
<p><a href="https://www.tecmint.com/check-linux-cpu-information/" class="bare">https://www.tecmint.com/check-linux-cpu-information/</a></p>
</li>
<li>
<p><a href="https://www.binarytides.com/linux-cpu-information/" class="bare">https://www.binarytides.com/linux-cpu-information/</a></p>
</li>
<li>
<p><a href="http://manpages.ubuntu.com/manpages/bionic/man1/x86info.1.html" class="bare">http://manpages.ubuntu.com/manpages/bionic/man1/x86info.1.html</a></p>
</li>
<li>
<p><a href="http://www.cpuid.com/" class="bare">http://www.cpuid.com/</a></p>
</li>
<li>
<p><a href="http://code.google.com/p/likwid/wiki/Introduction">liwid</a>: GNU Linux operating system. A lightweight performance-oriented tool suite for x86 multicore environments</p>
</li>
<li>
<p><a href="http://instlatx64.atw.hu/:x86" class="bare">http://instlatx64.atw.hu/:x86</a>, x64 Instruction Latency, Memory Latency and CPUID dumps</p>
</li>
<li>
<p><a href="http://www.agner.org/optimize/?e=0,34#links" class="bare">http://www.agner.org/optimize/?e=0,34#links</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_intel_utils">3.3. Intel-utils</h3>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.intel.com/support/graphics/sb/CS-009245.htm">intel chipset util</a>: win</p>
</li>
<li>
<p><a href="http://www.intel.com/p/en_US/support/highlights/processors/toolspiu">processor util</a>: win, linux</p>
</li>
<li>
<p><a href="http://www.intel.com/content/www/us/en/processors/core/CoreTechnicalResources.html" class="bare">http://www.intel.com/content/www/us/en/processors/core/CoreTechnicalResources.html</a></p>
<div class="ulist">
<ul>
<li>
<p>ir hasta el final de la página</p>
</li>
<li>
<p><a href="https://www.intel.com/content/www/us/en/support/detect.html" class="bare">https://www.intel.com/content/www/us/en/support/detect.html</a> &#8594; todas las herramientas corren en Windows</p>
</li>
<li>
<p>BIOS update</p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="https://www.intel.com/content/www/us/en/products/docs/processors/core/core-technical-resources.html" class="bare">https://www.intel.com/content/www/us/en/products/docs/processors/core/core-technical-resources.html</a></p>
<div class="ulist">
<ul>
<li>
<p>asistente DSA <a href="https://www.intel.com/content/www/us/en/support/detect.html" class="bare">https://www.intel.com/content/www/us/en/support/detect.html</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_sistema_de_ficheros">4. Sistema de Ficheros</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>información en:</p>
<div class="listingblock">
<div class="content">
<pre>/proc
  man proc  : meminfo description, etc
  sudo cat /proc/cpuinfo
  sudo cat /proc/meminfo
  sudo cat /proc/interrupts
  sudo cat /proc/diskstats -&gt; pt-diskstats aplication -&gt; percona-toolkit package
  sudo cat /proc/iomem
  sudo cat /proc/ioports
  sudo cat /proc/scsi/scsi
  cat /proc/scsi/device_info
/dev
/sys</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tools_x86">5. Tools x86</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_sencillo">5.1. sencillo</h3>
<div class="ulist">
<ul>
<li>
<p>site:cyberciti.biz/faq cpu number</p>
</li>
<li>
<p>site:cyberciti.biz/faq dmidecode</p>
</li>
<li>
<p>site:cyberciti.biz/faq ram</p>
</li>
<li>
<p><a href="https://www.cyberciti.biz/faq/check-ram-speed-linux/" class="bare">https://www.cyberciti.biz/faq/check-ram-speed-linux/</a> &#8594; dmidecode</p>
</li>
<li>
<p><a href="https://www.cyberciti.biz/faq/how-to-check-cpu-temperature-on-ubuntu-linux/" class="bare">https://www.cyberciti.biz/faq/how-to-check-cpu-temperature-on-ubuntu-linux/</a></p>
</li>
<li>
<p><a href="https://www.cyberciti.biz/faq/check-how-many-cpus-are-there-in-linux-system/" class="bare">https://www.cyberciti.biz/faq/check-how-many-cpus-are-there-in-linux-system/</a></p>
</li>
<li>
<p><a href="https://www.cyberciti.biz/faq/linux-list-hardware-information/" class="bare">https://www.cyberciti.biz/faq/linux-list-hardware-information/</a></p>
</li>
<li>
<p><a href="https://www.cyberciti.biz/faq/tag/" class="bare">https://www.cyberciti.biz/faq/tag/</a></p>
</li>
<li>
<p><a href="https://www.cyberciti.biz/faq/find-hard-disk-hardware-specs-on-linux/" class="bare">https://www.cyberciti.biz/faq/find-hard-disk-hardware-specs-on-linux/</a></p>
</li>
<li>
<p><a href="https://www.cyberciti.biz/faq/how-to-find-the-number-of-ram-slots-in-linux/" class="bare">https://www.cyberciti.biz/faq/how-to-find-the-number-of-ram-slots-in-linux/</a></p>
</li>
<li>
<p><a href="https://www.cyberciti.biz/faq/how-to-find-serial-number-of-lenovo-laptop-from-linux/" class="bare">https://www.cyberciti.biz/faq/how-to-find-serial-number-of-lenovo-laptop-from-linux/</a></p>
</li>
<li>
<p><a href="https://www.cyberciti.biz/faq/check-ram-in-ubuntu/" class="bare">https://www.cyberciti.biz/faq/check-ram-in-ubuntu/</a></p>
</li>
<li>
<p><a href="https://www.cyberciti.biz/faq/whatis-maximum-ram-supported-by-linux-server-computer-system/" class="bare">https://www.cyberciti.biz/faq/whatis-maximum-ram-supported-by-linux-server-computer-system/</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_memory">5.2. memory</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.4schmidts.com/memconf.html" class="bare">https://www.4schmidts.com/memconf.html</a></p>
<div class="ulist">
<ul>
<li>
<p><a href="https://sourceforge.net/projects/memconf/" class="bare">https://sourceforge.net/projects/memconf/</a> &#8594; gzip -d memconf.v3.16.pl.gz &#8594; sudo ./memconf.v3.16.pl</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_kernel_x86">5.3. kernel x86</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.kernel.org/doc/html/latest/x86/index.html" class="bare">https://www.kernel.org/doc/html/latest/x86/index.html</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_avanzado">5.4. avanzado</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://wiki.gentoo.org/wiki/Category:Hardware_detection_tools" class="bare">https://wiki.gentoo.org/wiki/Category:Hardware_detection_tools</a></p>
</li>
<li>
<p><a href="https://www.packtpub.com/product/the-ultimate-kali-linux-book-second-edition/9781801818933" class="bare">https://www.packtpub.com/product/the-ultimate-kali-linux-book-second-edition/9781801818933</a></p>
</li>
<li>
<p><a href="https://www.brendangregg.com/" class="bare">https://www.brendangregg.com/</a> &#8594; muy bueno</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_códigos">6. Códigos</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_uuid">6.1. uuid</h3>
<div class="ulist">
<ul>
<li>
<p>uuid:A universally unique identifier (UUID) is a 128-bit label used for information in computer systems. The term globally unique identifier (GUID) is also used. Universally unique identifier. UUID/GUID as used by UEFI variables.</p>
</li>
<li>
<p><code>lshw -X</code></p>
<div class="listingblock">
<div class="content">
<pre>         xxxxxxxx-xxxx-Mxxx-Nxxx-xxxxxxxxxxxx -&gt; 819AF1D7-F15C-CB11-8E0E-EA4C006016AC -&gt; versión desconocida -&gt; indescifrable
         https://www.uuidtools.com/decode -&gt; https://www.uuidtools.com/decode
         utilidad: una aplicación como un videojuego genera ella misma un UUID siguiendo una versión para que ese nodo sea identificable entre todos los equipos que participan en el juego.</pre>
</div>
</div>
</li>
<li>
<p><code>dmidecode -t system</code></p>
<div class="ulist">
<ul>
<li>
<p>UUID: d7f19a81-5cf1-11cb-8e0e-ea4c006016ac  &#8594; es diferente del generado por lshw</p>
<div class="ulist">
<ul>
<li>
<p>versión 1</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_linux_s_o">7. Linux S.O</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_variables_de_configuración">7.1. variables de configuración</h3>
<div class="ulist">
<ul>
<li>
<p>man sysconf &#8594; función de C</p>
</li>
<li>
<p>man getconf</p>
<div class="ulist">
<ul>
<li>
<p>getconf PAGESIZE &#8594; 4096</p>
</li>
<li>
<p>getconf TAB</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_configuration">7.2. configuration</h3>
<div class="ulist">
<ul>
<li>
<p>Linux Configuration and Operations Guide.</p>
<div class="ulist">
<ul>
<li>
<p>mejor ubuntu configuration and operation guide</p>
</li>
<li>
<p>tipos ubuntu: <a href="https://ubuntu.com/core" class="bare">https://ubuntu.com/core</a> core (embedded), desktop &#8594; <a href="https://help.ubuntu.com/stable/ubuntu-help/" class="bare">https://help.ubuntu.com/stable/ubuntu-help/</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>ubuntu desktop tuning</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_linux_kernel_arquitectura_isa">7.3. Linux Kernel: Arquitectura (ISA)</h3>
<div class="paragraph">
<p>Arquitectura x86 (IA32) o x86-64 según el microprocesador:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>i386 : IA32</p>
</li>
<li>
<p>i486 : IA32</p>
</li>
<li>
<p>i686 : IA32</p>
</li>
<li>
<p>x86_64 : IA64</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Cada kernel incluye mejoras según evolucionan los microprocesadores compatibles de Intel.</p>
</div>
<div class="paragraph">
<p>Se puede cargar el kernel i686 de 32 bits en un microprocesasor de 64 bits.</p>
</div>
<div class="paragraph">
<p>Para ver la compatibilidad de un kernel específico como i686 ver en el manual del compilador gcc la opción <a href="http://gcc.gnu.org/onlinedocs/gcc/i386-and-x86_002d64-Options.html">march</a></p>
</div>
<div class="paragraph">
<p>Compilar para un microprocesador específico necesita las librerías y cabeceras de dicha arquitectura, sino no se puede compilar. Por ejemplo en una instalación del S.O de 32 bits si compilo para 64 bits puede ocurrir:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c"><span class="n">candido</span><span class="err">@</span><span class="n">izar</span><span class="o">:~/</span><span class="n">tutoriales</span><span class="o">/</span><span class="n">C_tutorial</span><span class="o">/</span><span class="n">kn_king</span><span class="o">/</span><span class="n">cap2</span><span class="err">$</span> <span class="n">gcc</span> <span class="o">-</span><span class="n">m64</span> <span class="n">pun</span><span class="p">.</span><span class="n">c</span>
<span class="n">In</span> <span class="n">file</span> <span class="n">included</span> <span class="n">from</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">features</span><span class="p">.</span><span class="n">h</span><span class="o">:</span><span class="mi">378</span><span class="p">,</span>
                 <span class="n">from</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">stdio</span><span class="p">.</span><span class="n">h</span><span class="o">:</span><span class="mi">28</span><span class="p">,</span>
                 <span class="n">from</span> <span class="n">pun</span><span class="p">.</span><span class="n">c</span><span class="o">:</span><span class="mi">7</span><span class="o">:</span>
<span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">gnu</span><span class="o">/</span><span class="n">stubs</span><span class="p">.</span><span class="n">h</span><span class="o">:</span><span class="mi">9</span><span class="o">:</span><span class="mi">27</span><span class="o">:</span> <span class="n">error</span><span class="o">:</span> <span class="n">gnu</span><span class="o">/</span><span class="n">stubs</span><span class="o">-</span><span class="mi">64</span><span class="p">.</span><span class="n">h</span><span class="o">:</span> <span class="n">No</span> <span class="n">existe</span> <span class="n">el</span> <span class="n">fichero</span> <span class="n">o</span> <span class="n">el</span> <span class="n">directorio</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Sería necesario instalar el paquete <code>glibc-devel-2.8-3.x86_64</code></p>
</div>
<div class="paragraph">
<p><a href="http://www.ibm.com/developerworks/library/l-port64/index.html">porting 32 bit application to 64 bit</a></p>
</div>
<div class="paragraph">
<p><a href="http://en.wikipedia.org/wiki/Cross_compiler#GCC_and_cross_compilation">cross_compilation</a></p>
</div>
<div class="paragraph">
<p>Para tener información del kernel instalado, ejecutar:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c"><span class="err">$</span><span class="n">uname</span> <span class="o">-</span><span class="n">a</span>
<span class="err">$</span><span class="n">uname</span> <span class="o">-</span><span class="n">m</span>   <span class="o">-&gt;</span> <span class="n">machine</span>
<span class="err">$</span><span class="n">getconf</span> <span class="n">LONG_BIT</span>         <span class="o">-&gt;</span> <span class="n">data</span> <span class="n">bus</span> <span class="n">size</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_configuracion_del_kernel_instalado">7.4. Configuracion del kernel instalado</h3>
<div class="ulist">
<ul>
<li>
<p><code>cat /lib/modules/$(uname -r)/build/.config</code> o <code>cat /lib/modules/`uname -r`/build/.config</code></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_drivers_o_modulos_del_kernel">7.5. Drivers o Modulos del Kernel</h3>
<div class="ulist">
<ul>
<li>
<p>lsmod</p>
<div class="ulist">
<ul>
<li>
<p>Lista los módulos cargados.Visualiza con formato el info del fichero /proc/modules</p>
</li>
<li>
<p>Informa de las dependencias entre módulos.</p>
</li>
<li>
<p>listado</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">candido@lur:~<span class="nv">$ </span>lsmod
Module                  Size  Used by
bluetooth             180104  23 bnep,rfcomm,btusb
cfg80211              205544  2 iwlwifi,mac80211
serio_raw              13211  0
soundcore              15091  1 snd
mac_hid                13253  0
nvram                  14413  1 thinkpad_acpi
tpm_tis                18804  0
mei                    41616  0
lp                     17799  0
parport                46562  3 parport_pc,ppdev,lp
wmi                    19256  0
firewire_ohci          41000  0
firewire_core          63558  1 firewire_ohci
crc_itu_t              12707  1 firewire_core
i915                  473035  3
drm_kms_helper         46978  1 i915
drm                   242038  4 i915,drm_kms_helper
i2c_algo_bit           13423  1 i915
video                  19596  1 i915
e1000e                156693  0
sdhci_pci              18826  0
sdhci                  33205  1 sdhci_pci</code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><code>modprobe</code></p>
<div class="ulist">
<ul>
<li>
<p>Carga o descarga los módulos LKM.</p>
</li>
<li>
<p>LKM loadable kernel module. Modulos del kernel recargables después de que el kernel ha sido instalado en el sistema de ficheros y en RAM.</p>
</li>
<li>
<p>Es utilizado indirectamente por el gestor dinámico de dispositivos <em>udev</em> en la creación de nodos de dispositivos (asignación de ficheros en la carpeta /dev)</p>
</li>
<li>
<p>ficheros de configuración de los modulos LKM:</p>
<div class="ulist">
<ul>
<li>
<p><code>man modprobe.conf</code></p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">candido@lur:~<span class="nv">$ </span><span class="nb">ls</span> <span class="nt">-l</span>  /etc/modprobe.d
total 40
<span class="nt">-rw-r--r--</span> 1 root root 2507 May  5  2011 alsa-base.conf
<span class="nt">-rw-r--r--</span> 1 root root  325 Jun 15  2011 blacklist-ath_pci.conf
<span class="nt">-rw-r--r--</span> 1 root root 1603 Jun 15  2011 blacklist.conf
<span class="nt">-rw-r--r--</span> 1 root root  210 Jun 15  2011 blacklist-firewire.conf
<span class="nt">-rw-r--r--</span> 1 root root  661 Jun 15  2011 blacklist-framebuffer.conf
<span class="nt">-rw-r--r--</span> 1 root root  156 May  5  2011 blacklist-modem.conf
lrwxrwxrwx 1 root root   41 May 29 07:44 blacklist-oss.conf -&gt; /lib/linux-sound-base/noOSS.modprobe.conf
<span class="nt">-rw-r--r--</span> 1 root root  583 Jun 15  2011 blacklist-rare-network.conf
<span class="nt">-rw-r--r--</span> 1 root root 1077 Jun 15  2011 blacklist-watchdog.conf
<span class="nt">-rw-r--r--</span> 1 root root  356 May 29 07:47 oss-compat.conf
<span class="nt">-rw-r--r--</span> 1 root root   30 May 18 10:03 vmwgfx-fbdev.conf</code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>blacklist: la lista negra</p>
<div class="ulist">
<ul>
<li>
<p>impide que dos módulos se carguen para el mismo dispositivo.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_kernel_parameters_or_kernel_options">7.6. Kernel parameters or Kernel options</h3>
<div class="ulist">
<ul>
<li>
<p>Modulos instalados o disponibles</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">candido@lur:~<span class="nv">$ </span><span class="nb">ls</span> /sys/module
8250          btusb           firewire_ohci  loop        pcie_aspm    scsi_mod                snd_seq             uhci_hcd
acpi          cfg80211        fuse           lp          pciehp       sdhci                   snd_seq_device      uinput
acpi_cpufreq  cpuidle         i2c_algo_bit   mac80211    pci_hotplug  sdhci_pci               snd_seq_midi        usbcore
ahci          crc_itu_t       i8042          mac_hid     pdc_adma     serio_raw               snd_seq_midi_event  usb_libusual
apparmor      debug_core      i915           md_mod      pnp          sg                      snd_timer           video
arc4          dm_crypt        intel_idle     mei         ppdev        snd                     soundcore           virtio_net
ata_generic   dns_resolver    ipv6           mmc_core    ppp_generic  snd_hda_codec           spurious            virtio_pci
ata_piix      drm             iwlwifi        mousedev    printk       snd_hda_codec_conexant  sr_mod              vt
battery       drm_kms_helper  joydev         netpoll     processor    snd_hda_codec_hdmi      sym53c8xx           wmi
binfmt_misc   e1000e          kernel         nvram       psmouse      snd_hda_intel           tcp_cubic           xen_acpi_processor
block         edd             keyboard       parport     pstore       snd_hwdep               thermal             xhci_hcd
bluetooth     efivars         kgdboc         parport_pc  rcutree      snd_page_alloc          thinkpad_acpi       xz_dec
bnep          ehci_hcd        libahci        pata_acpi   rfcomm       snd_pcm                 tpm
brd           firewire_core   libata         pata_sis    rfkill       snd_rawmidi             tpm_tis</code></pre>
</div>
</div>
</li>
<li>
<p>Valores por defecto de los parámetros de los módulos:</p>
<div class="ulist">
<ul>
<li>
<p>leo un parametro de un modulo: por ejemplo del moudlo i915 el parámetro modeset</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">root@lur:/home/candido# <span class="nb">cat</span>  /sys/module/i915/parameters/modeset
<span class="nt">-1</span></code></pre>
</div>
</div>
</li>
<li>
<p>todos los parámetros de un módulo:Pej del i915</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">root@lur:/home/candido# <span class="nb">ls</span> /sys/module/i915/parameters/ | <span class="k">while </span><span class="nb">read </span>parameter<span class="p">;</span><span class="k">do</span> <span class="se">\</span>
    <span class="nb">echo</span> <span class="nt">-n</span> <span class="s2">"Parameter: </span><span class="nv">$parameter</span><span class="s2"> --&gt; "</span><span class="p">;</span> <span class="se">\</span>
    <span class="nb">cat</span> /sys/module/i915/parameters/<span class="nv">$parameter</span><span class="p">;</span> <span class="se">\</span>
   <span class="k">done
</span>Parameter: enable_hangcheck <span class="nt">--</span><span class="o">&gt;</span> Y
Parameter: fbpercrtc <span class="nt">--</span><span class="o">&gt;</span> 0
Parameter: i915_enable_fbc <span class="nt">--</span><span class="o">&gt;</span> <span class="nt">-1</span>
Parameter: i915_enable_rc6 <span class="nt">--</span><span class="o">&gt;</span> <span class="nt">-1</span>
Parameter: lvds_downclock <span class="nt">--</span><span class="o">&gt;</span> 0
Parameter: lvds_use_ssc <span class="nt">--</span><span class="o">&gt;</span> <span class="nt">-1</span>
Parameter: modeset <span class="nt">--</span><span class="o">&gt;</span> <span class="nt">-1</span>
Parameter: panel_ignore_lid <span class="nt">--</span><span class="o">&gt;</span> 0
Parameter: powersave <span class="nt">--</span><span class="o">&gt;</span> 1
Parameter: reset <span class="nt">--</span><span class="o">&gt;</span> Y
Parameter: semaphores <span class="nt">--</span><span class="o">&gt;</span> <span class="nt">-1</span>
Parameter: vbt_sdvo_panel_type <span class="nt">--</span><span class="o">&gt;</span> <span class="nt">-1</span></code></pre>
</div>
</div>
</li>
<li>
<p>commando script para leer los parámetros de todos los módulos</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh"><span class="nb">cat</span> /proc/modules | <span class="nb">cut</span> <span class="nt">-f</span> 1 <span class="nt">-d</span> <span class="s2">" "</span> | <span class="k">while </span><span class="nb">read </span>module<span class="p">;</span> <span class="k">do</span> <span class="se">\</span>
 <span class="nb">echo</span> <span class="s2">"Module: </span><span class="nv">$module</span><span class="s2">"</span><span class="p">;</span> <span class="se">\</span>
 <span class="k">if</span> <span class="o">[</span> <span class="nt">-d</span> <span class="s2">"/sys/module/</span><span class="nv">$module</span><span class="s2">/parameters"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span> <span class="se">\</span>
  <span class="nb">ls</span> /sys/module/<span class="nv">$module</span>/parameters/ | <span class="k">while </span><span class="nb">read </span>parameter<span class="p">;</span> <span class="k">do</span> <span class="se">\</span>
   <span class="nb">echo</span> <span class="nt">-n</span> <span class="s2">"Parameter: </span><span class="nv">$parameter</span><span class="s2"> --&gt; "</span><span class="p">;</span> <span class="se">\</span>
   <span class="nb">cat</span> /sys/module/<span class="nv">$module</span>/parameters/<span class="nv">$parameter</span><span class="p">;</span> <span class="se">\</span>
  <span class="k">done</span><span class="p">;</span> <span class="se">\</span>
 <span class="k">fi</span><span class="p">;</span> <span class="se">\</span>
 <span class="nb">echo</span><span class="p">;</span> <span class="se">\</span>
<span class="k">done</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>parametros configurables durante el arranque o en runtime:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh"><span class="nv">$ </span><span class="nb">sudo </span>modinfo <span class="nt">-p</span> i915
modeset:Use kernel modesetting <span class="o">[</span>KMS] <span class="o">(</span><span class="nv">0</span><span class="o">=</span>DRM_I915_KMS from .config, <span class="nv">1</span><span class="o">=</span>on, <span class="nt">-1</span><span class="o">=</span>force vga console preference <span class="o">[</span>default]<span class="o">)</span> <span class="o">(</span>int<span class="o">)</span>
fbpercrtc: <span class="o">(</span>int<span class="o">)</span>
panel_ignore_lid:Override lid status <span class="o">(</span><span class="nv">0</span><span class="o">=</span>autodetect <span class="o">[</span>default], <span class="nv">1</span><span class="o">=</span>lid open, <span class="nt">-1</span><span class="o">=</span>lid closed<span class="o">)</span> <span class="o">(</span>int<span class="o">)</span>
powersave:Enable powersavings, fbc, downclocking, etc. <span class="o">(</span>default: <span class="nb">true</span><span class="o">)</span> <span class="o">(</span>int<span class="o">)</span>
semaphores:Use semaphores <span class="k">for </span>inter-ring <span class="nb">sync</span> <span class="o">(</span>default: <span class="nt">-1</span> <span class="o">(</span>use per-chip defaults<span class="o">))</span> <span class="o">(</span>int<span class="o">)</span>
i915_enable_rc6:Enable power-saving render C-state 6 <span class="o">(</span>default: <span class="nt">-1</span> <span class="o">(</span>use per-chip default<span class="o">)</span> <span class="o">(</span>int<span class="o">)</span>
i915_enable_fbc:Enable frame buffer compression <span class="k">for </span>power savings <span class="o">(</span>default: <span class="nt">-1</span> <span class="o">(</span>use per-chip default<span class="o">))</span> <span class="o">(</span>int<span class="o">)</span>
lvds_downclock:Use panel <span class="o">(</span>LVDS/eDP<span class="o">)</span> downclocking <span class="k">for </span>power savings <span class="o">(</span>default: <span class="nb">false</span><span class="o">)</span> <span class="o">(</span>int<span class="o">)</span>
lvds_use_ssc:Use Spread Spectrum Clock with panels <span class="o">[</span>LVDS/eDP] <span class="o">(</span>default: auto from VBT<span class="o">)</span> <span class="o">(</span>int<span class="o">)</span>
vbt_sdvo_panel_type:Override selection of SDVO panel mode <span class="k">in </span>the VBT <span class="o">(</span>default: auto<span class="o">)</span> <span class="o">(</span>int<span class="o">)</span>
reset:Attempt GPU resets <span class="o">(</span>default: <span class="nb">true</span><span class="o">)</span> <span class="o">(</span>bool<span class="o">)</span>
enable_hangcheck:Periodically check GPU activity <span class="k">for </span>detecting hangs. WARNING: Disabling this can cause system wide hangs. <span class="o">(</span>default: <span class="nb">true</span><span class="o">)</span> <span class="o">(</span>bool<span class="o">)</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Para configurar los parámetros de <em>i915</em> durante el arranque editamos para <em>Grub2</em> el <code>/etc/default/grub</code> :</p>
<div class="ulist">
<ul>
<li>
<p>i915.modeset=1</p>
</li>
<li>
<p>i915.powersave=true</p>
</li>
<li>
<p>i915.i915_enable_rc6=-1</p>
</li>
</ul>
</div>
</li>
<li>
<p>Estos parámetros se ponen como una lista en  GRUB_CMDLINE_LINUX_DEFAULT= quiet splash i915.modeset=1 i915.powersave=true</p>
</li>
<li>
<p>Actualizamos <em>grub.cfg</em> con <code>grub-mkconfig -o /boot/grub/grub.cfg</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Configuración posterior al arranque</p>
<div class="ulist">
<ul>
<li>
<p>sysctl is a tool (in [core] package procps-ng) for examining and changing kernel parameters at runtime. sysctl is implemented in procfs, the virtual process file system at /proc/.</p>
</li>
<li>
<p>Se pueden configurar los parámetros de:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">candido@lur:~<span class="nv">$ </span><span class="nb">ls</span> <span class="nt">-l</span> /proc/sys
total 0
dr-xr-xr-x 0 root root 0 Oct  5 09:18 abi
dr-xr-xr-x 0 root root 0 Oct  5 09:18 debug
dr-xr-xr-x 0 root root 0 Oct  5 08:52 dev
dr-xr-xr-x 0 root root 0 Oct  5 08:51 fs
dr-xr-xr-x 0 root root 0 Oct  5  2012 kernel
dr-xr-xr-x 0 root root 0 Oct  5 08:52 net
dr-xr-xr-x 0 root root 0 Oct  5 08:52 vm</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>En el caso de /proc/sys/dev:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">candido@lur:~<span class="nv">$ </span><span class="nb">ls</span> <span class="nt">-l</span> /proc/sys/dev
total 0
dr-xr-xr-x 0 root root 0 Oct  5 09:18 cdrom
dr-xr-xr-x 0 root root 0 Oct  5 09:18 hpet
dr-xr-xr-x 0 root root 0 Oct  5 09:18 mac_hid
dr-xr-xr-x 0 root root 0 Oct  5 08:52 parport
dr-xr-xr-x 0 root root 0 Oct  5 09:18 raid
dr-xr-xr-x 0 root root 0 Oct  5 09:18 scsi</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Observo que no aperece el dispositivo framebuffer /dev/fb</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Listamos todos los parámetros configurables con <code>sysctl -a</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_plataforma">8. Plataforma</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_comandos_linux_aplicaciones">8.1. comandos linux, aplicaciones</h3>
<div class="ulist">
<ul>
<li>
<p>listado</p>
<div class="listingblock">
<div class="content">
<pre>lshw -h
sudo lshw -X
inxi -c 0 -ACdGMNSz
qué diferencia hay con Full? +inxi -c 0 -F+
inxi -x ó inxi -xx ó -xxx -&gt; info extra
hwinfo</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_hw_probe">8.2. hw-probe</h3>
<div class="sect3">
<h4 id="_refs">8.2.1. refs</h4>
<div class="ulist">
<ul>
<li>
<p><a href="https://linux-hardware.org" class="bare">https://linux-hardware.org</a></p>
</li>
<li>
<p><a href="https://github.com/linuxhw/hw-probe" class="bare">https://github.com/linuxhw/hw-probe</a></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_install">8.2.2. install</h4>
<div class="ulist">
<ul>
<li>
<p>genera logs de decenas de comandos de análisis de hardware en lugar de ir comando a comando</p>
</li>
<li>
<p><a href="https://github.com/linuxhw/hw-probe/blob/master/INSTALL.md" class="bare">https://github.com/linuxhw/hw-probe/blob/master/INSTALL.md</a></p>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/linuxhw/hw-probe/blob/master/INSTALL.md#install-on-ubuntu" class="bare">https://github.com/linuxhw/hw-probe/blob/master/INSTALL.md#install-on-ubuntu</a></p>
</li>
<li>
<p>instalar en ubuntu version 18 : sudo snap install hw-probe , en la versión 20 no hace falta snap</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_ejecucion_en_el_servidor_despacho">8.2.3. ejecucion en el servidor despacho</h4>
<div class="ulist">
<ul>
<li>
<p><a href="https://linux-hardware.org" class="bare">https://linux-hardware.org</a></p>
<div class="ulist">
<ul>
<li>
<p>Probe your computer&#8594; <a href="https://linux-hardware.org/?view=howto" class="bare">https://linux-hardware.org/?view=howto</a>  &#8594; sudo -E hw-probe -all -upload</p>
</li>
</ul>
</div>
</li>
<li>
<p>iee@fpgalab:~$ sudo -E hw-probe -all -upload</p>
<div class="listingblock">
<div class="content">
<pre>[sudo] password for iee:
2022/10/05 09:47:28.759430 cmd_run.go:1055: WARNING: cannot start document portal: write unix @-&gt;/run/user/1002/bus: write: broken pipe
mkdir: cannot create directory '/run/user/0': Permission denied
[error] cannot open locale definition file `en': No such file or directory

Probe for hardware ...
WARNING: Make sure 'block-devices' interface is connected to verify SMART attributes of your drives:

    sudo snap connect hw-probe:block-devices :block-devices
Ok
Reading logs ... Ok
Uploaded to DB, Thank you!

Probe URL: https://linux-hardware.org/?probe=7070bdd4fa</pre>
</div>
</div>
</li>
<li>
<p><a href="https://linux-hardware.org/?probe=7070bdd4fa" class="bare">https://linux-hardware.org/?probe=7070bdd4fa</a></p>
<div class="ulist">
<ul>
<li>
<p>click en el #7070bdd4fa de la frase: Probe #7070bdd4fa of Acer EQ35M Desktop Computer (Veriton T/M/S661_461)</p>
<div class="ulist">
<ul>
<li>
<p>Create a probe of your computer following this manual.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_id">8.2.4. ID</h4>
<div class="ulist">
<ul>
<li>
<p><a href="https://linux-hardware.org" class="bare">https://linux-hardware.org</a> &#8594; Find Computer &#8594; inventory &#8594; ?</p>
</li>
<li>
<p><a href="https://linux-hardware.org/?view=inventory" class="bare">https://linux-hardware.org/?view=inventory</a></p>
<div class="ulist">
<ul>
<li>
<p>hw-probe -generate-inventory -email <a href="mailto:candido@unavarra.es">candido@unavarra.es</a> &#8594; Inventory ID: LHW-ADED-174F-A7C8-07E2</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_ejecución_con_id">8.2.5. Ejecución con ID</h4>
<div class="ulist">
<ul>
<li>
<p>sudo -E hw-probe -all -upload -i LHW-ADED-174F-A7C8-07E2</p>
<div class="listingblock">
<div class="content">
<pre>2022/10/05 10:01:24.382019 cmd_run.go:1055: WARNING: cannot start document portal: write unix @-&gt;/run/user/1002/bus: write: broken pipe
mkdir: cannot create directory '/run/user/0': Permission denied
Probe for hardware ...
WARNING: Make sure 'block-devices' interface is connected to verify SMART attributes of your drives:

    sudo snap connect hw-probe:block-devices :block-devices
Ok
Reading logs ... Ok
Uploaded to DB, Thank you!

Probe URL: https://linux-hardware.org/?probe=764ef2b04d

WARNING: You'll get a letter soon to confirm new node.</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_your_computer_in_data_base_of_linux_hardware_org">8.2.6. Your computer in data base of linux-hardware.org</h4>
<div class="ulist">
<ul>
<li>
<p><a href="https://linux-hardware.org" class="bare">https://linux-hardware.org</a> &#8594; Find Computer &#8594; inventory ID &#8594; LHW-ADED-174F-A7C8-07E2</p>
<div class="ulist">
<ul>
<li>
<p>ERROR &#8594;    Please confirm new nodes. Check your Inbox. &#8594; esperar al correo</p>
</li>
</ul>
</div>
</li>
<li>
<p>correo</p>
<div class="listingblock">
<div class="content">
<pre>We've received a request to add a new node to your inventory ID --&gt; el NODE es mi PLATAFORMA probada
LHW-ADED-174F-A7C8-07E2. The node is identified as 'Acer EQ35M (Veriton
T/M/S661_461) with Intel Core 2 Quad CPU Q6600, Intel graphics, memory module(s)
4GB, one drive (WDC WD6400AAKS-22A7B0 640GB)' by probe
https://linux-hardware.org/?probe=764ef2b04d.

If it was you, please confirm this action by following the link:
https://linux-hardware.org/?confirm=93aeab29a143ddbd0c43a145e99684bb

Best wishes,
Linux Hardware Project Team</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>lo confirmo con el enlace del email &#8594; The node has been added to your inventory ID.</p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="https://linux-hardware.org" class="bare">https://linux-hardware.org</a> &#8594; Find Computer &#8594; inventory ID &#8594; LHW-ADED-174F-A7C8-07E2</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_listado_de_pruebas">8.2.7. listado de pruebas</h4>
<div class="ulist">
<ul>
<li>
<p>cada vez que ejecuto hw-probe se sube una nueva prueba a la base de datos de mi nodo</p>
</li>
<li>
<p><a href="https://linux-hardware.org" class="bare">https://linux-hardware.org</a> &#8594; Find Computer &#8594; inventory ID &#8594; LHW-ADED-174F-A7C8-07E2 &#8594; click en el nodo y sale el listado de las diferentes pruebas</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_descarga_de_la_prueba_en_el_ordenador">8.2.8. Descarga de la prueba en el ordenador</h4>
<div class="ulist">
<ul>
<li>
<p>lo descargo con wget pero esta ENCRIPTADO</p>
</li>
<li>
<p>wget -l=5 -r  -np -p -nd -np -k   <a href="https://linux-hardware.org/?probe=7070bdd4fa" class="bare">https://linux-hardware.org/?probe=7070bdd4fa</a></p>
<div class="ulist">
<ul>
<li>
<p>ERROR: HTTP request sent, awaiting response&#8230;&#8203; 403 Forbidden</p>
</li>
</ul>
</div>
</li>
<li>
<p>wget --user-agent="Mozilla" -l=5 -r  -np -p -nd -np -k   <a href="https://linux-hardware.org/?probe=7070bdd4fa" class="bare">https://linux-hardware.org/?probe=7070bdd4fa</a>
**</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_monitorización">8.2.9. Monitorización</h4>
<div class="ulist">
<ul>
<li>
<p>Requisito : haber pedido el  ID &#8594; haber subido mi probe a la base de datos &#8594; haber recibido el email con mi maquina (node)</p>
</li>
<li>
<p><a href="https://linux-hardware.org" class="bare">https://linux-hardware.org</a> &#8594; Find Computer &#8594; inventory ID &#8594; LHW-ADED-174F-A7C8-07E2</p>
<div class="ulist">
<ul>
<li>
<p>Status &#8594; UNKN &#8594; click monitoring</p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="https://linux-hardware.org/?view=monitoring" class="bare">https://linux-hardware.org/?view=monitoring</a> &#8594; sudo -E hw-probe -start -i INVENTORY_ID</p>
<div class="ulist">
<ul>
<li>
<p>+sudo -E hw-probe -start -i LHW-ADED-174F-A7C8-07E2</p>
</li>
</ul>
</div>
</li>
<li>
<p>realizan probes de forma automática (las 30 primeras gratuitas)</p>
</li>
<li>
<p>COBRAN <a href="https://linux-hardware.org/?view=order&amp;product=LHWM" class="bare">https://linux-hardware.org/?view=order&amp;product=LHWM</a></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_test">8.2.10. test</h4>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/linuxhw/hw-probe#operability" class="bare">https://github.com/linuxhw/hw-probe#operability</a></p>
</li>
<li>
<p>sudo -E hw-probe -all -check -upload &#8594; realiza una nueva "prueba"</p>
<div class="listingblock">
<div class="content">
<pre>Reading logs ... Ok
Check HDDs ... /dev/sda: Operation not permitted
Ok
Check CPU ... Ok
Uploaded to DB, Thank you!

Probe URL: https://linux-hardware.org/?probe=6a765c4673</pre>
</div>
</div>
</li>
<li>
<p>voy a mi ID LHW-ADED-174F-A7C8-07E2 &#8594; click &#8594; listado de pruebas</p>
<div class="ulist">
<ul>
<li>
<p>prueba 6a765c4673</p>
<div class="ulist">
<ul>
<li>
<p>voy al apartado TEST</p>
</li>
<li>
<p>ha realizado el test cpu y ha intentado el hard disk</p>
</li>
<li>
<p>Test: cpu_perf  &#8594; no se que hace este test ¿dd if=? no se interpretar esa velocidad de 367 MB/s&#8594; busco en googling: linux test cpu performance</p>
<div class="listingblock">
<div class="content">
<pre>Intel Core 2 Quad CPU Q6600 @ 2.40GHz
dd if=/dev/zero bs=1M count=512 | md5sum
512+0 records in
512+0 records out
536870912 bytes (537 MB, 512 MiB) copied, 1.46178 s, 367 MB/s</pre>
</div>
</div>
</li>
<li>
<p>el hardisk lo hago manualmente &#8594; sudo hdparm -t /dev/sda</p>
<div class="listingblock">
<div class="content">
<pre>/dev/sda:
 Timing buffered disk reads: 346 MB in  3.01 seconds = 114.96 MB/sec</pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_cpu">9. CPU</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_comandos_links">9.1. comandos, links</h3>
<div class="ulist">
<ul>
<li>
<p>listado</p>
<div class="listingblock">
<div class="content">
<pre>cpuid
sudo lshw -C cpu
inxi -Cxxx
sudo dmidecode -t processor
cat /proc/cpuinfo
lscpu</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_cpu_mode_operation">9.2. cpu mode operation</h3>
<div class="sect3">
<h4 id="_modes">9.2.1. modes</h4>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.tspi.at/2019/11/03/x86memmodels.html" class="bare">https://www.tspi.at/2019/11/03/x86memmodels.html</a></p>
</li>
<li>
<p><a href="https://www.tortall.net/projects/yasm/manual/html/arch-x86-modes.html" class="bare">https://www.tortall.net/projects/yasm/manual/html/arch-x86-modes.html</a></p>
<div class="ulist">
<ul>
<li>
<p>The 16-bit and 32-bit operating modes both allow for use of both 16-bit and 32-bit registers via <strong>instruction prefixes</strong></p>
</li>
</ul>
</div>
</li>
<li>
<p>book</p>
<div class="ulist">
<ul>
<li>
<p>X86 Operating Modes: Real Mode, Protected Mode, System Management Mode, Virtual 8086 Mode, Long Mode, Unreal Mode</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_protection_mode">9.2.2. protection mode</h4>
<div class="ulist">
<ul>
<li>
<p><a href="https://wiki.osdev.org/Protected_mode" class="bare">https://wiki.osdev.org/Protected_mode</a></p>
</li>
<li>
<p><a href="https://cs-people.bu.edu/golchin/teaching/cs350sp21/" class="bare">https://cs-people.bu.edu/golchin/teaching/cs350sp21/</a></p>
<div class="ulist">
<ul>
<li>
<p>memos-1: real mode mbr operating system</p>
</li>
<li>
<p>memos-2: protected mode operating system</p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="http://www.independent-software.com/operating-system-development.html" class="bare">http://www.independent-software.com/operating-system-development.html</a></p>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.independent-software.com/operating-system-development-jumping-to-protected-mode.html" class="bare">http://www.independent-software.com/operating-system-development-jumping-to-protected-mode.html</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>entering protected mode</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://wiki.osdev.org/Protected_mode" class="bare">https://wiki.osdev.org/Protected_mode</a></p>
</li>
<li>
<p><a href="https://www.codeproject.com/Articles/45788/The-Real-Protected-Long-mode-assembly-tutorial-for" class="bare">https://www.codeproject.com/Articles/45788/The-Real-Protected-Long-mode-assembly-tutorial-for</a></p>
</li>
<li>
<p><a href="https://en.wikibooks.org/wiki/X86_Assembly/Protected_Mode" class="bare">https://en.wikibooks.org/wiki/X86_Assembly/Protected_Mode</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_virtual_mode">9.2.3. virtual mode</h4>
<div class="ulist">
<ul>
<li>
<p>Virtual 8086 mode is a sub-mode of Protected mode. In short, Virtual 8086 mode is whereby the CPU (in protected mode) is running a "Emulated" 16bit Real Mode machine.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_long_mode">9.2.4. long mode</h4>
<div class="ulist">
<ul>
<li>
<p>64</p>
</li>
<li>
<p>entering long mode</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://wiki.osdev.org/Setting_Up_Long_Mode" class="bare">https://wiki.osdev.org/Setting_Up_Long_Mode</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_system_management_mode_ssm">9.2.5. system management mode SSM</h4>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.tspi.at/2019/11/03/x86memmodels.html" class="bare">https://www.tspi.at/2019/11/03/x86memmodels.html</a></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_rings">9.2.6. rings</h4>
<div class="ulist">
<ul>
<li>
<p><a href="https://wiki.osdev.org/Security#Rings" class="bare">https://wiki.osdev.org/Security#Rings</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_cpu_flags">9.3. CPU-flags</h3>
<div class="sect3">
<h4 id="_refs_2">9.3.1. Refs</h4>
<div class="ulist">
<ul>
<li>
<p><a href="https://git.kernel.org/cgit/linux/kernel/git/stable/linux-stable.git/tree/arch/x86/include/asm/cpufeature.h?id=refs/tags/v4.1.3" class="bare">https://git.kernel.org/cgit/linux/kernel/git/stable/linux-stable.git/tree/arch/x86/include/asm/cpufeature.h?id=refs/tags/v4.1.3</a></p>
</li>
<li>
<p><a href="http://unix.stackexchange.com/questions/43539/what-do-the-flags-in-proc-cpuinfo-mean" class="bare">http://unix.stackexchange.com/questions/43539/what-do-the-flags-in-proc-cpuinfo-mean</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_clock">9.4. Clock</h3>
<div class="ulist">
<ul>
<li>
<p><code>ls -l  /sys/devices/system/cpu/cpu0/cpufreq/</code></p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">affected_cpus     cpuinfo_max_freq            related_cpus                   scaling_cur_freq  scaling_max_freq  stats
bios_limit        cpuinfo_min_freq            scaling_available_frequencies  scaling_driver    scaling_min_freq
cpuinfo_cur_freq  cpuinfo_transition_latency  scaling_available_governors    scaling_governor  scaling_setspeed</code></pre>
</div>
</div>
</li>
<li>
<p><code>sudo cat   /sys/devices/system/cpu/cpu0/cpufreq/cpuinfo_cur_freq</code> &#8594; 800000  KHz</p>
</li>
<li>
<p><code>sudo cat   /sys/devices/system/cpu/cpu0/cpufreq/cpuinfo_max_freq</code> &#8594;  2501000 KHz</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Reloj Externo	: 100 MHZ</p>
</div>
<div class="paragraph">
<p>Reloj interno	: 100 x 25	: 2,5 GHz  &#8594; ciclo de instruccion</p>
</div>
<div class="paragraph">
<p>FSB		: 100 x 8	: 800 MHz  &#8594; Front Side Bus &#8594; Bus  CPU&#8592;&#8594;Chipset</p>
</div>
<div class="paragraph">
<p>System Bus?	: Bus de conexión CPU&#8592;&#8594;DRAM o mejor dicho Memory controller &#8592;&#8594; DRAM</p>
</div>
<div class="paragraph">
<p>Memory Bus?      : Bus de conexión de los distintos chips de la memoria.</p>
</div>
<div class="paragraph">
<p>Si el bus del sistema tiene la misma velocidad que el FSB, es decir 800 Mhz, un controlador de memoria DDR tendría un bus de sistema efectivo de 800x2 = 1600 MHz. Si es un DDR3 significa que el acceso a la macrocelda es la octava (2<sup>3</sup>) parte del bus del sistema, es decir, 100 MHz.</p>
</div>
<div class="paragraph">
<p>Internal frequency of microprocessors is usually based on Front Side Bus frequency.</p>
</div>
<div class="paragraph">
<p>To calculate internal frequency the CPU multiplies bus frequency by certain number, which is called clock multiplier.</p>
</div>
<div class="paragraph">
<p>It&#8217;s important to note that for calculation the CPU uses actual bus frequency, and not effective bus frequency.</p>
</div>
<div class="paragraph">
<p>To determine actual actual bus frequency for processors that use dual-data rate buses (AMD Athlon and Duron) and quad-data rate buses (all Intel microprocessors starting from Pentium 4) the effective bus speed should be divided by 2 for AMD or 4 for Intel.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.directron.com/fsbguide.html" class="bare">http://www.directron.com/fsbguide.html</a></p>
</li>
<li>
<p><a href="http://en.wikipedia.org/wiki/Front-side_bus" class="bare">http://en.wikipedia.org/wiki/Front-side_bus</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_cpu_microarchitecture">10. CPU Microarchitecture</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_referencias_2">10.1. Referencias</h3>
<div class="ulist">
<ul>
<li>
<p>más info de la microarquitectura</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.agner.org/optimize/" class="bare">https://www.agner.org/optimize/</a> &#8594; The microarchitecture of Intel, AMD and VIA CPUs: An optimization guide for assembly programmers and compiler makers &#8594; Topics include: Out-of-order execution, register renaming, pipeline structure, execution unit organization and branch prediction algorithms for each type of microprocessor. Describes many details that cannot be found in manuals from microprocessor vendors or anywhere else.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_intel_info">10.2. Intel Info</h3>
<div class="ulist">
<ul>
<li>
<p><a href="http://download.intel.com/pressroom/kits/IntelProcessorHistory.pdf">Intel Historia</a></p>
</li>
<li>
<p><a href="http://www.intel.com/pressroom/kits/quickreffam.htm">CPU anteriores a Diciembre 2008</a></p>
</li>
<li>
<p><a href="http://ark.intel.com/">Intel ARK (Automated Relational Knowledgebase)</a>: base de datos de  TODOS los productos de Intel</p>
</li>
<li>
<p><a href="http://software.intel.com/en-us/articles/intel-64-architecture-processor-topology-enumeration/">intel cpu topology</a></p>
</li>
<li>
<p><a href="http://en.wikipedia.org/wiki/List_of_Intel_CPU_microarchitectures">list wikipedia</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_shell_info">10.3. Shell Info</h3>
<div class="sect3">
<h4 id="_tools">10.3.1. Tools</h4>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh"><span class="nv">$cpuid</span>
<span class="nv">$cat</span> /proc/cpuinfo
<span class="nv">$lscpu</span>
<span class="nv">$sudo</span> lshw <span class="nt">-X</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cpuid">10.3.2. cpuid</h4>
<div class="ulist">
<ul>
<li>
<p><a href="https://en.wikipedia.org/wiki/CPUID" class="bare">https://en.wikipedia.org/wiki/CPUID</a></p>
</li>
<li>
<p><a href="http://support.amd.com/TechDocs/25481.pdf">amd</a></p>
</li>
<li>
<p><a href="http://www.intel.com/design/pentiumiii/applnots/24512501.pdf">intel 1999</a></p>
</li>
<li>
<p><a href="http://bochs.sourceforge.net/techspec/24161821.pdf">intel 2002</a></p>
</li>
<li>
<p><a href="http://www.microbe.cz/docs/CPUID.pdf">intel 2009</a></p>
</li>
<li>
<p><a href="https://www.scss.tcd.ie/Jeremy.Jones/CS4021/processor-identification-cpuid-instruction-note.pdf">intel 2012</a></p>
</li>
<li>
<p><a href="https://software.intel.com/en-us/articles/intel-architecture-and-processor-identification-with-cpuid-model-and-family-numbers?language=ru&amp;wapkw=cpuid">intel microarchitecture map</a>: <strong>RECOMENDADO</strong></p>
<div class="ulist">
<ul>
<li>
<p>observo que la familia 6 abarca: pentium, core,xeon, celeron, etc &#8230;&#8203;</p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="http://www.intel.com/content/www/us/en/architecture-and-technology/64-ia-32-architectures-software-developer-vol-2a-manual.html">intel 2015</a>: La info de cpuid está ACTUALMENTE en el manual Vol 2A.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_flags">10.3.3. flags</h4>
<div class="ulist">
<ul>
<li>
<p>flags : lm &#8594; long mode</p>
<div class="ulist">
<ul>
<li>
<p>rm :real mode: 16 bit processor</p>
</li>
<li>
<p>tm : transparent mode : 32 bit processor</p>
</li>
<li>
<p>lm : long mode : 64 bit processor</p>
</li>
<li>
<p><code>cat /usr/include/asm/processor-flags.h | more</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_web_info">10.4. Web Info</h3>
<div class="sect3">
<h4 id="_características_core_i5">10.4.1. Características core i5</h4>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.cpu-world.com/CPUs/Core_i5/Intel-Core%20i5%20Mobile%20I5-2520M%20FF8062700840017%20%28BX80627I52520M%29.html">cpu-world</a></p>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.cpu-world.com/info/id/Intel-modern-identification.html#Core_i7_and_Xeon_CPUs">Modern Intel OEM CPUs identification</a></p>
</li>
<li>
<p><a href="http://www.cpu-world.com/CPUs/Core_i5/TYPE-Core%20i5%20Mobile.html" class="bare">http://www.cpu-world.com/CPUs/Core_i5/TYPE-Core%20i5%20Mobile.html</a></p>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.cpu-world.com/info/Intel/Intel_Core_i5_Mobile.html" class="bare">http://www.cpu-world.com/info/Intel/Intel_Core_i5_Mobile.html</a></p>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.cpu-world.com/CPUs/Core_i5/Intel-Core%20i5%20Mobile%20I5-2520M%20AV8062700844214.html" class="bare">http://www.cpu-world.com/CPUs/Core_i5/Intel-Core%20i5%20Mobile%20I5-2520M%20AV8062700844214.html</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_comparativas_cpu">10.5. Comparativas CPU</h3>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.notebookcheck.net/Intel-Core-i5-2520M-Notebook-Processor.40103.0.html" class="bare">http://www.notebookcheck.net/Intel-Core-i5-2520M-Notebook-Processor.40103.0.html</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_code_names">10.6. Code Names</h3>
<div class="ulist">
<ul>
<li>
<p>Los productos suelen tener además del Code Number (Número codificador) un Code Name (Nombre codificador) que facilita identificar el producto en documentos de texto como manuales, etc.</p>
</li>
<li>
<p>Hay codenames en productos de computación de diferentes empresas: <a href="http://en.wikipedia.org/wiki/List_of_computer_technology_code_names" class="bare">http://en.wikipedia.org/wiki/List_of_computer_technology_code_names</a></p>
</li>
<li>
<p>Intel tiene codenames  para distintos productos como:</p>
<div class="ulist">
<ul>
<li>
<p><a href="http://en.wikipedia.org/wiki/List_of_Intel_codenames">wikipedia intel Code Names</a>:</p>
</li>
<li>
<p>microarquitectura</p>
</li>
<li>
<p>procesador</p>
</li>
<li>
<p>chipset</p>
</li>
<li>
<p>placa base <a href="http://en.wikipedia.org/wiki/Penryn_%28microprocessor%29" class="bare">http://en.wikipedia.org/wiki/Penryn_%28microprocessor%29</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_microarchitecture_code_name">10.7. Microarchitecture Code Name</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://software.intel.com/en-us/articles/intel-architecture-and-processor-identification-with-cpuid-model-and-family-numbers?language=ru&amp;wapkw=cpuid">cpuid</a></p>
</li>
<li>
<p><a href="http://ark.intel.com/#codenames/">Procesor Intel code names</a></p>
</li>
<li>
<p><a href="http://www.intel.com/content/www/us/en/processors/processor-numbers.html">processor number</a>: <strong>recomendado</strong></p>
</li>
<li>
<p><a href="http://www.cpu-world.com/CPUs/" class="bare">http://www.cpu-world.com/CPUs/</a>: Base de datos de CPUS</p>
</li>
<li>
<p>Los codenames se utilizan para tanto para designar el nombre de un núcleo como para una tecnología en nm. Sandy Bridge is the codename for both the Intel microarchitecture innovation following Nehalem and generally for the associated family of 32nm processors based upon that microarchitecture.</p>
</li>
<li>
<p>La lista que viene a continuación utiliza los codenames de microarquitecturas Desktop. Habrá variantes de codenames para microarquitecturas mobile o embedded o server tendrán otros nombres. Por ejemplo la microcarquitectura Woldfale para equipos Desktop tiene su equivalente para Moviles con el nombre <a href="http://en.wikipedia.org/wiki/Penryn_%28microprocessor%29">Penryn</a> y para Servidores con el nombre Wodlfale-DP</p>
</li>
<li>
<p>no x86</p>
<div class="ulist">
<ul>
<li>
<p>8 bits size</p>
</li>
<li>
<p>8080</p>
</li>
</ul>
</div>
</li>
<li>
<p>P1</p>
<div class="ulist">
<ul>
<li>
<p>1ª Generación de los x86</p>
</li>
<li>
<p>1978</p>
</li>
<li>
<p>16 bits size</p>
</li>
<li>
<p>8086</p>
</li>
</ul>
</div>
</li>
<li>
<p>P2</p>
<div class="ulist">
<ul>
<li>
<p>2ª Generación de los x86</p>
</li>
<li>
<p>1982</p>
</li>
<li>
<p>80286</p>
</li>
</ul>
</div>
</li>
<li>
<p>P3</p>
<div class="ulist">
<ul>
<li>
<p>3ª Generación de los x86</p>
</li>
<li>
<p>1985</p>
</li>
<li>
<p>80386</p>
</li>
<li>
<p>First 32 bits size</p>
</li>
<li>
<p>Cache: L2</p>
</li>
</ul>
</div>
</li>
<li>
<p>P4</p>
<div class="ulist">
<ul>
<li>
<p>4ª Generación de los x86</p>
</li>
<li>
<p>1989</p>
</li>
<li>
<p>80486</p>
</li>
<li>
<p>First Pipelined</p>
</li>
<li>
<p>Cache: L1, L2</p>
</li>
<li>
<p>FPU on chip</p>
</li>
<li>
<p>Bus Interfaz Unit</p>
</li>
</ul>
</div>
</li>
<li>
<p>P5</p>
<div class="ulist">
<ul>
<li>
<p>5ª Generación de los x86</p>
</li>
<li>
<p>1993</p>
</li>
<li>
<p>pentium</p>
</li>
</ul>
</div>
</li>
<li>
<p>P6 Microarchitecture :</p>
<div class="ulist">
<ul>
<li>
<p>6ª generación de los x86</p>
</li>
<li>
<p>1995</p>
</li>
<li>
<p>processor: Pentium Pro</p>
</li>
<li>
<p>En mi Lenovo ejecuto <code>cpuid</code>  &#8594;  Family 6 : La familia 6 abarca: Pentium, Core, Xeon, Celeron -&#8594; <a href="https://software.intel.com/en-us/articles/intel-architecture-and-processor-identification-with-cpuid-model-and-family-numbers?language=ru&amp;wapkw=cpuid" class="bare">https://software.intel.com/en-us/articles/intel-architecture-and-processor-identification-with-cpuid-model-and-family-numbers?language=ru&amp;wapkw=cpuid</a></p>
</li>
<li>
<p>Intel Dual Duo es un microprocesador de sexta generación lanzado en enero del 2006 por Intel</p>
</li>
<li>
<p>La marca Intel Core 2 , año 2006, se refiere a una gama de CPU comerciales de Intel de 64 bits de doble núcleo y CPU 2x2 MCM (Módulo Multi-Chip) de cuatro núcleos con el conjunto de instrucciones x86-64, basado en el Core microarchitecture de Intel.</p>
</li>
</ul>
</div>
</li>
<li>
<p>P7 Microarchitecture</p>
<div class="ulist">
<ul>
<li>
<p>El Pentium 4 fue una línea de microprocesadores de séptima generación basado en la arquitectura x86 y fabricado por Intel</p>
</li>
<li>
<p>Fue lanzado el 20 de noviembre de 2000.</p>
</li>
<li>
<p>En 2004, se agregó el conjunto de instrucciones x86-64 de 64 bits al tradicional set x86 de 32 bits</p>
</li>
<li>
<p>El 8 de agosto de 2008 se realiza el último envío de Pentium 4, siendo sustituido por los Intel Core Duo.</p>
</li>
</ul>
</div>
</li>
<li>
<p>P8 Microarquitecture</p>
<div class="ulist">
<ul>
<li>
<p>2001: Intel Itanium &#8594; fracaso comercial</p>
</li>
</ul>
</div>
</li>
<li>
<p>Generación Core</p>
<div class="ulist">
<ul>
<li>
<p>Año 2006</p>
</li>
<li>
<p>Son los microprocesadores multinúcleo</p>
</li>
<li>
<p>Core fue el nombre de una microarquitectura y ahora es un brand comercial que significa multinúcleo.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Nombres para cpu utilizados por linux</p>
<div class="ulist">
<ul>
<li>
<p><em>i286,i386,i486,i586,i686</em> son especificaciones de la arquitectura x86 a la que le corresponde la IA32.</p>
</li>
<li>
<p>No hay de momento subdivisiones para la arquitectura x86-84 pero  linux  denomina a la cpu como <em>amd64</em>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Primer procesador dee 64 bits</p>
<div class="ulist">
<ul>
<li>
<p>2001: Intel Itanium &#8594; fracaso comercial</p>
</li>
<li>
<p>2003: AMD sacó a la luz sus líneas de procesadores con arquitectura AMD64 Opteron y Athlon 64</p>
</li>
<li>
<p>2004: Se lanzaron versiones actualizadas de sus familias de procesadores Xeon y Pentium 4</p>
</li>
</ul>
</div>
</li>
<li>
<p>NetBurst:</p>
<div class="ulist">
<ul>
<li>
<p>Willamette core :  Pentium 4 brand processor.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Core : Q1 2006</p>
<div class="ulist">
<ul>
<li>
<p>Conroe : 65nm</p>
</li>
<li>
<p>Wolfdale: 45nm</p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="http://en.wikipedia.org/wiki/Nehalem_%28microarchitecture%29">Nehalem</a>:</p>
<div class="ulist">
<ul>
<li>
<p>45 nm</p>
</li>
<li>
<p>primera generación de los iCORE</p>
</li>
<li>
<p>integra en la CPU el/los controlador de memoria</p>
</li>
<li>
<p>Procesador Beckton</p>
</li>
<li>
<p>Bloomfield</p>
</li>
<li>
<p>Gainestown</p>
</li>
<li>
<p>Clarksfield</p>
</li>
<li>
<p>Westmere: 32 nm</p>
</li>
</ul>
</div>
</li>
<li>
<p>Sandy Brige: 32 nm  Enero 2011 -&#8594; Chipset 6 Series: Cougar Point codename</p>
<div class="ulist">
<ul>
<li>
<p>Ivy Bridge: 22 nm -&#8594; Chipset 7 Series:Panther Point codename</p>
</li>
</ul>
</div>
</li>
<li>
<p>Haswell: 22 nm -&#8594; Chipset 8 Series: Lynx Point codename</p>
<div class="ulist">
<ul>
<li>
<p>El primer procesador se ha llamado Haswell</p>
</li>
<li>
<p>Los siguientes de a microarquitectura Haswell se llamarán BroadWell(14nm), Skylake(14nm), Cannonlake(10nm), xxxx(10nm)</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="960px-IntelProcessorRoadmap-3.svg.png" alt="intel core roadmap">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_sandy_bridge">10.8. Sandy Bridge</h3>
<div class="sect3">
<h4 id="_introduccion">10.8.1. Introduccion</h4>
<div class="ulist">
<ul>
<li>
<p><a href="http://en.wikipedia.org/wiki/Sandy_Bridge_%28microarchitecture%29">Sandy Bridge</a></p>
<div class="ulist">
<ul>
<li>
<p>segunda generación de los iCORE</p>
</li>
<li>
<p>integra en la CPU el/los controlador de memoria y procesador de video.</p>
</li>
<li>
<p>Sandy Bridge is the codename for a microarchitecture developed by Intel beginning in 2005 for central processing units in computers to replace the Nehalem microarchitecture. Intel demonstrated a Sandy Bridge processor in 2009, and released first products based on the architecture in January 2011 under the <strong>Core</strong> brand. Aquí tenemos la líada de que Core era el nombre de una microarquitectura y ahora dice que es un brand, no es un brand, sino que comercialmente interesa utilizarlo. Yo creo que la microarquitectura core ya no se fabrica y únicamente significa <strong>multinúcleo</strong>, a no ser que pongamos el brand <em>solo core</em>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_referencia">10.8.2. Referencia</h4>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.techspot.com/review/353-intel-sandy-bridge-corei5-2500k-corei7-2600k/page2.html">techspot</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_generaciones">10.9. Generaciones</h3>
<div class="ulist">
<ul>
<li>
<p>Observamos que dentro del mismo producto hay <strong>Generaciones</strong></p>
<div class="ulist">
<ul>
<li>
<p><a href="http://ark.intel.com/#codenames/" class="bare">http://ark.intel.com/#codenames/</a>: ARK home &#8594; Mobile Products &#8594; Processors: core ix tiene 4 generaciones</p>
</li>
<li>
<p>El <em>Core i5-2520M</em> es de la segunda generación</p>
</li>
<li>
<p>En noviembre del 2013 estamos en la 4 generación de los procesadores multinúcleo que se denominan genéricamente como Core:</p>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.intel.com/content/dam/www/public/us/en/documents/product-briefs/4th-gen-core-family-mobile-brief.pdf">4ª generación</a>: microarquitectura Haswell.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_filosofía_tick_tock_de_intel">10.10. Filosofía tick-tock de Intel</h3>
<div class="ulist">
<ul>
<li>
<p><a href="http://en.wikipedia.org/wiki/Intel_Tick-Tock">tick tock</a> Relación entre microarquitecturas y brands. Expandir Wikipedia con el botón Show.</p>
<div class="ulist">
<ul>
<li>
<p><a href="http://en.wikipedia.org/wiki/Core_(microarchitecture)">Core</a></p>
</li>
<li>
<p>"Tick-Tock" is a model adopted by chip manufacturer Intel Corporation since 2007 to follow every microarchitectural change with a die shrink of the process technology. Every "tick" is a <em>shrinking</em> of process technology of the previous microarchitecture (and sometimes introducing new instructions as with Broadwell) and every "tock" is a new <em>microarchitecture</em>. Every year to 18 months, there is expected to be one tick or tock.[1]</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_branding_names">10.11. Branding Names</h3>
<div class="ulist">
<ul>
<li>
<p>La aplicación de un procesador a distintos sectores hace que surjan distintas <strong>Brands</strong> especializandose unos en workstation, otros en servers, etc &#8230;&#8203;. Por ejemplo Xeon es una rama (brand) de servers y workstations.</p>
</li>
<li>
<p>Van dirigidos a un tipo de usuario o segmento del <strong>mercado</strong> o MARKET: domestico, profesional, server, etc</p>
</li>
<li>
<p>Con una microarchitecture se pueden fabricar distintas CPUs dependiendo de la máquina a construir: server, workstation, desktop, laptop, mobile, etc&#8230;&#8203;. Distinta CPU puede significar distinto: NUCLEO, CACHE, LITOGRAFIA, ETC</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_roadmap">10.11.1. RoadMap</h4>
<div class="ulist">
<ul>
<li>
<p><a href="http://en.wikipedia.org/wiki/Intel_Tick-Tock:">tick tock</a> Relación entre microarquitecturas y brands. Expandir Wikipedia con el botón Show.</p>
</li>
<li>
<p>Para leer más sobre los nombres de Intel &#8594; <a href="http://en.wikipedia.org/wiki/Intel#Naming_strategy" class="bare">http://en.wikipedia.org/wiki/Intel#Naming_strategy</a></p>
</li>
<li>
<p><a href="http://www.cpu-world.com/CPUs/" class="bare">http://www.cpu-world.com/CPUs/</a>: Base de datos de CPUS</p>
</li>
<li>
<p>Brand names:</p>
<div class="ulist">
<ul>
<li>
<p>Core</p>
</li>
<li>
<p>Pentium dual core</p>
</li>
<li>
<p>Celeron : low cost</p>
</li>
<li>
<p>Xeon : server, workstation</p>
</li>
<li>
<p>Atom</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_core">10.11.2. Core</h4>
<div class="ulist">
<ul>
<li>
<p><strong>Brands Names</strong> :</p>
<div class="ulist">
<ul>
<li>
<p><a href="http://en.wikipedia.org/wiki/Core_(microarchitecture)">Core</a></p>
</li>
<li>
<p><a href="http://en.wikipedia.org/wiki/Intel_Core">Core</a></p>
</li>
<li>
<p>Core 2</p>
</li>
<li>
<p>iCore:</p>
<div class="ulist">
<ul>
<li>
<p>Core i3 : gama baja</p>
</li>
<li>
<p>Core i5 : gama media</p>
</li>
<li>
<p>Core i7 : gama alta</p>
</li>
<li>
<p>Core i9 : gama ¿?</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>El brand name no es específico de una microarchitecture. Tenemos Xeon tanto en Core como en Nehalem, Sandy Bridge.</p>
</li>
<li>
<p>Por ejemplo el listado de las CPU del brand  <a href="http://www.intel.com/support/processors/mobile/corei5/sb/CS-031172.htm">mobile icore5</a></p>
</li>
<li>
<p>A su vez dentro de un brand <strong>multi-núcleo</strong> tenemos distintas tecnologías:</p>
<div class="ulist">
<ul>
<li>
<p>Dual core     : doble núcleo</p>
</li>
<li>
<p>Extreme core : doble o cuádruple</p>
</li>
<li>
<p>Quad core   : cuádruple núcleo</p>
</li>
</ul>
</div>
</li>
<li>
<p>El término <em>Core</em> es muy <strong>confuso</strong> ya que se emplea para índicar:</p>
<div class="ulist">
<ul>
<li>
<p>Núcleo: es decir el núcleo físico de procesamiento.</p>
</li>
<li>
<p>Brand de micros de intel con la microarquitectura Core: Dual Core, core i3, core i5.</p>
</li>
<li>
<p>Nombre del producto: Core Duo</p>
</li>
<li>
<p><strong>Mainstream Core-based processors</strong>, es decir la microarquitectura Core, are branded <em>Pentium Dual-Core</em> or <em>Pentium</em> and low end branded <em>Celeron</em>; server and workstation Core-based processors are branded <em>Xeon</em>, while desktop and mobile Core-based processors are branded as Core 2.</p>
</li>
<li>
<p>OJO: Despite their names, processors sold as <em>Core Solo/Core Duo</em> and <em>Core i3/i5/i7</em> do NOT actually use the Core microarchitecture and are based on the Enhanced Pentium M and newer Nehalem/Sandy Bridge/Haswell <em>microarchitectures</em>, respectively.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Por lo que el <strong>Lenovo</strong> que tiene un <em>Intel Core i5 de 2ª generación</em> tiene la microarquitectura con code-name <em>Sandy Bridge</em> y el brand name sería core i5.</p>
<div class="ulist">
<ul>
<li>
<p>Hoy en día, que la microarquitectura core ya no se fabrica, core significa multinúcleo.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_otros">10.11.3. Otros</h4>
<div class="ulist">
<ul>
<li>
<p>El nombre de mercado <em>CENTRINO</em> en el logo del portátil hace referencia a ordenadores que incorporan chipset para WIFI Y WIMAX: Ref <a href="http://en.wikipedia.org/wiki/Centrino">Centrino Wireless</a></p>
</li>
<li>
<p><a href="http://www.cpu-world.com/CPUs/Pentium/Intel-Pentium%20J2900.html">Pentium J2900</a>: Q4-2013</p>
<div class="ulist">
<ul>
<li>
<p>Pentium es un brand comercial que ha evolucionado hasta hoy en día (año 2014). Es de gama baja. El ejemplo de la CPU Pentium J2900 vemos que cuesta 94$ y se corresponde a la microarquitectura Silvermont. La microarquitectura Silvermont surgió de los procesadores embbedded del brand Atom de 3ª generación. Es decir, se ha adaptado la microarquitectura del brand Atom al brand Pentium.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_atom">10.11.4. Atom</h4>
<div class="ulist">
<ul>
<li>
<p><a href="http://en.wikipedia.org/wiki/Intel_Tick-Tock:">tick tock</a> Relación entre microarquitecturas y brands. Expandir Wikipedia con el botón Show para ver las microarquitecturas del Brand Atom.</p>
</li>
<li>
<p>El brand atom no es exclusivo de los embedded y moviles. Ver en <a href="http://ark.intel.com/#codenames/">intel codenames</a> la familia <a href="http://ark.intel.com/products/family/29035/Intel-Atom-Processor/desktop" class="bare">http://ark.intel.com/products/family/29035/Intel-Atom-Processor/desktop</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_microcode">10.12. Microcode</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://gms.tf/check-cpu-microcode-version-on-linux.html" class="bare">https://gms.tf/check-cpu-microcode-version-on-linux.html</a></p>
</li>
<li>
<p><code>grep <em>stepping\|model\|microcode</em> /proc/cpuinfo</code></p>
</li>
<li>
<p>Investigate whether the microcode was loaded by the BIOS or by the kernel:</p>
<div class="ulist">
<ul>
<li>
<p><code>journalctl --no-hostname -o short-monotonic --boot -0 \
| sed -n <em>1,/PM: Preparing system for sleep/p</em> | grep <em>microcode\|smp</em></code></p>
<div class="listingblock">
<div class="content">
<pre>[    0.000000] kernel: microcode: microcode updated early to revision 0xf0, date = 2021-11-12
[    0.043955] kernel: smpboot: Allowing 4 CPUs, 0 hotplug CPUs
[    0.119891] kernel: smpboot: CPU0: Intel(R) Core(TM) i5-6300U CPU @ 2.40GHz (family: 0x6, model: 0x4e, stepping: 0x3)
[    0.120799] kernel: smp: Bringing up secondary CPUs ...
[    0.124257] kernel: smp: Brought up 1 node, 4 CPUs
[    0.124257] kernel: smpboot: Max logical packages: 1
[    0.124257] kernel: smpboot: Total of 4 processors activated (19999.61 BogoMIPS)
[    0.677289] kernel: microcode: sig=0x406e3, pf=0x80, revision=0xf0
[    0.677363] kernel: microcode: Microcode Update Driver: v2.2.</pre>
</div>
</div>
</li>
<li>
<p>"[    0.000000] kernel: microcode: microcode updated early to revision <strong>0xf0</strong>, date = 2021-11-12" significa que el kernel ha actualizado el microcódigo pero la BIOS no ha actualizado el microcódigo. La imagen del microcódigo en la BIOS está sin actualizar.</p>
</li>
<li>
<p><code>zgrep "microcode updated early to" /var/log/kern.log*</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>La versión 0xF0 la ha actualizado el kernel pero es la última versión?</p>
</li>
<li>
<p>¿ Como actualizar la BIOS desde Linux? &#8594; bios update</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.cyberciti.biz/faq/update-lenovo-bios-from-linux-usb-stick-pen/" class="bare">https://www.cyberciti.biz/faq/update-lenovo-bios-from-linux-usb-stick-pen/</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Common Vulnerabilities and Exposures CVE</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://access.redhat.com/articles/6716541" class="bare">https://access.redhat.com/articles/6716541</a> &#8594; se publica que el microcódigo de core i5-6300U tiene una vulnerabilidad</p>
</li>
<li>
<p>apartado Intel Microcode Updates That Mitigate The Issues</p>
<div class="listingblock">
<div class="content">
<pre>Model No. (dec)	Stepping (dec)	Minimum microcode rev for mitigation (dec)	Applicable vulne and errata	  Codename
0x4e (78)	0x03 (3)	0xec (236)¹	                                CVE-2021-0127, RAPL Filter Switch Skylake U

Model Name
Intel® Core™ Processor i5-6200U</pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>La versión de microcode mínima que soluciona el problema es la versión 0xEC y yo tengo la 0xF0</p>
</li>
<li>
<p><a href="https://github.com/intel/Intel-Linux-Processor-Microcode-Data-Files" class="bare">https://github.com/intel/Intel-Linux-Processor-Microcode-Data-Files</a></p>
<div class="ulist">
<ul>
<li>
<p><code>sudo cat  /sys/devices/system/cpu/microcode/reload</code></p>
</li>
<li>
<p><code>cpuid | grep -i serial</code> &#8594; processor serial number &#8594; 0004-06E3-0000-0000-0000-0000</p>
</li>
<li>
<p>extendedfamily+family:0x06</p>
</li>
<li>
<p>extended model+model :0x4E &#8594; 78</p>
</li>
<li>
<p>stepping:0x3</p>
<div class="ulist">
<ul>
<li>
<p>microcode file name : family-model-stepping &#8594; <strong>06-4e-03</strong> &#8594; este el el original? cambia de nombre al actualizarse?</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><a href="https://wiki.debian.org/Microcode" class="bare">https://wiki.debian.org/Microcode</a></p>
</li>
</ul>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
before you install the microcode update packages in a computer for the first time, it is recommended that you check your system&#8217;s vendor support site for BIOS/UEFI updates for your system and apply those. By ensuring the computer&#8217;s BIOS/UEFI is up-to-date, you will reduce the chances of problems with the microcode update (which are very low, but not zero) and also fix other firmware bugs unrelated to microcode.
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>RECOMIENDA actualizar la bios antes que el microcode</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.intel.com/content/www/us/en/developer/articles/technical/software-security-guidance/best-practices/microcode-update-guidance.html" class="bare">https://www.intel.com/content/www/us/en/developer/articles/technical/software-security-guidance/best-practices/microcode-update-guidance.html</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>explica como el firmware se carga en memoria volatil cada vez que se arranca ¿?</p>
</li>
<li>
<p><code>ls -l /lib/firmware/intel-ucode/06-4e-03</code></p>
</li>
<li>
<p><code>od -t x4  /lib/firmware/intel-ucode/06-4e-03 | more</code></p>
<div class="ulist">
<ul>
<li>
<p>cabecera del firmware</p>
<div class="listingblock">
<div class="content">
<pre>0000000 00000001 000000f0 11122021 000406e3</pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>version: 000000f0</p>
</li>
<li>
<p>creation date: 11122021 &#8594; 11/12/22021</p>
</li>
<li>
<p>family/model/stepping in the format returned by the CPUID instruction: 000406e3 &#8594; coincide con processor serial number</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.intel.com/content/www/us/en/developer/articles/technical/software-security-guidance/secure-coding/loading-microcode-os.html" class="bare">https://www.intel.com/content/www/us/en/developer/articles/technical/software-security-guidance/secure-coding/loading-microcode-os.html</a></p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="https://github.com/intel/Intel-Linux-Processor-Microcode-Data-Files/blob/main/intel-ucode/06-4e-03" class="bare">https://github.com/intel/Intel-Linux-Processor-Microcode-Data-Files/blob/main/intel-ucode/06-4e-03</a></p>
</li>
<li>
<p>06-4e-03 &#8594; actualizado hace 6 meses</p>
<div class="ulist">
<ul>
<li>
<p>lo descargo por curiosidad</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>od -t x4 06-4e-03 | more</code></p>
<div class="ulist">
<ul>
<li>
<p>cabecera</p>
<div class="listingblock">
<div class="content">
<pre>0000000 00000001 000000f0 11122021 000406e3</pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><strong>idéntico</strong> al que tengo en /lib/firmware/intel-ucode/06-4e-03</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_memory_2">11. Memory</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Tengo un controlador de memoria con 2 canales. Cada canal admite un módulo SO-DIMM.</p>
</li>
<li>
<p>Sólo tengo una placa en el canal A de 8GiB, es decir 256Megas de palabras de 64 bits. El canal B esta libre</p>
</li>
<li>
<p>En la web que informa sobre la cpu dice que la capacidad máxima es hasta 16GiB, es decir, podría utilizar el otro canal.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c"><span class="err">$</span> <span class="n">cat</span> <span class="o">/</span><span class="n">proc</span><span class="o">/</span><span class="n">meminfo</span>
<span class="err">$</span> <span class="n">getconf</span> <span class="n">LEVEL1_DCACHE_LINESIZE</span>   <span class="p">;</span> <span class="n">line</span> <span class="n">size</span> <span class="n">es</span> <span class="n">el</span> <span class="n">tama</span><span class="err">ñ</span><span class="n">o</span> <span class="n">en</span> <span class="n">BYTES</span> <span class="n">del</span> <span class="n">chunk</span> <span class="n">de</span> <span class="n">datos</span> <span class="p">(</span><span class="mi">128</span> <span class="n">bytes</span> <span class="n">por</span> <span class="n">ejemplo</span><span class="p">)</span> <span class="n">que</span> <span class="n">se</span> <span class="n">carga</span> <span class="n">en</span> <span class="n">la</span> <span class="n">cache</span> <span class="n">despues</span> <span class="n">de</span> <span class="n">un</span> <span class="n">fracaso</span> <span class="p">(</span><span class="n">miss</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>La cache tiene líneas de 64 bytes.</p>
</div>
<div class="paragraph">
<p>La alineación de las líneas de la caché significa cual es la dirección de comienzo de la caché. Alineación de 64 bytes significa que las líneas comienzan en direcciones múltiplos de 64 &#8594; 2<sup>6</sup> &#8594; 0100_0000, 1000_0000, 1100_0000, 1_0000_0000 &#8594;0x40,0x80,0xc0,0x100 &#8594; estas direcciones apuntan a los bytes donde empiezan las líneas.</p>
</div>
<div class="paragraph">
<p>Información completa de la <strong>cache</strong> en</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c"><span class="n">candido</span><span class="err">@</span><span class="n">lur</span><span class="o">:~</span><span class="err">$</span> <span class="n">ls</span> <span class="o">-</span><span class="n">l</span> <span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">devices</span><span class="o">/</span><span class="n">system</span><span class="o">/</span><span class="n">cpu</span><span class="o">/</span><span class="n">cpu0</span><span class="o">/</span><span class="n">cache</span><span class="o">/</span>
<span class="n">total</span> <span class="mi">0</span>
<span class="n">drwxr</span><span class="o">-</span><span class="n">xr</span><span class="o">-</span><span class="n">x</span> <span class="mi">2</span> <span class="n">root</span> <span class="n">root</span> <span class="mi">0</span> <span class="n">Nov</span> <span class="mi">24</span> <span class="mo">00</span><span class="o">:</span><span class="mo">01</span> <span class="n">index0</span>
<span class="n">drwxr</span><span class="o">-</span><span class="n">xr</span><span class="o">-</span><span class="n">x</span> <span class="mi">2</span> <span class="n">root</span> <span class="n">root</span> <span class="mi">0</span> <span class="n">Nov</span> <span class="mi">23</span> <span class="mi">21</span><span class="o">:</span><span class="mi">31</span> <span class="n">index1</span>
<span class="n">drwxr</span><span class="o">-</span><span class="n">xr</span><span class="o">-</span><span class="n">x</span> <span class="mi">2</span> <span class="n">root</span> <span class="n">root</span> <span class="mi">0</span> <span class="n">Nov</span> <span class="mi">23</span> <span class="mi">21</span><span class="o">:</span><span class="mi">31</span> <span class="n">index2</span>
<span class="n">drwxr</span><span class="o">-</span><span class="n">xr</span><span class="o">-</span><span class="n">x</span> <span class="mi">2</span> <span class="n">root</span> <span class="n">root</span> <span class="mi">0</span> <span class="n">Nov</span> <span class="mi">24</span> <span class="mo">00</span><span class="o">:</span><span class="mo">01</span> <span class="n">index3</span>
<span class="n">candido</span><span class="err">@</span><span class="n">lur</span><span class="o">:~</span><span class="err">$</span> <span class="n">ls</span> <span class="o">-</span><span class="n">l</span> <span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">devices</span><span class="o">/</span><span class="n">system</span><span class="o">/</span><span class="n">cpu</span><span class="o">/</span><span class="n">cpu0</span><span class="o">/</span><span class="n">cache</span><span class="o">/</span><span class="n">index0</span>
<span class="n">total</span> <span class="mi">0</span>
<span class="o">-</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--</span> <span class="mi">1</span> <span class="n">root</span> <span class="n">root</span> <span class="mi">4096</span> <span class="n">Nov</span> <span class="mi">24</span> <span class="mo">00</span><span class="o">:</span><span class="mo">01</span> <span class="n">coherency_line_size</span>
<span class="o">-</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--</span> <span class="mi">1</span> <span class="n">root</span> <span class="n">root</span> <span class="mi">4096</span> <span class="n">Nov</span> <span class="mi">24</span> <span class="mo">00</span><span class="o">:</span><span class="mo">01</span> <span class="n">level</span>
<span class="o">-</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--</span> <span class="mi">1</span> <span class="n">root</span> <span class="n">root</span> <span class="mi">4096</span> <span class="n">Nov</span> <span class="mi">24</span> <span class="mo">00</span><span class="o">:</span><span class="mo">01</span> <span class="n">number_of_sets</span>
<span class="o">-</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--</span> <span class="mi">1</span> <span class="n">root</span> <span class="n">root</span> <span class="mi">4096</span> <span class="n">Nov</span> <span class="mi">24</span> <span class="mo">00</span><span class="o">:</span><span class="mo">01</span> <span class="n">physical_line_partition</span>
<span class="o">-</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--</span> <span class="mi">1</span> <span class="n">root</span> <span class="n">root</span> <span class="mi">4096</span> <span class="n">Nov</span> <span class="mi">24</span> <span class="mo">00</span><span class="o">:</span><span class="mo">01</span> <span class="n">shared_cpu_list</span>
<span class="o">-</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--</span> <span class="mi">1</span> <span class="n">root</span> <span class="n">root</span> <span class="mi">4096</span> <span class="n">Nov</span> <span class="mi">24</span> <span class="mo">00</span><span class="o">:</span><span class="mo">01</span> <span class="n">shared_cpu_map</span>
<span class="o">-</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--</span> <span class="mi">1</span> <span class="n">root</span> <span class="n">root</span> <span class="mi">4096</span> <span class="n">Nov</span> <span class="mi">24</span> <span class="mo">00</span><span class="o">:</span><span class="mo">01</span> <span class="n">size</span>
<span class="o">-</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--</span> <span class="mi">1</span> <span class="n">root</span> <span class="n">root</span> <span class="mi">4096</span> <span class="n">Nov</span> <span class="mi">24</span> <span class="mo">00</span><span class="o">:</span><span class="mo">01</span> <span class="n">type</span>
<span class="o">-</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--</span> <span class="mi">1</span> <span class="n">root</span> <span class="n">root</span> <span class="mi">4096</span> <span class="n">Nov</span> <span class="mi">24</span> <span class="mo">00</span><span class="o">:</span><span class="mo">01</span> <span class="n">ways_of_associativity</span>
<span class="n">candido</span><span class="err">@</span><span class="n">lur</span><span class="o">:~</span><span class="err">$</span> <span class="n">cat</span> <span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">devices</span><span class="o">/</span><span class="n">system</span><span class="o">/</span><span class="n">cpu</span><span class="o">/</span><span class="n">cpu0</span><span class="o">/</span><span class="n">cache</span><span class="o">/</span><span class="n">index0</span><span class="o">/</span><span class="n">level</span>
<span class="mi">1</span>
<span class="n">candido</span><span class="err">@</span><span class="n">lur</span><span class="o">:~</span><span class="err">$</span> <span class="n">cat</span> <span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">devices</span><span class="o">/</span><span class="n">system</span><span class="o">/</span><span class="n">cpu</span><span class="o">/</span><span class="n">cpu0</span><span class="o">/</span><span class="n">cache</span><span class="o">/</span><span class="n">index0</span><span class="o">/</span><span class="n">number_of_sets</span>
<span class="mi">64</span>
<span class="n">candido</span><span class="err">@</span><span class="n">lur</span><span class="o">:~</span><span class="err">$</span> <span class="n">cat</span> <span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">devices</span><span class="o">/</span><span class="n">system</span><span class="o">/</span><span class="n">cpu</span><span class="o">/</span><span class="n">cpu0</span><span class="o">/</span><span class="n">cache</span><span class="o">/</span><span class="n">index0</span><span class="o">/</span><span class="n">ways_of_associativity</span> <span class="o">--------------&gt;</span> <span class="n">NUMERO</span> <span class="n">DE</span> <span class="n">VIAS</span> <span class="n">DE</span> <span class="n">LOS</span> <span class="n">SETS</span> <span class="n">DE</span> <span class="n">LA</span> <span class="n">CACHE</span>
<span class="mi">8</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">candido@lur:~<span class="nv">$ </span><span class="nb">cat</span>  /sys/devices/system/memory/block_size_bytes <span class="nt">----------------------------------</span><span class="o">&gt;</span> TAMAÑO DE LOS BLOQUES DE MEMORIA PRINCIPAL
8000000</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_dram">12. DRAM</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_refs_3">12.1. refs</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.kernel.org/doc/html/v5.4/admin-guide/cgroup-v1/memory.html" class="bare">https://www.kernel.org/doc/html/v5.4/admin-guide/cgroup-v1/memory.html</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_memory_controller">12.2. memory controller</h3>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.intel.com/content/dam/www/public/us/en/documents/datasheets/2nd-gen-core-desktop-vol-1-datasheet.pdf" class="bare">http://www.intel.com/content/dam/www/public/us/en/documents/datasheets/2nd-gen-core-desktop-vol-1-datasheet.pdf</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_virtual_memory">13. Virtual Memory</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_cache">13.1. cache</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://discuss.aerospike.com/t/how-to-tune-the-linux-kernel-for-memory-performance/4195" class="bare">https://discuss.aerospike.com/t/how-to-tune-the-linux-kernel-for-memory-performance/4195</a></p>
<div class="listingblock">
<div class="content">
<pre>The kernel memory cache contains the following:

dirty cache - Data blocks not yet committed to the file systems which support caching (e.g. ext4). This can be emptied by issuing the sync command athough this may imply a periodic performance penalty. This is not advised for normal usage unless it is extremely important to commit data to hard drive (for example when expecting a failure).

clean cache - Data blocks which are on the hard drive but are also retained in memory for fast access. Dropping the clean cache can result in a performance deficit as all data will read from disk, whereas beforehand, the frequently used data would be fetched directly from RAM.

inode cache - Cache of the inode location information. This can be dropped as with clean cache but with the attendant performance penalty.

slab cache - This type of cache stores objects allocated via malloc by applications so that they may be re-malloc again in the future with object data already populated, resulting in speed gain during memory allocations.</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_intel_chipset">14. Intel Chipset</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="http://www.intel.com/content/www/us/en/chipsets/6-chipset-c200-chipset-datasheet.html">intel 6 C200 serie chipset </a></p>
</li>
<li>
<p><a href="http://en.wikipedia.org/wiki/LGA_1155#Original_Sandy_Bridge_chipsets">sandy bridge,  6 series chipset, socket</a></p>
</li>
<li>
<p>Bajarse el manual Intel® 6 Series Chipset and Intel® C200 Series Chipset. Está en formato PDF. Muy instructiva la introducción.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Se llama chipset al conjunto de controladoras incluidas las integradas en la CPU como la controladora de memoria. El chipset es el de la serie 6 C200 formado, en el caso del Lenovo, por los chips:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Concentrador de controladoras PCH QM67</p>
</li>
</ul>
</div>
<div class="literalblock">
<div class="content">
<pre>Original Sandy Bridge chipsets

Sandy Bridge chipsets, except Q65, Q67 and B65, support both Sandy Bridge and Ivy Bridge CPUs though a BIOS upgrade is required.[3] Sandy Bridge based processors officially support up to DDR3-1333 memory, however in practice speeds up to DDR3-2133 have been tested to work successfully.[4]

The H61-chipset does only support 1 dual-sided DIMM per memory-channel[5] and therefore is limited to 16GB instead of the 32GB like the others support. On motherboards with 4 DIMM-slots you can only use 4 single-sided Dimms.[6]
Name 	B65 	H61 	Q67 	H67[7] 	P67 	Z68[8]
Overclocking 	GPU 	CPU + RAM 	CPU + GPU + RAM
Allows using built-in GPU 	Yes 	No 	Yes
RAID 	No 	Yes
Maximum USB 2.0 ports1 	12 	10 	14
Maximum SATA 2.0/3.0 ports 	4 / 1 	4 / 0 	4 / 2
Main PCIe Configuration 	1 × PCIe 2.0 ×16 	1 × PCIe 2.0 ×16
or 2 × PCIe 2.0 ×8
Secondary PCIe 	8 × PCIe 2.0 	6 × PCIe 2.0 	8 x PCIe 2.0
Intel Rapid Storage Technology 	No 	Yes
Intel Active Management Technology 	No 	Yes 	No
Intel Trusted Execution Technology 	No 	Yes 	No
Smart Response Technology 	No 	Yes
Ivy Bridge Processor Support 	No 	Yes 	No 	Yes
Release Date 	February 2011 	May 2011 	January 2011 	May 2011
Max TDP 	6.1 W
Chipset lithography 	65 nm

1 USB3.0 is not supported by any of these chipsets. Motherboard manufacturers use external solutions to add USB3.0 support.</pre>
</div>
</div>
<div class="sect2">
<h3 id="_northbridge_southbridge">14.1. Northbridge-Southbridge</h3>
<div class="imageblock">
<div class="content">
<img src="Motherboard_diagram.svg" alt="Placa Base Puentes Norte y Sur">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_platform_controller_hub_pch">14.2. Platform Controller Hub-PCH</h3>
<div class="paragraph">
<p>PCH es un concentrador de controladoras.</p>
</div>
<div class="paragraph">
<p>En la hoja de características de Intel de la <a href="http://ark.intel.com/products/52229/Intel-Core-i5-2520M-Processor-3M-Cache-up-to-3_20-GHz#infosectionessentials">CPU part number FF8062700840017</a> si miro el diagrama veo que hay un bridge <em>Platform Controller Hub</em>(PCH) que  es un chip alone.</p>
</div>
<div class="paragraph">
<p>Según leo en la <a href="http://en.wikipedia.org/wiki/Platform_Controller_Hub">wikipedia</a>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>El Northbridge ha sido eliminado integrando parte de sus funciones en la CPU (como el controlador de memoria ICH, el controlador PCI-express, etc..) y otras como clocking pasan al chip PCH. Las funciones del southbridge pasan al PCH.</p>
</li>
<li>
<p>La conexión CPU-PCH puede ser FDI si el PCH tiene un procesador gráfico y DMI si no lo tiene.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Según la web de la CPU el Lenovo tiene Direct Media Interface. El PCH de la serie chipset 6 es el <em>Cougar Point</em></p>
</div>
<div class="paragraph">
<p>Cougar Point is the codename of a PCH in Intel 6 Series chipsets for mobile, desktop, and workstation / server platforms. It is most closely associated with <em>Sandy Bridge</em> processors.</p>
</div>
<div class="paragraph">
<p>De las distintas versiones de la serie 6, Lenovo tiene la versión <a href="http://ark.intel.com/products/52813/Intel-BD82QM67-PCH" class="bare">http://ark.intel.com/products/52813/Intel-BD82QM67-PCH</a> [BD82QM67 (PCH QM67) Mobile Office]</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
In the first month of Cougar Point&#8217;s release, January 2011, Intel posted a press release stating a design error had been discovered.[3] Specifically, a transistor in the 3 Gbit/s PLL clocking tree was receiving too high voltage.[4] The projected result was a 5–15% failure rate within three years of 3 Gbit/s SATA ports, commonly used for storage devices such as hard drives and DVD drives. Through OEMs, Intel plans to repair or replace all affected products at a cost of $700 million.
</td>
</tr>
</table>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
The Intel 6 series chipsets with step B2 have been recalled due to a hardware bug that causes their 3 Gbit/s Serial ATA to degrade over time until they become unusable. Step B3 of the Intel 6 series chipsets will have the fix for this. The Z68 chipset which supports CPU overclocking and use of the integrated graphics does not have this hardware bug.[38]
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_hard_disk">15. Hard Disk</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_optimization">15.1. optimization</h3>
<div class="ulist">
<ul>
<li>
<p>¿Por qué está el disco continuamente girando sin parar y emitiendo ruido?</p>
</li>
<li>
<p><a href="https://www.yugabyte.com/blog/linux-performance-tuning-memory-disk-io/" class="bare">https://www.yugabyte.com/blog/linux-performance-tuning-memory-disk-io/</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_benchmark">15.2. benchmark</h3>
<div class="ulist">
<ul>
<li>
<p><code>lsblk</code></p>
</li>
<li>
<p><code>lsblk /dev/sda</code></p>
</li>
<li>
<p><code>sudo fdisk -l /dev/sda</code></p>
</li>
<li>
<p><code>sudo hdparm -Ttv /dev/sda5</code></p>
</li>
<li>
<p><code>sudo hdparm -I /dev/sda | more</code> &#8594; bestial</p>
</li>
<li>
<p><a href="https://help.ubuntu.com/community/Smartmontools" class="bare">https://help.ubuntu.com/community/Smartmontools</a></p>
<div class="ulist">
<ul>
<li>
<p><code>sudo apt-get install smartmontools</code></p>
<div class="ulist">
<ul>
<li>
<p>recomendado   gsmartcontrol smart-notifier &#8594; instalo gsmartcontrol gui</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>smartctl --all /dev/sda</code></p>
</li>
<li>
<p><code>sudo smartctl -c /dev/sda</code> &#8594; tiempo que tarda en hacer un test &#8594; uno de 81 minutos</p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="https://help.ubuntu.com/community/Smartmontools" class="bare">https://help.ubuntu.com/community/Smartmontools</a></p>
<div class="ulist">
<ul>
<li>
<p>comandos</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>sudo gsmartcontrol</code></p>
<div class="ulist">
<ul>
<li>
<p>selecciono disco</p>
<div class="listingblock">
<div class="content">
<pre>Seagate Laptop HDD
ATA8-ACS T13/1699-D revision 4
SATA 3.0, 6.0 Gb/s (current: 6.0 Gb/s) -&gt; gigaBIT?</pre>
</div>
</div>
<div class="paragraph">
<p>bad sectors: ecc
<sub>~</sub><sub>~</sub><sub>~</sub><sub>~</sub><sub>~</sub>~</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><a href="https://www.dell.com/support/kbdoc/es-es/000146908/why-4k-drive-recommended-for-os-installation" class="bare">https://www.dell.com/support/kbdoc/es-es/000146908/why-4k-drive-recommended-for-os-installation</a></p>
</li>
<li>
<p>¿por qué es más eficiente un sector 4K que uno de 512B?</p>
<div class="ulist">
<ul>
<li>
<p>Relación tamaño sector / tamaño defecto</p>
<div class="listingblock">
<div class="content">
<pre>With the increase in areal density, the sector has now consumed a smaller and smaller amount of space on the hard drive surface. This creates a problem because the physical size of the sectors on hard drives has shrunk but media defects have not. Por lo que con el aumento de la densidad(número de bits por superficie) y el mantenimiento del defecto, la cantidad de dato dañado aumenta ya que abarca más bits para el mismo sector de 512Bytes. Si aumentamos el tamaño del sector, es decir, el número de datos en el sector se consigue que en el disco la relación dato/superficie aumenta -&gt; mayor capacidad efectiva. Por otro lado si aumentamos ligeramente el número de bytes del ECC se mejora la rapidez y robustez del algoritmo corrector de errores, mejora la fiabilidad.</pre>
</div>
</div>
</li>
<li>
<p>512B</p>
<div class="listingblock">
<div class="content">
<pre>gap:           x1
sync:          x2
address mark:  x3
data:  512B
ecc:   50B</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>x1+x2+x3=15B</p>
</li>
</ul>
</div>
</li>
<li>
<p>4K</p>
<div class="listingblock">
<div class="content">
<pre>gap:          x1
sync:         x2
address mark: x3
data:  4096B
ecc:   100B
La norma Advanced Format usa el mismo número de bytes para los sectores Brecha, Sincronización y Marca de Dirección, pero aumenta el campo ECC a 100 bytes. Esto produce una eficiencia del formato1 sectorizado de 97 % (4.096/(4.096 115)), casi una mejoría del 10 %.</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>x1+x2+x3=15B</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>El tamaño de bloque de 4KB está en coherencia con el tamaño de páginas de 4kB de los sistemas operativos y procesadores.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_iommu">15.3. iommu</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://jesustorres.es/iommu-primer-asalto" class="bare">https://jesustorres.es/iommu-primer-asalto</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_buffercached">15.4. buffer/cached</h3>
<div class="ulist">
<ul>
<li>
<p>buffer : la transferencia entre la aplicación y el disk no es directa: el buffer es memoria intermedia entre la aplicación y el disco.</p>
<div class="ulist">
<ul>
<li>
<p>¿en el controlador i/o también hay buffer? hay que saber como es el mapa de memoria  y la iommu</p>
</li>
</ul>
</div>
</li>
<li>
<p>cached : si yo abro un fichero del disco, se queda una copia en ram para la siguiente apertura ¿?</p>
</li>
<li>
<p>mezclando los terminos buffer y cached en docu de linux</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://lwn.net/Articles/806980/" class="bare">https://lwn.net/Articles/806980/</a></p>
<div class="ulist">
<ul>
<li>
<p>dos tipos de io: buffer-user(direct i/o) y buffer(page cached)-kernel</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_dma">15.5. DMA</h3>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.makelinux.net/ldd3/chp-15-sect-4.shtml" class="bare">http://www.makelinux.net/ldd3/chp-15-sect-4.shtml</a> &#8594; book linux driver</p>
</li>
<li>
<p><a href="https://docs.kernel.org/driver-api/dmaengine/index.html" class="bare">https://docs.kernel.org/driver-api/dmaengine/index.html</a></p>
<div class="ulist">
<ul>
<li>
<p><a href="https://docs.kernel.org/driver-api/dmaengine/provider.html" class="bare">https://docs.kernel.org/driver-api/dmaengine/provider.html</a> &#8594; book linux kernel &#8594; DRQ en lugar de IRQ</p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="https://www.kernel.org/doc/html/latest/userspace-api/media/v4l/dmabuf.html" class="bare">https://www.kernel.org/doc/html/latest/userspace-api/media/v4l/dmabuf.html</a> &#8594; book linux kernel</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_ultra_dma_udma">15.5.1. Ultra DMA (udma)</h4>
<div class="ulist">
<ul>
<li>
<p><a href="https://en.wikipedia.org/wiki/UDMA" class="bare">https://en.wikipedia.org/wiki/UDMA</a></p>
<div class="ulist">
<ul>
<li>
<p>udma6 &#8594;</p>
<div class="listingblock">
<div class="content">
<pre>Number	Also called	Maximum_transfer_rate_(MB/s)	Minimum_cycle_time	Defining standard
6[2]	Ultra ATA/133	133	                        15 ns	                ATA-7</pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><a href="https://en.wikipedia.org/wiki/Parallel_ATA" class="bare">https://en.wikipedia.org/wiki/Parallel_ATA</a></p>
<div class="ulist">
<ul>
<li>
<p>133MB/s half-duplex</p>
</li>
<li>
<p>ATA-7 &#8594; UDMA 6,also known as UDMA/133, SATA/150</p>
</li>
<li>
<p>en cambio smartmonitortool dice ATA-8 y velocidades de de 6Gb/s</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_firmware">15.6. Firmware</h3>
<div class="ulist">
<ul>
<li>
<p>Firmware Revision:  0004LIM1</p>
</li>
<li>
<p><a href="https://www.seagate.com/es/es/support/kb/firmware-updates-for-seagate-products-207931en/" class="bare">https://www.seagate.com/es/es/support/kb/firmware-updates-for-seagate-products-207931en/</a></p>
<div class="ulist">
<ul>
<li>
<p><a href="https://apps1.seagate.com/downloads/request.html" class="bare">https://apps1.seagate.com/downloads/request.html</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_aviso_lenovo">15.7. aviso lenovo</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://support.lenovo.com/ve/es/solutions/ht503037-seagate-25-hdd-7200-rpm-drive-firmware-update-to-improve-reliability-thinkcentre" class="bare">https://support.lenovo.com/ve/es/solutions/ht503037-seagate-25-hdd-7200-rpm-drive-firmware-update-to-improve-reliability-thinkcentre</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_controladora_gráfica">16. Controladora Gráfica</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Desde linux según los comandos anteriores se obtiene el brand y el cpuid de la CPU &#8594; En la web de CPU el part number&#8594; Con el part number el datasheet de Intel</p>
</div>
<div class="paragraph">
<p>Desde Windows <a href="http://www.intel.com/support/graphics/sb/CS-009482.htm">Windows Graphics</a></p>
</div>
<div class="paragraph">
<p>As part of the Platform Controller Hub (PCH) design, the northbridge was eliminated, and graphics processing was moved to the central processing unit (CPU).</p>
</div>
<div class="paragraph">
<p>In January 2011, the Sandy Bridge processors were released introducing the "second generation" HD Graphics.</p>
</div>
<div class="paragraph">
<p>La CPU del portátil Lenovo thinkpad es el modelo de Intel Core <em>i5-2520M</em>. En la <a href="http://www.cpu-world.com/CPUs/Core_i5/Intel-Core%20i5%20Mobile%20I5-2520M%20FF8062700840017%20%28BX80627I52520M%29.html">web</a> dan información sobre su microarquitectura:"Sandy Bridge" . Confirmo la CPU con el comando <code>cpuid</code></p>
</div>
<div class="paragraph">
<p>Controladora de video VGA: <em>HD 3000 graphics controller</em> de los <a href="http://en.wikipedia.org/wiki/Intel_HD_Graphics">controladores integrados</a>
de la segunda generación</p>
</div>
<div class="paragraph">
<p>Articulo sobre controladoras 3000 <a href="http://www.xbitlabs.com/articles/graphics/display/intel-hd-graphics-2000-3000.html">defectuosas</a></p>
</div>
<div class="sect2">
<h3 id="_driver_intel_graphics">16.1. Driver Intel Graphics</h3>
<div class="paragraph">
<p>Los drivers se pueden descargar de <a href="http://intellinuxgraphics.org/">intel linux graphics</a></p>
</div>
<div class="paragraph">
<p>Herramientas de intel para test del driver DRM de intel (driver KMS) <code>/usr/share/doc/intel-gpu-tools/README</code></p>
</div>
<div class="paragraph">
<p>Se presentan enlaces a los drivers por fechas</p>
</div>
<div class="paragraph">
<p>Para una misma microarquitectura como la Sandy Bridge se van actualizando los driver por cuatrimestres Qn y para nuevas microarquitecturas o nuevos controladoras de video GPU van surgiendo nuevos drivers.</p>
</div>
<div class="paragraph">
<p>Los elementos del paquete driver son por ejemplo el 3º cuatrimestre del 2011 se liberó <a href="http://intellinuxgraphics.org/2011Q3.html">Q3 2011</a>:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>components
Kernel: Linux 3.0 release
3D driver: mesa 7.11 release
2D driver: xf86-video-intel 2.16.0 release
Libdrm: libdrm-2.4.26 release
Libva: libva-1.0.14 release</pre>
</div>
</div>
<div class="paragraph">
<p>Nos dice para un kernel linux y controladora determinada que elementos recomienda.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
UBUNTU no sigue estás recomendaciones al pie de la letra.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Además también confirma: This release has been validated on following hardware: Sandy Bridge HD Graphics 3000 (Core i7 2630QM, Core i5 2500K)</p>
</div>
<div class="paragraph">
<p>Comenta bugs:Sandy Bridge: Frame Buffer Compression doesn&#8217;t always repaint on some machines: bug#33487.</p>
</div>
<div class="paragraph">
<p>Comprobamos nuestra instalación:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>kernel</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">candido@lur:~<span class="nv">$ </span><span class="nb">uname</span> <span class="nt">-a</span>
Linux lur 3.2.0-30-generic <span class="c">#48-Ubuntu SMP Fri Aug 24 16:52:48 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux</span></code></pre>
</div>
</div>
</li>
<li>
<p>mesa</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">candido@lur:~<span class="nv">$ </span>dpkg <span class="nt">--list</span> mesa<span class="k">*</span>
<span class="nv">Desired</span><span class="o">=</span>Unknown/Install/Remove/Purge/Hold
| <span class="nv">Status</span><span class="o">=</span>Not/Inst/Conf-files/Unpacked/halF-conf/Half-inst/trig-aWait/Trig-pend
|/ Err?<span class="o">=(</span>none<span class="o">)</span>/Reinst-required <span class="o">(</span>Status,Err: <span class="nv">uppercase</span><span class="o">=</span>bad<span class="o">)</span>
<span class="o">||</span>/ Name                           Version                        Description
+++-<span class="o">==============================</span>-<span class="o">==============================</span>-<span class="o">============================================================================</span>
ii  mesa-common-dev                8.0.3+8.0.2-0ubuntu3.2         Developer documentation <span class="k">for </span>Mesa
un  mesa-glide2-dev                &lt;none&gt;                         <span class="o">(</span>no description available<span class="o">)</span>
un  mesa-utils                     &lt;none&gt;                         <span class="o">(</span>no description available<span class="o">)</span>
un  mesag-dev                      &lt;none&gt;                         <span class="o">(</span>no description available<span class="o">)</span>
un  mesag3                         &lt;none&gt;                         <span class="o">(</span>no description available<span class="o">)</span>
un  mesag3+ggi-dev                 &lt;none&gt;                         <span class="o">(</span>no description available<span class="o">)</span></code></pre>
</div>
</div>
</li>
<li>
<p>libdrm</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">candido@lur:~<span class="nv">$ </span>dpkg <span class="nt">--list</span> libdrm<span class="k">*</span>
<span class="nv">Desired</span><span class="o">=</span>Unknown/Install/Remove/Purge/Hold
| <span class="nv">Status</span><span class="o">=</span>Not/Inst/Conf-files/Unpacked/halF-conf/Half-inst/trig-aWait/Trig-pend
|/ Err?<span class="o">=(</span>none<span class="o">)</span>/Reinst-required <span class="o">(</span>Status,Err: <span class="nv">uppercase</span><span class="o">=</span>bad<span class="o">)</span>
<span class="o">||</span>/ Name                           Version                        Description
+++-<span class="o">==============================</span>-<span class="o">==============================</span>-<span class="o">============================================================================</span>
ii  libdrm-dev                     2.4.32-1ubuntu1                Userspace interface to kernel DRM services <span class="nt">--</span> development files
ii  libdrm-intel1                  2.4.32-1ubuntu1                Userspace interface to intel-specific kernel DRM services <span class="nt">--</span> runtime
un  libdrm-nouveau1                &lt;none&gt;                         <span class="o">(</span>no description available<span class="o">)</span>
ii  libdrm-nouveau1a               2.4.32-1ubuntu1                Userspace interface to nouveau-specific kernel DRM services <span class="nt">--</span> runtime
ii  libdrm-radeon1                 2.4.32-1ubuntu1                Userspace interface to radeon-specific kernel DRM services <span class="nt">--</span> runtime
ii  libdrm2                        2.4.32-1ubuntu1                Userspace interface to kernel DRM services <span class="nt">--</span> runtime</code></pre>
</div>
</div>
</li>
<li>
<p>libva</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">candido@lur:~<span class="nv">$ </span>dpkg <span class="nt">--list</span> libva<span class="k">*</span>
<span class="nv">Desired</span><span class="o">=</span>Unknown/Install/Remove/Purge/Hold
| <span class="nv">Status</span><span class="o">=</span>Not/Inst/Conf-files/Unpacked/halF-conf/Half-inst/trig-aWait/Trig-pend
|/ Err?<span class="o">=(</span>none<span class="o">)</span>/Reinst-required <span class="o">(</span>Status,Err: <span class="nv">uppercase</span><span class="o">=</span>bad<span class="o">)</span>
<span class="o">||</span>/ Name                           Version                        Description
+++-<span class="o">==============================</span>-<span class="o">==============================</span>-<span class="o">============================================================================</span>
ii  libva-x11-1                    1.0.15-4                       Video Acceleration <span class="o">(</span>VA<span class="o">)</span> API <span class="k">for </span>Linux <span class="nt">--</span> X11 runtime
ii  libva1                         1.0.15-4                       Video Acceleration <span class="o">(</span>VA<span class="o">)</span> API <span class="k">for </span>Linux <span class="nt">--</span> runtime
ii  libvalhalla2                   2.0.0-4                        tiny media scanner library
ii  libvamp-hostsdk3               2.1-1                          helper library <span class="k">for </span>Vamp hosts written <span class="k">in </span>C++</code></pre>
</div>
</div>
</li>
<li>
<p>xf86-video-intel</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">candido@lur:~<span class="nv">$ </span>dpkg <span class="nt">--list</span> xf86<span class="k">*</span>
No packages found matching xf86<span class="k">*</span>.</code></pre>
</div>
</div>
</li>
<li>
<p>xserver-xorg-video-intel:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">candido@lur:~<span class="nv">$ </span>dpkg <span class="nt">--list</span> xserver-xorg-video-intel
<span class="nv">Desired</span><span class="o">=</span>Unknown/Install/Remove/Purge/Hold
| <span class="nv">Status</span><span class="o">=</span>Not/Inst/Conf-files/Unpacked/halF-conf/Half-inst/trig-aWait/Trig-pend
|/ Err?<span class="o">=(</span>none<span class="o">)</span>/Reinst-required <span class="o">(</span>Status,Err: <span class="nv">uppercase</span><span class="o">=</span>bad<span class="o">)</span>
<span class="o">||</span>/ Name                           Version                        Description
+++-<span class="o">==============================</span>-<span class="o">==============================</span>-<span class="o">============================================================================</span>
ii  xserver-xorg-video-intel       2:2.17.0-1ubuntu4.1            X.Org X server <span class="nt">--</span> Intel i8xx, i9xx display driver</code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>El driver 2D <em>xf86-video-intel</em> lo tengo instalado?:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">candido@lur:~/tutoriales/linux_tutorial<span class="nv">$ </span><span class="nb">sudo </span>dpkg-query <span class="nt">-W</span> <span class="s2">"*intel*"</span>
intel-gpu-tools	1.2-1
libdrm-intel1	2.4.32-1ubuntu1
xserver-xorg-video-intel	2:2.17.0-1ubuntu4.1</code></pre>
</div>
</div>
<div class="paragraph">
<p>¿ Qué diferencia hay entre el paquete xserver-xorg-video-intel y xf86-video-intel?la diferencia es el nombre.</p>
</div>
<div class="paragraph">
<p>Si voy al home del paquete en <a href="http://xorg.freedesktop.org/wiki/IntelGraphicsDriver">xorg</a> veo que el nombre original es el xf86-video-intel y que es rebautizado por debian/ubuntu como <a href="https://launchpad.net/xserver-xorg-video-intel">xserver-xorg-video-intel</a>.</p>
</div>
<div class="paragraph">
<p>El enlace original <a href="http://xorg.freedesktop.org/wiki/IntelGraphicsDriver">xorg</a> tiene enlaces muy interesantes a: fuentes, bugs, ultima versión liberada, compatibilidades, etc &#8230;&#8203;.</p>
</div>
<div class="paragraph">
<p>En el enlace <a href="http://www.ubuntuupdates.org/package/ubuntu-x-swat/precise/main/base/xserver-xorg-video-intel">updates</a> tengo actualizaciones y paquetes de terceros alternativos. Puedo descargar los paquetes debian de distintos repositorios o distintas versiones.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">candido@lur:~/tutoriales/linux_tutorial<span class="nv">$ </span>dpkg <span class="nt">--list</span> | <span class="nb">grep </span>xserver-xorg-video-intel
ii  xserver-xorg-video-intel                      2:2.17.0-1ubuntu4.1                       X.Org X server <span class="nt">--</span> Intel i8xx, i9xx display driver</code></pre>
</div>
</div>
<div class="paragraph">
<p>Por las versiones que obtengo veo que sigue la recomendación:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>2012-02-23: <a href="http://intellinuxgraphics.org/2012.02.html">Intel® 12.02</a> graphics package released, featuring new release versioning scheme, stable Intel® Ivy Bridge support, OpenGL 3.0 and GLSL 1.30 compatibility and stability fixes.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">candido@lur:~/tutoriales/linux_tutorial<span class="nv">$ </span>dpkg <span class="nt">--listfiles</span> xserver-xorg-video-intel
/.
/lib
/lib/udev
/lib/udev/rules.d
/lib/udev/rules.d/40-xserver-xorg-video-intel.rules
/usr
/usr/lib
/usr/lib/xorg
/usr/lib/xorg/modules
/usr/lib/xorg/modules/drivers
/usr/lib/xorg/modules/drivers/intel_drv.so
/usr/lib/libI810XvMC.so.1.0.0
/usr/lib/libIntelXvMC.so.1.0.0
/usr/share
/usr/share/man
/usr/share/man/man4
/usr/share/man/man4/intel.4.gz
/usr/share/lintian
/usr/share/lintian/overrides
/usr/share/lintian/overrides/xserver-xorg-video-intel
/usr/share/bug
/usr/share/bug/xserver-xorg-video-intel
/usr/share/doc
/usr/share/doc/xserver-xorg-video-intel
/usr/share/doc/xserver-xorg-video-intel/README
/usr/share/doc/xserver-xorg-video-intel/README.Debian
/usr/share/doc/xserver-xorg-video-intel/copyright
/usr/share/doc/xserver-xorg-video-intel/NEWS.gz
/usr/share/doc/xserver-xorg-video-intel/changelog.Debian.gz
/usr/lib/libIntelXvMC.so.1
/usr/lib/libI810XvMC.so.1
/usr/share/bug/xserver-xorg-video-intel/script</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Abro el <a href="file:///usr/share/doc/xserver-xorg-video-intel/README" class="bare">file:///usr/share/doc/xserver-xorg-video-intel/README</a>:</p>
<div class="ulist">
<ul>
<li>
<p>Driver para xorg intel</p>
</li>
<li>
<p>Enlace a <a href="http://intellinuxgraphics.org" class="bare">http://intellinuxgraphics.org</a></p>
</li>
<li>
<p>chipset compatibles: i810, i810-DC100, i810e, i815, i830M, 845G, 852GM, 855GM, 865G, 915G,  915GM,  945G,  945GM,  965G,  965Q,  946GZ,
965GM,  945GME,  G33,  Q33,  Q35,  G35,  GM45,  G45,  Q45,  G43, G41 chipsets, and Pineview-M in Atom N400 series, Pineview-D in Atom
D400/D500 series.</p>
</li>
<li>
<p>man intel:</p>
<div class="ulist">
<ul>
<li>
<p>informa sobre opciones configurables a través del fichero xorg.conf.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
El chipset de la controladora HD 3000 se llama serie 6 C200. El manual de linux me da una lista de chipset INCOMPLETA. ¿Entonces como identificar el driver? Creo que este documento no esa actualizado con los nombres de los nuevos chipset.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><code>cat /var/log/Xorg.0.log</code></p>
</div>
<div class="paragraph">
<p>Obtengo información proporcionada por xorg al instalar es servidor. Me da más información de la controladora gráfica, de los drivers, etc &#8230;&#8203; No es fácil de descifrar algunas líneas, pero por lo menos hace referencia Sandy Bridge.</p>
</div>
<div class="paragraph">
<p>Las librerías de VIDEO 2D libxxxx.so parece que son:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>/usr/lib/xorg/modules/drivers/intel_drv.so</p>
</li>
<li>
<p>/usr/lib/libIntelXvMC.so.1</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Los módulos del kernel relacionados con el VIDEO son</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">candido@lur:~<span class="nv">$ </span>lsmod | <span class="nb">grep </span>video
video                  19596  1 i915</code></pre>
</div>
</div>
<div class="paragraph">
<p>los módulos del kernel relacionados con i915</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">candido@lur:~<span class="nv">$ </span>lsmod | <span class="nb">grep </span>i915
i915                  473035  3
drm_kms_helper         46978  1 i915
drm                   242038  4 i915,drm_kms_helper
i2c_algo_bit           13423  1 i915
video                  19596  1 i915</code></pre>
</div>
</div>
<div class="paragraph">
<p>Donde está el módulo i915.ko</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">candido@lur:~<span class="nv">$ </span>dpkg <span class="nt">-S</span> i915.ko
linux-image-3.2.0-30-generic: /lib/modules/3.2.0-30-generic/kernel/drivers/gpu/drm/i915/i915.ko
linux-image-3.2.0-31-generic: /lib/modules/3.2.0-31-generic/kernel/drivers/gpu/drm/i915/i915.ko</code></pre>
</div>
</div>
<div class="paragraph">
<p>El módulo i915.ko se ha instalado a través de linux-image al arrancar el ordenador en el sistema de ficheros en la carpeta /lib/</p>
</div>
<div class="paragraph">
<p>Información relativa al módulo i915.ko</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">root@lur:/home/candido# modinfo i915 | more
filename:       /lib/modules/3.2.0-30-generic/kernel/drivers/gpu/drm/i915/i915.ko
license:        GPL and additional rights
description:    Intel Graphics
author:         Tungsten Graphics, Inc.
license:        GPL and additional rights
srcversion:     48F550DFB14C9E427069C10
<span class="nb">alias</span>:          pci:v00008086d0000015Asv<span class="k">*</span>sd<span class="k">*</span>bc03sc<span class="k">*</span>i<span class="k">*</span>
<span class="nb">alias</span>:          pci:v00008086d00000162sv<span class="k">*</span>sd<span class="k">*</span>bc03sc<span class="k">*</span>i<span class="k">*</span>
<span class="nb">alias</span>:          pci:v00008086d00000152sv<span class="k">*</span>sd<span class="k">*</span>bc03sc<span class="k">*</span>i<span class="k">*</span>
<span class="nb">alias</span>:          pci:v00008086d00000166sv<span class="k">*</span>sd<span class="k">*</span>bc03sc<span class="k">*</span>i<span class="k">*</span>
<span class="nb">alias</span>:          pci:v00008086d00000156sv<span class="k">*</span>sd<span class="k">*</span>bc03sc<span class="k">*</span>i<span class="k">*</span>
<span class="nb">alias</span>:          pci:v00008086d0000010Asv<span class="k">*</span>sd<span class="k">*</span>bc03sc<span class="k">*</span>i<span class="k">*</span>
<span class="nb">alias</span>:          pci:v00008086d00000126sv<span class="k">*</span>sd<span class="k">*</span>bc03sc<span class="k">*</span>i<span class="k">*</span>
<span class="nb">alias</span>:          pci:v00008086d00000116sv<span class="k">*</span>sd<span class="k">*</span>bc03sc<span class="k">*</span>i<span class="k">*</span>
<span class="nb">alias</span>:          pci:v00008086d00000106sv<span class="k">*</span>sd<span class="k">*</span>bc03sc<span class="k">*</span>i<span class="k">*</span>
<span class="nb">alias</span>:          pci:v00008086d00000122sv<span class="k">*</span>sd<span class="k">*</span>bc03sc<span class="k">*</span>i<span class="k">*</span>
<span class="nb">alias</span>:          pci:v00008086d00000112sv<span class="k">*</span>sd<span class="k">*</span>bc03sc<span class="k">*</span>i<span class="k">*</span>
<span class="nb">alias</span>:          pci:v00008086d00000102sv<span class="k">*</span>sd<span class="k">*</span>bc03sc<span class="k">*</span>i<span class="k">*</span>
<span class="nb">alias</span>:          pci:v00008086d00000046sv<span class="k">*</span>sd<span class="k">*</span>bc03sc<span class="k">*</span>i<span class="k">*</span>
<span class="nb">alias</span>:          pci:v00008086d00000042sv<span class="k">*</span>sd<span class="k">*</span>bc03sc<span class="k">*</span>i<span class="k">*</span>
<span class="nb">alias</span>:          pci:v00008086d0000A011sv<span class="k">*</span>sd<span class="k">*</span>bc03sc<span class="k">*</span>i<span class="k">*</span>
<span class="nb">alias</span>:          pci:v00008086d0000A001sv<span class="k">*</span>sd<span class="k">*</span>bc03sc<span class="k">*</span>i<span class="k">*</span>
<span class="nb">alias</span>:          pci:v00008086d00002E92sv<span class="k">*</span>sd<span class="k">*</span>bc03sc<span class="k">*</span>i<span class="k">*</span>
<span class="nb">alias</span>:          pci:v00008086d00002E42sv<span class="k">*</span>sd<span class="k">*</span>bc03sc<span class="k">*</span>i<span class="k">*</span>
<span class="nb">alias</span>:          pci:v00008086d00002E32sv<span class="k">*</span>sd<span class="k">*</span>bc03sc<span class="k">*</span>i<span class="k">*</span>
<span class="nb">alias</span>:          pci:v00008086d00002E22sv<span class="k">*</span>sd<span class="k">*</span>bc03sc<span class="k">*</span>i<span class="k">*</span>
<span class="nb">alias</span>:          pci:v00008086d00002E12sv<span class="k">*</span>sd<span class="k">*</span>bc03sc<span class="k">*</span>i<span class="k">*</span>
<span class="nb">alias</span>:          pci:v00008086d00002E02sv<span class="k">*</span>sd<span class="k">*</span>bc03sc<span class="k">*</span>i<span class="k">*</span>
<span class="nb">alias</span>:          pci:v00008086d00002A42sv<span class="k">*</span>sd<span class="k">*</span>bc03sc<span class="k">*</span>i<span class="k">*</span>
<span class="nb">alias</span>:          pci:v00008086d00002A12sv<span class="k">*</span>sd<span class="k">*</span>bc03sc<span class="k">*</span>i<span class="k">*</span>
<span class="nb">alias</span>:          pci:v00008086d00002A02sv<span class="k">*</span>sd<span class="k">*</span>bc03sc<span class="k">*</span>i<span class="k">*</span>
<span class="nb">alias</span>:          pci:v00008086d000029D2sv<span class="k">*</span>sd<span class="k">*</span>bc03sc<span class="k">*</span>i<span class="k">*</span>
<span class="nb">alias</span>:          pci:v00008086d000029C2sv<span class="k">*</span>sd<span class="k">*</span>bc03sc<span class="k">*</span>i<span class="k">*</span>
<span class="nb">alias</span>:          pci:v00008086d000029B2sv<span class="k">*</span>sd<span class="k">*</span>bc03sc<span class="k">*</span>i<span class="k">*</span>
<span class="nb">alias</span>:          pci:v00008086d000029A2sv<span class="k">*</span>sd<span class="k">*</span>bc03sc<span class="k">*</span>i<span class="k">*</span>
<span class="nb">alias</span>:          pci:v00008086d00002992sv<span class="k">*</span>sd<span class="k">*</span>bc03sc<span class="k">*</span>i<span class="k">*</span>
<span class="nb">alias</span>:          pci:v00008086d00002982sv<span class="k">*</span>sd<span class="k">*</span>bc03sc<span class="k">*</span>i<span class="k">*</span>
<span class="nb">alias</span>:          pci:v00008086d00002972sv<span class="k">*</span>sd<span class="k">*</span>bc03sc<span class="k">*</span>i<span class="k">*</span>
<span class="nb">alias</span>:          pci:v00008086d000027AEsv<span class="k">*</span>sd<span class="k">*</span>bc03sc<span class="k">*</span>i<span class="k">*</span>
<span class="nb">alias</span>:          pci:v00008086d000027A2sv<span class="k">*</span>sd<span class="k">*</span>bc03sc<span class="k">*</span>i<span class="k">*</span>
<span class="nb">alias</span>:          pci:v00008086d00002772sv<span class="k">*</span>sd<span class="k">*</span>bc03sc<span class="k">*</span>i<span class="k">*</span>
<span class="nb">alias</span>:          pci:v00008086d00002592sv<span class="k">*</span>sd<span class="k">*</span>bc03sc<span class="k">*</span>i<span class="k">*</span>
<span class="nb">alias</span>:          pci:v00008086d0000258Asv<span class="k">*</span>sd<span class="k">*</span>bc03sc<span class="k">*</span>i<span class="k">*</span>
<span class="nb">alias</span>:          pci:v00008086d00002582sv<span class="k">*</span>sd<span class="k">*</span>bc03sc<span class="k">*</span>i<span class="k">*</span>
<span class="nb">alias</span>:          pci:v00008086d00002572sv<span class="k">*</span>sd<span class="k">*</span>bc03sc<span class="k">*</span>i<span class="k">*</span>
<span class="nb">alias</span>:          pci:v00008086d0000358Esv<span class="k">*</span>sd<span class="k">*</span>bc03sc<span class="k">*</span>i<span class="k">*</span>
<span class="nb">alias</span>:          pci:v00008086d00003582sv<span class="k">*</span>sd<span class="k">*</span>bc03sc<span class="k">*</span>i<span class="k">*</span>
<span class="nb">alias</span>:          pci:v00008086d00002562sv<span class="k">*</span>sd<span class="k">*</span>bc03sc<span class="k">*</span>i<span class="k">*</span>
<span class="nb">alias</span>:          pci:v00008086d00003577sv<span class="k">*</span>sd<span class="k">*</span>bc03sc<span class="k">*</span>i<span class="k">*</span>
depends:        drm,drm_kms_helper,video,i2c-algo-bit
intree:         Y
vermagic:       3.2.0-30-generic SMP mod_unload modversions
parm:           modeset:Use kernel modesetting <span class="o">[</span>KMS] <span class="o">(</span><span class="nv">0</span><span class="o">=</span>DRM_I915_KMS from .config, <span class="nv">1</span><span class="o">=</span>on, <span class="nt">-1</span><span class="o">=</span>force vga console preference <span class="o">[</span>default]<span class="o">)</span> <span class="o">(</span>int<span class="o">)</span>
parm:           fbpercrtc:int
parm:           panel_ignore_lid:Override lid status <span class="o">(</span><span class="nv">0</span><span class="o">=</span>autodetect <span class="o">[</span>default], <span class="nv">1</span><span class="o">=</span>lid open, <span class="nt">-1</span><span class="o">=</span>lid closed<span class="o">)</span> <span class="o">(</span>int<span class="o">)</span>
parm:           powersave:Enable powersavings, fbc, downclocking, etc. <span class="o">(</span>default: <span class="nb">true</span><span class="o">)</span> <span class="o">(</span>int<span class="o">)</span>
parm:           semaphores:Use semaphores <span class="k">for </span>inter-ring <span class="nb">sync</span> <span class="o">(</span>default: <span class="nt">-1</span> <span class="o">(</span>use per-chip defaults<span class="o">))</span> <span class="o">(</span>int<span class="o">)</span>
parm:           i915_enable_rc6:Enable power-saving render C-state 6 <span class="o">(</span>default: <span class="nt">-1</span> <span class="o">(</span>use per-chip default<span class="o">)</span> <span class="o">(</span>int<span class="o">)</span>
parm:           i915_enable_fbc:Enable frame buffer compression <span class="k">for </span>power savings <span class="o">(</span>default: <span class="nt">-1</span> <span class="o">(</span>use per-chip default<span class="o">))</span> <span class="o">(</span>int<span class="o">)</span>
parm:           lvds_downclock:Use panel <span class="o">(</span>LVDS/eDP<span class="o">)</span> downclocking <span class="k">for </span>power savings <span class="o">(</span>default: <span class="nb">false</span><span class="o">)</span> <span class="o">(</span>int<span class="o">)</span>
parm:           lvds_use_ssc:Use Spread Spectrum Clock with panels <span class="o">[</span>LVDS/eDP] <span class="o">(</span>default: auto from VBT<span class="o">)</span> <span class="o">(</span>int<span class="o">)</span>
parm:           vbt_sdvo_panel_type:Override selection of SDVO panel mode <span class="k">in </span>the VBT <span class="o">(</span>default: auto<span class="o">)</span> <span class="o">(</span>int<span class="o">)</span>
parm:           reset:Attempt GPU resets <span class="o">(</span>default: <span class="nb">true</span><span class="o">)</span> <span class="o">(</span>bool<span class="o">)</span>
parm:           enable_hangcheck:Periodically check GPU activity <span class="k">for </span>detecting hangs. WARNING: Disabling this can cause system wide hangs. <span class="o">(</span>defa
ult: <span class="nb">true</span><span class="o">)</span> <span class="o">(</span>bool<span class="o">)</span>
root@lur:/home/candido# <span class="nb">exit
exit
</span>candido@lur:~<span class="err">$</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://wiki.debian.org/KernelModesetting#Intel_GfxCards">kernel mode setting gfx card intel</a>:</p>
<div class="literalblock">
<div class="content">
<pre>Intel GfxCards

i915 driver

From xserver-xorg-video-intel version 2:2.9.1-2, KMS is enabled by default on Linux,</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>En el programa fuente <em>/usr/src/linux-3.4.4/drivers/gpu/drm/i915/i915_drv.c</em> esta programada la línea:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>INTEL_VGA_DEVICE(0x0102, &amp;intel_sandybridge_d_info),</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Otro fichero:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>/usr/lib/i386-linux-gnu/dri/i915_dri.so</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>¿ Qué relación hay entre xserver-xorg-video-intel y i915.ko?</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_controladora_gráfica_de_intel">17. Controladora Gráfica de Intel</h2>
<div class="sectionbody">
<div class="paragraph">
<p>As part of the Platform Controller Hub (PCH) design, the northbridge was eliminated, and graphics processing was moved to the central processing unit (CPU).</p>
</div>
<div class="paragraph">
<p>In January 2011, the Sandy Bridge processors were released introducing the "second generation" HD Graphics.</p>
</div>
<div class="paragraph">
<p>La CPU del portátil Lenovo thinkpad es el modelo de Intel Core <em>i5-2520M</em>. En la <a href="http://www.cpu-world.com/CPUs/Core_i5/Intel-Core%20i5%20Mobile%20I5-2520M%20FF8062700840017%20%28BX80627I52520M%29.html">web</a> dan información sobre su microarquitectura:"Sandy Bridge" . Confirmo la CPU con el comando <code>cpuid</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh"><span class="nv">$cpuid</span>

Vendor ID: <span class="s2">"GenuineIntel"</span><span class="p">;</span> CPUID level 13

Intel-specific functions:
Version 000206a7:
Type 0 - Original OEM
Family 6 - Pentium Pro
Model 10 -
Stepping 7
Reserved 8

Extended brand string: <span class="s2">"       Intel(R) Core(TM) i5-2520M CPU @ 2.50GHz"</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_graficos_modo_consola_framebuffer_driver">18. Graficos Modo Consola: Framebuffer Driver</h2>
<div class="sectionbody">
<div class="paragraph">
<p>En modo consola C-M-F1 tengo la ventaja de que en ausencia del servidor X la RAM está más descargada, el consumo del ordenador baja mucho, etc
..pero tengo el inconveniente de no disponer de un driver gráfico para: navegar por internet, visualizar imágenes, leer pdfs, etc</p>
</div>
<div class="paragraph">
<p>La solución es instalar la capa de abstracción framebuffer (módulo o driver) que sustituye al X server. Hay diferentes tipos de drivers:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Framebuffer Drivers o módulos de Intel: VESA framebuffer, UVESA framebuffer, superVESAfb, vesafb-ng, etc . Intel GMA drivers soportan KMS.</p>
</li>
<li>
<p>fbdev: Xorg non-accelerated video driver for framebuffer device. Utiliza el submodulo fbdevhw para comunicarse con el kernel device driver:</p>
<div class="ulist">
<ul>
<li>
<p>xserver-xorg-video-fbdev” package</p>
</li>
<li>
<p>fbdevhw: submódulo que utiliza fbdev para comunicarse con el kernel.</p>
</li>
<li>
<p>fb.modes: /etc/fb.modes  contains an unlimited number of video mode descriptions.The general format of a video mode is:etc</p>
</li>
<li>
<p>display-fbdev : Display using Linux kernel framebuffer devices. No existe ni el comando ni el paquete.</p>
</li>
</ul>
</div>
</li>
<li>
<p>KMS</p>
<div class="ulist">
<ul>
<li>
<p>El Kernel Mode Setting permite configurar el video en modo framebuffer desde el espacio del kernel. Esto facilita el cambio de una consola en modo X server a una consola de texto con servicios gráficos framebuffer.</p>
</li>
<li>
<p>Para chipset gráficos de intel el módulo driver framebuffer KMS es el <em>i915</em> que tiene que estar cargado (<code>lsmod</code>)</p>
</li>
<li>
<p>El módulo i915 tiene parámetros configurables (<code>modeinfo i915</code>) como el <em>modeset</em> que permite activar y desactivar el KMS.</p>
<div class="ulist">
<ul>
<li>
<p>En el Lenovo nomodset=-1 por defecto &#8594;</p>
</li>
</ul>
</div>
</li>
<li>
<p>El framebuffer driver built-in  de KMS se llama inteldrmfb</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_framebuffer">18.1. framebuffer</h3>
<div class="paragraph">
<p>la capa de abstracción framebuffer permite disponer de unas API que consiguien que las aplicaciones software sean independientes del hardware gráfico. Se utiliza por ejemplo al arrancar el computador donde las operaciones del kernel requieren visualizar gráficas como logos, splash, etc&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>También se utiliza en modo consola para poder ejecutar aplicaciones gráficas: lectura de documentos, visualización de gráficas, etc ..</p>
</div>
<div class="paragraph">
<p>Glosario:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>fbcon: framebuffer console</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Configuracion:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>fbset command</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">candido@lur:~<span class="nv">$ </span><span class="nb">sudo </span>fbset <span class="nt">-i</span>

mode <span class="s2">"1366x768"</span>
    geometry 1366 768 1366 768 32
    timings 0 0 0 0 0 0 0
    accel <span class="nb">true
    </span>rgba 8/16,8/8,8/0,0/0
endmode

Frame buffer device information:
    Name        : inteldrmfb
    Address     : 0xe0064000
    Size        : 4227072
    Type        : PACKED PIXELS
    Visual      : TRUECOLOR
    XPanStep    : 1
    YPanStep    : 1
    YWrapStep   : 0
    LineLength  : 5504
    Accelerator : No</code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>El framebuffer lo tengo en modo: 1366x768 y no entiendo como es posible si la tarjeta gráfica solo admite hasta 1024x768</p>
</div>
<div class="paragraph">
<p>Información del  framebuffer si en el BACKLIST está comentada la vesafb.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">candido@lur:~<span class="nv">$ </span><span class="nb">sudo </span>hwinfo <span class="nt">--framebuffer</span>
<span class="o">&gt;</span> hal.1: <span class="nb">read </span>hal dataprocess 4743: arguments to dbus_move_error<span class="o">()</span> were incorrect, assertion <span class="s2">"(dest) == NULL || !dbus_error_is_set ((dest))"</span> failed <span class="k">in </span>file ../../dbus/dbus-errors.c line 282.
This is normally a bug <span class="k">in </span>some application using the D-Bus library.
libhal.c 3483 : Error unsubscribing to signals, <span class="nv">error</span><span class="o">=</span>The name org.freedesktop.Hal was not provided by any .service files
02: None 00.0: 11001 VESA Framebuffer
  <span class="o">[</span>Created at bios.464]
  Unique ID: rdCR.ku_DuSHewh1
  Hardware Class: framebuffer
  Model: <span class="s2">"Intel(R)Sandybridge Mobile Graphics Controller"</span>
  Vendor: <span class="s2">"Intel Corporation"</span>
  Device: <span class="s2">"Intel(R)Sandybridge Mobile Graphics Controller"</span>
  SubVendor: <span class="s2">"Intel(R)Sandybridge Mobile Graphics Chipset Accelerated VGA BIOS"</span>
  SubDevice:
  Revision: <span class="s2">"Hardware Version 0.0"</span>
  Memory Size: 63 MB + 960 kB
  Memory Range: 0xe0000000-0xe3feffff <span class="o">(</span>rw<span class="o">)</span>
  Mode 0x0360: 768x480 <span class="o">(</span>+768<span class="o">)</span>, 8 bits
  Mode 0x0361: 768x480 <span class="o">(</span>+1536<span class="o">)</span>, 16 bits
  Mode 0x0362: 768x480 <span class="o">(</span>+3072<span class="o">)</span>, 24 bits
  Mode 0x0363: 960x600 <span class="o">(</span>+960<span class="o">)</span>, 8 bits
  Mode 0x0364: 960x600 <span class="o">(</span>+1920<span class="o">)</span>, 16 bits
  Mode 0x0365: 960x600 <span class="o">(</span>+3840<span class="o">)</span>, 24 bits
  Mode 0x0305: 1024x768 <span class="o">(</span>+1024<span class="o">)</span>, 8 bits
  Mode 0x0317: 1024x768 <span class="o">(</span>+2048<span class="o">)</span>, 16 bits
  Mode 0x0318: 1024x768 <span class="o">(</span>+4096<span class="o">)</span>, 24 bits
  Mode 0x0312: 640x480 <span class="o">(</span>+2560<span class="o">)</span>, 24 bits
  Mode 0x0314: 800x600 <span class="o">(</span>+1600<span class="o">)</span>, 16 bits
  Mode 0x0315: 800x600 <span class="o">(</span>+3200<span class="o">)</span>, 24 bits
  Mode 0x0301: 640x480 <span class="o">(</span>+640<span class="o">)</span>, 8 bits
  Mode 0x0303: 800x600 <span class="o">(</span>+832<span class="o">)</span>, 8 bits
  Mode 0x0311: 640x480 <span class="o">(</span>+1280<span class="o">)</span>, 16 bits
  Config Status: <span class="nv">cfg</span><span class="o">=</span>new, <span class="nv">avail</span><span class="o">=</span><span class="nb">yes</span>, <span class="nv">need</span><span class="o">=</span>no, <span class="nv">active</span><span class="o">=</span>unknown</code></pre>
</div>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
SEGUN ESTA INFORMACION ESTOY UTILIZANDO EL DRIVER GENERICO VESA DE LA BIOS ¿Y NO EL KMS DEL i915 del KERNEL? ¿POR ESO TENGO TAN POCO RESOLUCION?¿SI ESTA ACTIVADO EL KMS PORQUE ACCEDE EL VESA?¿LISTAS NEGRAS?
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Quito el comentario del backlist vesa y &#8230;&#8203;. :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">candido@lur:~<span class="nv">$ </span><span class="nb">sudo </span>hwinfo <span class="nt">--framebuffer</span>
<span class="o">&gt;</span> hal.1: <span class="nb">read </span>hal dataprocess 7199: arguments to dbus_move_error<span class="o">()</span> were incorrect, assertion <span class="s2">"(dest) == NULL || !dbus_error_is_set ((dest))"</span> failed <span class="k">in </span>file ../../dbus/dbus-errors.c line 282.
This is normally a bug <span class="k">in </span>some application using the D-Bus library.
libhal.c 3483 : Error unsubscribing to signals, <span class="nv">error</span><span class="o">=</span>The name org.freedesktop.Hal was not provided by any .service files
02: None 00.0: 11001 VESA Framebuffer
  <span class="o">[</span>Created at bios.464]
  Unique ID: rdCR.ku_DuSHewh1
  Hardware Class: framebuffer
  Model: <span class="s2">"Intel(R)Sandybridge Mobile Graphics Controller"</span>
  Vendor: <span class="s2">"Intel Corporation"</span>
  Device: <span class="s2">"Intel(R)Sandybridge Mobile Graphics Controller"</span>
  SubVendor: <span class="s2">"Intel(R)Sandybridge Mobile Graphics Chipset Accelerated VGA BIOS"</span>
  SubDevice:
  Revision: <span class="s2">"Hardware Version 0.0"</span>
  Memory Size: 63 MB + 960 kB
  Memory Range: 0xe0000000-0xe3feffff <span class="o">(</span>rw<span class="o">)</span>
  Mode 0x0360: 768x480 <span class="o">(</span>+768<span class="o">)</span>, 8 bits
  Mode 0x0361: 768x480 <span class="o">(</span>+1536<span class="o">)</span>, 16 bits
  Mode 0x0362: 768x480 <span class="o">(</span>+3072<span class="o">)</span>, 24 bits
  Mode 0x0363: 960x600 <span class="o">(</span>+960<span class="o">)</span>, 8 bits
  Mode 0x0364: 960x600 <span class="o">(</span>+1920<span class="o">)</span>, 16 bits
  Mode 0x0365: 960x600 <span class="o">(</span>+3840<span class="o">)</span>, 24 bits
  Mode 0x033c: 1920x1440 <span class="o">(</span>+1920<span class="o">)</span>, 8 bits
  Mode 0x034d: 1920x1440 <span class="o">(</span>+3840<span class="o">)</span>, 16 bits
  Mode 0x035c: 1920x1440 <span class="o">(</span>+7680<span class="o">)</span>, 24 bits
  Mode 0x033a: 1600x1200 <span class="o">(</span>+1600<span class="o">)</span>, 8 bits
  Mode 0x034b: 1600x1200 <span class="o">(</span>+3200<span class="o">)</span>, 16 bits
  Mode 0x035a: 1600x1200 <span class="o">(</span>+6400<span class="o">)</span>, 24 bits
  Mode 0x0307: 1280x1024 <span class="o">(</span>+1280<span class="o">)</span>, 8 bits
  Mode 0x031a: 1280x1024 <span class="o">(</span>+2560<span class="o">)</span>, 16 bits
  Mode 0x031b: 1280x1024 <span class="o">(</span>+5120<span class="o">)</span>, 24 bits
  Mode 0x0305: 1024x768 <span class="o">(</span>+1024<span class="o">)</span>, 8 bits
  Mode 0x0317: 1024x768 <span class="o">(</span>+2048<span class="o">)</span>, 16 bits
  Mode 0x0318: 1024x768 <span class="o">(</span>+4096<span class="o">)</span>, 24 bits
  Mode 0x0312: 640x480 <span class="o">(</span>+2560<span class="o">)</span>, 24 bits
  Mode 0x0314: 800x600 <span class="o">(</span>+1600<span class="o">)</span>, 16 bits
  Mode 0x0315: 800x600 <span class="o">(</span>+3200<span class="o">)</span>, 24 bits
  Mode 0x0301: 640x480 <span class="o">(</span>+640<span class="o">)</span>, 8 bits
  Mode 0x0303: 800x600 <span class="o">(</span>+832<span class="o">)</span>, 8 bits
  Mode 0x0311: 640x480 <span class="o">(</span>+1280<span class="o">)</span>, 16 bits
  Config Status: <span class="nv">cfg</span><span class="o">=</span>new, <span class="nv">avail</span><span class="o">=</span><span class="nb">yes</span>, <span class="nv">need</span><span class="o">=</span>no, <span class="nv">active</span><span class="o">=</span>unknown</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
HAN CAMBIADO LOS MODOS, AHORA ES POSIBLE AUMENTAR LA RESOLUCION &#8594; ha debido de cambiar el DRIVER ¿como saber en cada caso cual es el driver que accede a la controladora gráfica?
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>No puedo cambiar la resolución según los modos anterirores:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">candido@lur:~<span class="nv">$ </span><span class="nb">sudo </span>fbset <span class="nt">-xres</span> 1920
ioctl FBIOPUT_VSCREENINFO: Invalid argument</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">candido@lur:~<span class="nv">$ </span><span class="nb">sudo </span>fbset <span class="nt">-i</span>

mode <span class="s2">"1366x768"</span>
    geometry 1366 768 1366 768 32
    timings 0 0 0 0 0 0 0
    accel <span class="nb">true
    </span>rgba 8/16,8/8,8/0,0/0
endmode

Frame buffer device information:
    Name        : inteldrmfb
    Address     : 0xe0064000
    Size        : 4227072
    Type        : PACKED PIXELS
    Visual      : TRUECOLOR
    XPanStep    : 1
    YPanStep    : 1
    YWrapStep   : 0
    LineLength  : 5504
    Accelerator : No</code></pre>
</div>
</div>
<div class="paragraph">
<p>la información de fbset y <code>hwinfo --framebuffer</code> ¿ES LA MISMA ? el driver inteldrmfb es un driver VESA?</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">candido@lur:~<span class="nv">$ </span>xrandr
Screen 0: minimum 320 x 200, current 1366 x 768, maximum 8192 x 8192
LVDS1 connected 1366x768+0+0 <span class="o">(</span>normal left inverted right x axis y axis<span class="o">)</span> 344mm x 194mm
   1366x768       60.0<span class="k">*</span>+
   1360x768       59.8     60.0
   1024x768       60.0
   800x600        60.3     56.2
   640x480        59.9
VGA1 disconnected <span class="o">(</span>normal left inverted right x axis y axis<span class="o">)</span>
HDMI1 disconnected <span class="o">(</span>normal left inverted right x axis y axis<span class="o">)</span>
DP1 disconnected <span class="o">(</span>normal left inverted right x axis y axis<span class="o">)</span>
HDMI2 disconnected <span class="o">(</span>normal left inverted right x axis y axis<span class="o">)</span>
HDMI3 disconnected <span class="o">(</span>normal left inverted right x axis y axis<span class="o">)</span>
DP2 disconnected <span class="o">(</span>normal left inverted right x axis y axis<span class="o">)</span>
DP3 disconnected <span class="o">(</span>normal left inverted right x axis y axis<span class="o">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Este comando sí me da mayores resoluciones  EN EL DISPLAY Xserver.</p>
</div>
<div class="paragraph">
<p>Referencias:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.linux-fbdev.org/HOWTO/index.html">documentacion oficial</a></p>
</li>
<li>
<p><a href="http://www.rastersoft.com/articulo/fbuffer.html">blog_excelente</a></p>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.linux-fbdev.org/">driver-home fbdev</a></p>
<div class="ulist">
<ul>
<li>
<p><a href="http://en.tldp.org/HOWTO/Framebuffer-HOWTO/index.html">how-to</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><a href="http://klaig.blogspot.com.es/2012/09/setup-fancy-development-environment-on.html">installation-gentoo-blog</a></p>
</li>
<li>
<p><a href="http://en.wikipedia.org/wiki/Linux_framebuffer">wikipedia</a></p>
</li>
<li>
<p><a href="http://www.linux-tutorial.info/modules.php?name=Howto&amp;pagename=Framebuffer-HOWTO/Framebuffer-HOWTO-5.html">tutorial</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Aplicaciones:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://links.twibright.com/user_en.html#subch-running_in_graphics_mode">navegador links</a>: necesita SVGAlib o framebuffer</p>
</li>
<li>
<p><a href="http://en.wikipedia.org/wiki/Links2">navegador links2</a> utiliza DirectFB</p>
</li>
<li>
<p>comando <code>fim</code> :</p>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.autistici.org/dezperado/fim/FIM.html#basics">home</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>DirectFB: permite la aceleración hw a la capa framebuffer.</p>
</li>
<li>
<p><a href="http://asm.sourceforge.net/articles/fb.html#graphics">ENSAMBLADOR-TOPTOP</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_instalacion_fb">18.1.1. instalacion-fb</h4>
<div class="paragraph">
<p><strong>Introduccion</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Creo que es mejor :</p>
<div class="ulist">
<ul>
<li>
<p>Información de la tarjeta gráfica intel i915 (GMA 900):</p>
</li>
<li>
<p>Información de cómo arranca el kernel:</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://wiki.archlinux.org/index.php/Intel" class="bare">https://wiki.archlinux.org/index.php/Intel</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>estudiar GRUB primero: info -f grub -n Simple configuration</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>El kernel ha sido configurado para su compilación con el driver i915 y enabling modesetting (KMS). El KMS es el framebuffer driver del kernel. Si uno de los parámetros del kernel durante el boot del grub es <em>nomodeset</em>, estoy desactivando el framebuffer driver. Cuando arranco ubuntu12.04 observo que durante el arranque se visualiza el mensaje ubuntu (plymouth display), que es la consola en modo gráfico por lo que está activado el driver framebuffer KMS. Esto significa que no necesito instalar ni el módulo framebuffer driver ni el módulo fbcon.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Linux Kernel Configuration: Enabling Intel KMS

Power management and ACPI options  ---&gt;
  [*] ACPI (Advanced Configuration and Power Interface) Support  ---&gt;
     -*-   Button
     -*-   Video
Device Drivers  ---&gt;
  Graphics support  ---&gt;
    &lt;*&gt; /dev/agpgart (AGP Support)
      &lt;*&gt; Intel 440LX/BX/GX, I8xx and E7x05 chipset support
    &lt;*&gt; Direct Rendering Manager (XFree86 4.1.0 and higher DRI support)  ---&gt;
      &lt;*&gt; Intel I810
      &lt;*&gt; Intel 830M, 845G, 852GM, 855GM, 865G (i915 driver)  ---&gt;
        &lt;*&gt; i830 driver
        &lt;*&gt; i915 driver
          [*] Enable modesetting on intel by default</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Parametros de compilación del KERNEL</strong></p>
</div>
<div class="paragraph">
<p><a href="http://linux.koolsolutions.com/2009/11/02/howto-enabling-kernel-mode-setting-kms-in-debian-linux-kernel/">blog_bueno</a></p>
</div>
<div class="paragraph">
<p>acciones del kernel durante el boot relacionadas con el framebuffer driver <em>drm</em></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">candido@lur:~<span class="nv">$ </span><span class="nb">sudo </span>dmesg | <span class="nb">grep </span>drm
<span class="o">[</span><span class="nb">sudo</span><span class="o">]</span> password <span class="k">for </span>candido:
<span class="o">[</span>    3.109396] <span class="o">[</span>drm] Initialized drm 1.1.0 20060810                    <span class="nt">--------------</span><span class="o">&gt;</span> driver framebuffer KMS
<span class="o">[</span>    3.327593] <span class="o">[</span>drm] MTRR allocation failed.  Graphics performance may suffer.
<span class="o">[</span>    3.327897] <span class="o">[</span>drm] Supports vblank timestamp caching Rev 1 <span class="o">(</span>10.10.2010<span class="o">)</span><span class="nb">.</span>
<span class="o">[</span>    3.327898] <span class="o">[</span>drm] Driver supports precise vblank timestamp query.
<span class="o">[</span>    4.114600] fbcon: inteldrmfb <span class="o">(</span>fb0<span class="o">)</span> is primary device   		<span class="nt">-------------</span><span class="o">&gt;</span> framebuffer consola
<span class="o">[</span>    4.390234] fb0: inteldrmfb frame buffer device                      <span class="nt">-------------</span><span class="o">&gt;</span> dispositivo framebuffer
<span class="o">[</span>    4.390235] drm: registered panic notifier
<span class="o">[</span>    4.391895] <span class="o">[</span>drm] Initialized i915 1.6.0 20080730 <span class="k">for </span>0000:00:02.0 on minor 0 <span class="nt">------------</span><span class="o">&gt;</span> driver</code></pre>
</div>
</div>
<div class="paragraph">
<p>Accedo a los drivers de video cargados en el kernel:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh"><span class="nv">$lsmod</span> | <span class="nb">grep </span>video
video                  19596  1 i915   -&gt; driver i915</code></pre>
</div>
</div>
<div class="paragraph">
<p>Accedo a todos los módulos relacionados con el driver i915</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh"><span class="nv">$ </span>lsmod | <span class="nb">grep </span>i915
i915                  473035  3
drm_kms_helper         46978  1 i915
drm                   242038  4 i915,drm_kms_helper
i2c_algo_bit           13423  1 i915
video                  19596  1 i915</code></pre>
</div>
</div>
<div class="paragraph">
<p>Capa SW DRM:Copyright © 2008-2009 Intel Corporation (Jesse Barnes &lt;<a href="mailto:jesse.barnes@intel.com">jesse.barnes@intel.com</a>&gt;). Capa de los drivers.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>The Linux DRM layer contains code intended to support the needs of complex graphics devices, usually containing programmable pipelines well suited to 3D graphics acceleration. Graphics drivers in the kernel can make use of DRM functions to make tasks like memory management, interrupt handling and DMA easier, and provide a uniform interface to applications.</pre>
</div>
</div>
<div class="paragraph">
<p>Info del paquete <em>xserver-xorg-video-intel</em> que tiene los fuentes y objetos de los drivers de intel:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">candido@lur:~<span class="nv">$ </span>dpkg <span class="nt">-s</span> xserver-xorg-video-intel
Package: xserver-xorg-video-intel
Status: <span class="nb">install </span>ok installed
Priority: optional
Section: x11
Installed-Size: 911
Maintainer: Ubuntu Developers &lt;ubuntu-devel-discuss@lists.ubuntu.com&gt;
Architecture: amd64
Version: 2:2.17.0-1ubuntu4.1
Provides: xorg-driver-video
Depends: libc6 <span class="o">(&gt;=</span> 2.15<span class="o">)</span>, libdrm-intel1 <span class="o">(&gt;=</span> 2.4.23-3~<span class="o">)</span>, libdrm2 <span class="o">(&gt;=</span> 2.4.17<span class="o">)</span>, libpciaccess0 <span class="o">(&gt;=</span> 0.8.0+git20071002<span class="o">)</span>, libudev0 <span class="o">(&gt;=</span> 147<span class="o">)</span>, libx11-6, libx11-xcb1, libxcb-dri2-0, libxcb-util0 <span class="o">(&gt;=</span> 0.3.8<span class="o">)</span>, libxcb1, libxv1, libxvmc1, xorg-video-abi-11, xserver-xorg-core <span class="o">(&gt;=</span> 2:1.10.99.901<span class="o">)</span>
Description: X.Org X server <span class="nt">--</span> Intel i8xx, i9xx display driver
 This package provides the driver <span class="k">for </span>the Intel i8xx and i9xx family
 of chipsets, including i810, i815, i830, i845, i855, i865, i915, i945
 and i965 series chips.
 <span class="nb">.</span>
 This package also provides XvMC <span class="o">(</span>XVideo Motion Compensation<span class="o">)</span> drivers
 <span class="k">for </span>i810/i815 and i9xx and newer chipsets.
 <span class="nb">.</span>
 More information about X.Org can be found at:
 &lt;URL:http://www.X.org&gt;
 <span class="nb">.</span>
 This package is built from the X.org xf86-video-intel driver module.
Original-Maintainer: Debian X Strike Force &lt;debian-x@lists.debian.org&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si leemos información original de INTEL, nos dicen que KMS de i915 tiene su propio driver built-int intel_fb y por lo tanto NO HAY QUE CARGAR NINGUN MODULO fb: ni vesafb, ni intelfb, ni xxxxfb, por lo tanto todos los fb en blacklist. Como podemos leer en el <a href="http://lists.freedesktop.org/archives/intel-gfx/2009-January/001153.html">freedesktop</a>.El framedriver propio creo que se llama intedrmfb</p>
</div>
</div>
<div class="sect3">
<h4 id="_intel_driver_inteldrmfb">18.1.2. intel driver inteldrmfb</h4>
<div class="ulist">
<ul>
<li>
<p>He instalado fbset</p>
</li>
<li>
<p>He instalado fim</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_instalaciones_de_fb_que_no_hay_que_realizar">18.2. instalaciones de fb que no hay que realizar</h3>
<div class="paragraph">
<p>Si leemos información original de INTEL, nos dicen que KMS de i915 tiene su propio driver built-int intel_fb y por lo tanto NO HAY QUE CARGAR NINGUN MODULO fb: ni vesafb, ni intelfb, ni xxxxfb, por lo tanto todos los fb en blacklist. Como podemos leer en el <a href="http://lists.freedesktop.org/archives/intel-gfx/2009-January/001153.html">freedesktop</a></p>
</div>
<div class="literalblock">
<div class="content">
<pre>[Intel-gfx] About KMS, FB and Intel drivers
Jesse Barnes jbarnes at virtuousgeek.org
Tue Jan 20 09:57:03 PST 2009

    Previous message: [Intel-gfx] About KMS, FB and Intel drivers
    Next message: [Intel-gfx] About KMS, FB and Intel drivers
    Messages sorted by: [ date ] [ thread ] [ subject ] [ author ]

On Tuesday, January 20, 2009 9:07 am Claudio M. Camacho wrote:
&gt; 1) Is FB (VESA, intelfb, or any other) directly related with KMS? I
&gt; mean, can I completely disable FB support and still run KMS? Or can I
&gt; use VESA FB with 800x600 where my LVDS is 1280x800 and uses the Intel
&gt; graphics?

CONFIG_FB is required for KMS, since the i915 driver uses some functions from
the fb layer.  You don't, however, need to enable any FB drivers when using
KMS, sine the i915 driver has its own builtin framebuffer driver called
intel_fb (not to be confused with the intelfb fb driver :).</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Sigo las instruccion de la web <a href="http://frontseed.com/entry/enable-frambeuffer-ubuntu-karmic-koala-using-grub2">frontseed</a> para ubuntu10.04</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh"><span class="nv">$ </span><span class="nb">sudo </span>nano /etc/initramfs-tools/modules  <span class="p">;</span> añado 2  nuevas líneas :vesafb y fbcon
candido@lur:~<span class="nv">$ </span><span class="nb">sudo </span>update-initramfs <span class="nt">-u</span>
update-initramfs: Generating /boot/initrd.img-3.2.0-31-generic
/<span class="k">*</span>edito la lista negra <span class="k">*</span>/
<span class="nv">$ </span><span class="nb">sudo </span>nano /etc/modprobe.d/blacklist-framebuffer.conf
<span class="c"># Framebuffer drivers are generally buggy and poorly-supported, and cause</span>
<span class="c"># suspend failures, kernel panics and general mayhem.  For this reason we</span>
<span class="c"># never load them automatically.</span>
blacklist aty128fb
blacklist atyfb
blacklist radeonfb
blacklist cirrusfb
blacklist cyber2000fb
blacklist cyblafb
blacklist gx1fb
blacklist hgafb
blacklist i810fb
blacklist intelfb
blacklist kyrofb
blacklist lxfb
blacklist matroxfb_base
blacklist neofb
blacklist nvidiafb
blacklist pm2fb
blacklist rivafb
blacklist s1d13xxxfb
blacklist savagefb
blacklist sisfb
blacklist sstfb
blacklist tdfxfb
blacklist tridentfb
<span class="c">#blacklist vesafb</span>
blacklist vfb
blacklist viafb
blacklist vt8623fb

observo que el módulo vesafb está en la lista negra pero comentado
en cambio intelfb no está comentado. ¿ Esto significa que no pueden coexistir el driver i915 y el framebuffer driver?

<span class="nv">$sudo</span> nano /etc/default/grub
y edito <span class="nv">GRUB_GFXMODE</span><span class="o">=</span>1024x768

<span class="nv">$ </span><span class="nb">sudo </span>nano /etc/grub.d/00_header
después de: <span class="nb">set </span><span class="nv">gfxmode</span><span class="o">=</span><span class="k">${</span><span class="nv">GRUB_GFXMODE</span><span class="k">}</span> añadimos la línea: <span class="nb">set </span><span class="nv">gfxpayload</span><span class="o">=</span>keep

candido@lur:~<span class="nv">$ </span><span class="nb">sudo </span>update-grub2
Generating grub.cfg ...
Found linux image: /boot/vmlinuz-3.2.0-31-generic
Found initrd image: /boot/initrd.img-3.2.0-31-generic
Found linux image: /boot/vmlinuz-3.2.0-30-generic
Found initrd image: /boot/initrd.img-3.2.0-30-generic
Found memtest86+ image: /boot/memtest86+.bin
Found Microsoft Windows XP Professional on /dev/sda1
Found Ubuntu 12.04.1 LTS <span class="o">(</span>12.04<span class="o">)</span> on /dev/sda4
<span class="k">done</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Arrancamos y &#8230;&#8203;..:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>la consola presenta la misma resolución</p>
</li>
<li>
<p>la aplicación fim para abrir una imagen se sale de la pantalla&#8230;&#8203;como antes.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Intento resolver:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Compruebo si el kernel ha cargado el módulo (driver) vesafb:</p>
<div class="ulist">
<ul>
<li>
<p>lsmod</p>
<div class="ulist">
<ul>
<li>
<p>No está el módulo vesafb</p>
</li>
<li>
<p>Está el driver de intel i915:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">video                  19596  1 i915
i915                  473035  3</code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>No se ha cargado durante el arranque:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh"><span class="nb">cat</span> /etc/modules
<span class="c"># /etc/modules: kernel modules to load at boot time.</span>
<span class="c">#</span>
<span class="c"># This file contains the names of kernel modules that should be loaded</span>
<span class="c"># at boot time, one per line. Lines beginning with "#" are ignored.</span>

lp
rtc</code></pre>
</div>
</div>
</li>
<li>
<p>Cargo el módulo vesafb</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh"><span class="nv">$ </span><span class="nb">sudo </span>modprobe vesafb
<span class="o">[</span><span class="nb">sudo</span><span class="o">]</span> password <span class="k">for </span>candido:
FATAL: Error inserting vesafb <span class="o">(</span>/lib/modules/3.2.0-30-generic/initrd/vesafb.ko<span class="o">)</span>: No such device</code></pre>
</div>
</div>
</li>
<li>
<p>localizo los modulos y sus fuentes: no entiendo el error anterior</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh"><span class="nv">$ </span>locate vesafb
/lib/modules/3.2.0-30-generic/initrd/vesafb.ko
/lib/modules/3.2.0-30-generic/kernel/drivers/video/uvesafb.ko
/lib/modules/3.2.0-30-generic/kernel/drivers/video/vesafb.ko
/lib/modules/3.2.0-31-generic/initrd/vesafb.ko
/lib/modules/3.2.0-31-generic/kernel/drivers/video/uvesafb.ko
/lib/modules/3.2.0-31-generic/kernel/drivers/video/vesafb.ko
/usr/include/video/uvesafb.h
/usr/share/doc/fbset/kernel-doc/uvesafb.txt.gz
/usr/share/doc/fbset/kernel-doc/vesafb.txt.gz
/usr/src/linux-3.4.4/Documentation/fb/uvesafb.txt
/usr/src/linux-3.4.4/Documentation/fb/vesafb.txt
/usr/src/linux-3.4.4/drivers/video/uvesafb.c
/usr/src/linux-3.4.4/drivers/video/vesafb.c
/usr/src/linux-3.4.4/include/video/uvesafb.h
/usr/src/linux-headers-3.2.0-30/include/video/uvesafb.h
/usr/src/linux-headers-3.2.0-31/include/video/uvesafb.h</code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>INFORMACION EN cat /usr/src/linux-3.4.4/Documentation/fb/vesafb.txt</p>
</div>
<div class="paragraph">
<p><a href="http://unix.stackexchange.com/questions/33596/no-framebuffer-device-how-to-enable-it">instrucciones</a>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>How Linux Does Its FB.</p>
<div class="literalblock">
<div class="content">
<pre>First you need to have FrameBuffer support in your kernel, corresponding to your hardware. Most modern distributions have support via kernel modules. It does not matter if your distro comes preconfigured with a boot logo, I don't use one and have FB support.</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>It does not matter if you have a dedicated graphics card, integrated will work as long as the Hardware Framebuffer is supported.</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>You don't need X, which is the the most enticing aspect of having the FrameBuffer. Some people don't know better, so they advocated some form of X to workaround their misunderstandings.</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>You don't need to work with the FB directly, which many people incorrectly assume. A very awesome library for developing with FrameBuffer is DirectFB it even has some basic acceleration support. I always suggest at least checking it out, if you are starting a full-featured FB based project (Web Browser, Game, GUI ...)</pre>
</div>
</div>
</li>
<li>
<p>Specific To Your Hardware</p>
<div class="literalblock">
<div class="content">
<pre>Use the Vesa Generic FrameBuffer, its modules is called vesafb. You can load it, if you have it available, with the commands modprobe vesafb. many distributions preconfigure it disabled, you can check in /etc/modprobe.d/. blacklist vesafb might need to be commented out with a #, in a blacklist-framebuffer.conf or other blacklist file.</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>The Best option, is a Hardware specific KMS driver. The main one for Intel is Intel GMA, not sure what its modules are named. You will need to read up about it from your distro documents. This is the best performing FB option, I personally would always go KMS first if possible.</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>Use the Legacy Hardware specific FB Drivers, Not recommended as they are sometimes buggy. I would avoid this option, unless last-resort necessary.</pre>
</div>
</div>
</li>
<li>
<p>I believe this covers all your questions, and should provide the information to get that /dev/fb0 device available.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Ref:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://savvyadmin.com/console-framebuffer-in-ubuntu/" class="bare">http://savvyadmin.com/console-framebuffer-in-ubuntu/</a>: no dice nada nuevo.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_kernel_mode_setting_kms">18.3. Kernel Mode Setting (KMS)</h3>
<div class="paragraph">
<p>Mode Setting : Permite cambiar la resolución y el depth bit de la tarjet gráfica. Se puede realizar tanto en modo kernel (proceso de arranque)
o en modo usuario.</p>
</div>
<div class="paragraph">
<p>Al arrancar linux, el kernel por defecto activa este modo para mejorar la resolución de la pantalla. Es necesario que la tarjeta gráfica
soporte este servicio. Las tarjetas gráficas de Intel y Radeon lo soportan, en cambio Nvidia NO.</p>
</div>
<div class="paragraph">
<p>Nvidia no libera sus drives y por eso Nouveau intenta mediante ingeniería inversa dar una alternativa, aunque no siempre lo consigue.</p>
</div>
<div class="paragraph">
<p>En el caso de que nuestra tarjeta Nvidia no soporte KMS, será necesario arrancar el kernel con el Mode Set desactivado &#8594; opción del kernel <em>nomodeset</em></p>
</div>
<div class="paragraph">
<p>Necesito información de cómo configurar el driver KMS:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://wiki.debian.org/KernelModesetting" class="bare">http://wiki.debian.org/KernelModesetting</a></p>
</li>
</ul>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
En mi /boot/grub/grub.cfg pone: linux /boot/vmlinuz-3.2.0-30-generic root=UUID=000ad957-c3cd-4249-8113-c7bec319ee40 ro quiet splash $vt_handoff. Qué es vt_handoff?
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_referencias_3">18.3.1. Referencias</h4>
<div class="ulist">
<ul>
<li>
<p><a href="https://help.ubuntu.com/">ubuntu oficial</a></p>
</li>
<li>
<p>KMS (Kernel Mode Setting):</p>
<div class="ulist">
<ul>
<li>
<p><a href="http://wiki.debian.org/KernelModesetting" class="bare">http://wiki.debian.org/KernelModesetting</a></p>
</li>
<li>
<p><a href="http://en.gentoo-wiki.com/wiki/Kernel_Mode_Setting" class="bare">http://en.gentoo-wiki.com/wiki/Kernel_Mode_Setting</a></p>
</li>
<li>
<p><a href="http://en.wikipedia.org/wiki/Mode_setting" class="bare">http://en.wikipedia.org/wiki/Mode_setting</a></p>
</li>
<li>
<p><a href="http://nouveau.freedesktop.org/wiki/KernelModeSetting" class="bare">http://nouveau.freedesktop.org/wiki/KernelModeSetting</a></p>
</li>
<li>
<p><a href="http://www.x.org/wiki/ModeSetting" class="bare">http://www.x.org/wiki/ModeSetting</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_nvidia">18.3.2. NVIDIA</h4>
<div class="paragraph">
<p>El propietario de una tarjeta nvidia cambia el nomodeset in my /etc/default/grub file. I changed that to modeset. Now I have a better looking terminal:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Correct framebuffer settings for native FB resolution for my NV 550 Ti.</p>
</li>
<li>
<p>GRUB_CMDLINE_LINUX_DEFAULT="quiet splash modeset video=uvesafb:mode_option=1280x800-24,mtrr=3,scroll=ywrap"</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_network">19. Network</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_wifi">19.1. wifi</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://wiki.debian.org/iwlwifi">iwlwifi</a></p>
<div class="ulist">
<ul>
<li>
<p>The iwlwifi Linux kernel driver supports several Intel wireless LAN adapters</p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="https://wireless.wiki.kernel.org/en/developers/documentation/cfg80211" class="bare">https://wireless.wiki.kernel.org/en/developers/documentation/cfg80211</a></p>
<div class="ulist">
<ul>
<li>
<p>cfg80211 is the Linux 802.11 configuration API</p>
</li>
<li>
<p>All new Linux wireless drivers should be written targeting either cfg80211 for fullmac devices or mac80211 for softmac devices</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>modinfo iwlwifi</code></p>
<div class="ulist">
<ul>
<li>
<p>/lib/modules/3.2.0-92-generic/kernel/drivers/net/wireless/iwlwifi/iwlwifi.ko</p>
</li>
<li>
<p>Intel&#174; Wireless WiFi Link AGN driver for Linux</p>
</li>
<li>
<p>depends:        mac80211,cfg80211</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_bios">20. BIOS</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_refs_4">20.1. refs</h3>
<div class="ulist">
<ul>
<li>
<p>site:cyberciti.biz/tips bios linux</p>
</li>
<li>
<p><a href="https://www.cyberciti.biz/faq/linux-check-bios-settings-from-the-command-line/" class="bare">https://www.cyberciti.biz/faq/linux-check-bios-settings-from-the-command-line/</a></p>
</li>
<li>
<p><a href="https://www.cyberciti.biz/faq/check-bios-version-linux/" class="bare">https://www.cyberciti.biz/faq/check-bios-version-linux/</a></p>
</li>
<li>
<p><a href="https://www.cyberciti.biz/faq/linux-check-bios-settings-from-the-command-line/?utm_source=Related_Tutorials&amp;utm_medium=faq&amp;utm_campaign=Apr_22_2022_EOP_TEXT" class="bare">https://www.cyberciti.biz/faq/linux-check-bios-settings-from-the-command-line/?utm_source=Related_Tutorials&amp;utm_medium=faq&amp;utm_campaign=Apr_22_2022_EOP_TEXT</a></p>
</li>
<li>
<p><a href="https://www.cyberciti.biz/faq/update-lenovo-bios-from-linux-usb-stick-pen/?utm_source=Related_Tutorials&amp;utm_medium=faq&amp;utm_campaign=Apr_22_2022_EOP_TEXT" class="bare">https://www.cyberciti.biz/faq/update-lenovo-bios-from-linux-usb-stick-pen/?utm_source=Related_Tutorials&amp;utm_medium=faq&amp;utm_campaign=Apr_22_2022_EOP_TEXT</a></p>
</li>
<li>
<p><a href="https://www.cyberciti.biz/faq/whatis-maximum-ram-supported-by-linux-server-computer-system/" class="bare">https://www.cyberciti.biz/faq/whatis-maximum-ram-supported-by-linux-server-computer-system/</a></p>
</li>
<li>
<p><a href="https://www.cyberciti.biz/tips/howto-flash-your-system-bios-under-linux.html" class="bare">https://www.cyberciti.biz/tips/howto-flash-your-system-bios-under-linux.html</a></p>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.thinkwiki.org/wiki/BIOS_Upgrade" class="bare">https://www.thinkwiki.org/wiki/BIOS_Upgrade</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>site:cyberciti.biz/  bios source</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.cyberciti.biz/tips/open-bioses-for-linux.html" class="bare">https://www.cyberciti.biz/tips/open-bioses-for-linux.html</a></p>
<div class="ulist">
<ul>
<li>
<p>LinuxBIOS and Open Firmware</p>
</li>
<li>
<p><a href="https://es.wikipedia.org/wiki/Coreboot" class="bare">https://es.wikipedia.org/wiki/Coreboot</a> &#8594; coreboot</p>
</li>
<li>
<p><a href="https://www.openfirmware.info/Open_Firmware" class="bare">https://www.openfirmware.info/Open_Firmware</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>qemu</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.openfirmware.info/Building_OFW_for_QEMU" class="bare">https://www.openfirmware.info/Building_OFW_for_QEMU</a></p>
</li>
<li>
<p><a href="https://github.com/openbios/openfirmware" class="bare">https://github.com/openbios/openfirmware</a></p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="http://www.bioscentral.com/misc/bda.html" class="bare">http://www.bioscentral.com/misc/bda.html</a> &#8594; contenido de la bios</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_books">20.1.1. books</h4>
<div class="ulist">
<ul>
<li>
<p>googling: bios programming book</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://freecomputerbooks.com/BIOS-Disassembly-Ninjutsu-Uncovered.html">BIOS Disassembly Ninjutsu Uncovered</a> descargado en el movil</p>
</li>
<li>
<p><a href="https://www.amazon.com/PC-Interrupts-Programmers-Reference-Third-Party/dp/0201624850" class="bare">https://www.amazon.com/PC-Interrupts-Programmers-Reference-Third-Party/dp/0201624850</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_aplicaciones">20.1.2. aplicaciones</h4>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.lulu.com/shop/oscar-toledo-gutierrez/toledo-nanochess-the-commented-source-code/hardcover/product-21429040.html?page=1&amp;pageSize=4" class="bare">https://www.lulu.com/shop/oscar-toledo-gutierrez/toledo-nanochess-the-commented-source-code/hardcover/product-21429040.html?page=1&amp;pageSize=4</a></p>
<div class="ulist">
<ul>
<li>
<p><a href="https://nanochess.org/" class="bare">https://nanochess.org/</a> &#8594; <a href="https://nanochess.org/chess.html" class="bare">https://nanochess.org/chess.html</a> &#8594; asm, C, javascript, qemu</p>
</li>
<li>
<p><a href="https://nanochess.org/chess6.html" class="bare">https://nanochess.org/chess6.html</a> &#8594; nasm, qemu</p>
<div class="listingblock">
<div class="content">
<pre>Download toledo_atomchess.zip
cd ~/Deskargak
unzip -d toledo_chess toledo_atomchess.zip
cd ~/Deskargak/toledo_chess
qemu-system-x86_64 -hda toledo_atomchess_disk.bin
¿ y el manual de usuario ? -&gt; ¿habrá que descargarse el librito del código fuente comentado?</pre>
</div>
</div>
</li>
<li>
<p><a href="https://github.com/nanochess/Toledo-Atomchess" class="bare">https://github.com/nanochess/Toledo-Atomchess</a></p>
</li>
<li>
<p>español &#8594; tienda &#8594; <a href="https://nanochess.org/store_es.html" class="bare">https://nanochess.org/store_es.html</a></p>
<div class="ulist">
<ul>
<li>
<p>Toledo Nanochess: The commented source code (ebook). Ahora por primera vez se publica el código fuente completo documentado. También incluye el código fuente documentado de mi ajedrez &#8594; nasm</p>
</li>
<li>
<p>Programming Boot Sector Games (eBook). Un curso rápido de programación en ensamblador 8086/8088, en una forma sencilla con prácticas a cada paso. Aprenderá como usar los registros, mover datos, hacer aritmética, y manejar texto y gráficos. Puede ejecutar estos programas en cualquier PC compatible ¡y ninguno excede 512 bytes de código ejecutable! &#8594; <a href="https://www.lulu.com/shop/oscar-toledo-gutierrez/programming-boot-sector-games/paperback/product-24188564.html?page=1&amp;pageSize=4" class="bare">https://www.lulu.com/shop/oscar-toledo-gutierrez/programming-boot-sector-games/paperback/product-24188564.html?page=1&amp;pageSize=4</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><a href="https://crocidb.com/post/bootsector-game/" class="bare">https://crocidb.com/post/bootsector-game/</a></p>
<div class="ulist">
<ul>
<li>
<p>emulación con dosbox y con qemu</p>
</li>
<li>
<p>enlaces wikipedia <a href="https://en.wikipedia.org/wiki/BIOS_color_attributes" class="bare">https://en.wikipedia.org/wiki/BIOS_color_attributes</a>,  <a href="https://en.wikipedia.org/wiki/BIOS_interrupt_call" class="bare">https://en.wikipedia.org/wiki/BIOS_interrupt_call</a></p>
</li>
<li>
<p><a href="https://crocidb.github.io/retro2048/" class="bare">https://crocidb.github.io/retro2048/</a> &#8594; javascript</p>
<div class="ulist">
<ul>
<li>
<p>a clone of the new classic 2048 game, written in 8086 assembly for DOS and the bootsector</p>
</li>
<li>
<p><a href="https://github.com/CrociDB/retro2048/blob/3a81340887bb062c7721fd974a8ce441fc950f5d/main.asm#L213">full source code</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><a href="https://github.com/daniel-e/tetros" class="bare">https://github.com/daniel-e/tetros</a> &#8594; tetris</p>
<div class="ulist">
<ul>
<li>
<p>link a un chess &#8594; <a href="http://olivier.poudade.free.fr/src/BootChess.asm" class="bare">http://olivier.poudade.free.fr/src/BootChess.asm</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_intro">20.2. Intro</h3>
<div class="ulist">
<ul>
<li>
<p>Basic Input Output System</p>
</li>
<li>
<p>Está siendo sustituida por el sistema UEFI ó EFI</p>
</li>
<li>
<p>sudo biosdecode ¿?</p>
</li>
<li>
<p>man dmidecode</p>
<div class="listingblock">
<div class="content">
<pre>DMI table decoder
/sys/firmware/dmi/tables
SMBIOS  stands  for  System Management BIOS, while DMI stands for Desktop Management Interface
types
  0 -&gt; bios info -&gt; dmidecode -t 0 ,es decir, type bios, es decir, info de la entrada de la tabla relativa a la info de la propia bios
  5 -&gt; memory controller  -&gt; no da info -&gt; info memo la 17

  7 -&gt; cache memory


Handle code-&gt; code hace referencia a una de las entradas de la tabla, por ejemplo:  Handle 0x0002, DMI type 7, 19 bytes significa que esa entrada
              es la referenciada como 0x0002, lontitud 19Bytes, tipo 7 -&gt; es la cache level 1 data.</pre>
</div>
</div>
</li>
<li>
<p><a href="https://www.kernel.org/doc/Documentation/ABI/testing/sysfs-firmware-dmi-entries" class="bare">https://www.kernel.org/doc/Documentation/ABI/testing/sysfs-firmware-dmi-entries</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_biosdecode">20.3. biosdecode</h3>
<div class="paragraph">
<p>proporciona información que tiene la BIOS de distintos tipos de estructuras del sistema</p>
</div>
<div class="paragraph">
<p>info biosdecode</p>
</div>
</div>
<div class="sect2">
<h3 id="_dmidecode">20.4. dmidecode</h3>
<div class="paragraph">
<p>Desktop Manager Interfaz(DMI): antiguo nombre (hasta 2003) de la plataforma para gestionar la información especificada por el fabricante del ordenador (Pej Lenovo) en la EEPROM BIOS.</p>
</div>
<div class="paragraph">
<p>SMBios(SystemMangementBios): nombre actual del antiguo DMI.</p>
</div>
<div class="paragraph">
<p>SMBios esta descrito por la asociación DMTF donde podemos descargar las <a href="http://dmtf.org/standards/smbios">especificaciones</a>. A través de las especificaciones podemos escribir programas en lenguaje C o ensamblador para acceder a la información de la bios.</p>
</div>
<div class="paragraph">
<p>En la memoria Flash de la Bios hay información manegable por el usuario como es la info relativa a la configuración del sistema y otro tipo de información escrita por los fabricantes de HW en una tabla en formato <a href="http://en.wikipedia.org/wiki/System_Management_BIOS">SMBios</a>.</p>
</div>
<div class="paragraph">
<p>Los fabricantes de HW proporcionan información que se graba en la BIOS. Dicha información resulta a veces díficil de encontrar por otros medios. En el <a href="http://archive09.linux.com/articles/40412?page=2">articulo</a> del año 2004 nos dicen que la información que los fabricantes graban en la BIOS NO es fiable y puede resultar falsa en parte.</p>
</div>
<div class="paragraph">
<p>Hay comandos como <em>sudo lshw -X</em> que posiblemente recurran a la bios para tener info del HW, por lo que no scanean directamente el hardware sino que vuelcan la informacion proporcionada por el fabricante del ordenador a la BIOS.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_uefi">21. UEFI</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://iq.opengenus.org/uefi-and-legacy-boot/" class="bare">https://iq.opengenus.org/uefi-and-legacy-boot/</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_acpi">22. ACPI</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_refs_5">22.1. refs</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://01.org/linuxgraphics/gfx-docs/drm/firmware-guide/acpi/index.html" class="bare">https://01.org/linuxgraphics/gfx-docs/drm/firmware-guide/acpi/index.html</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_acpi_vs_dtb">22.2. acpi vs DTB</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://stackoverflow.com/questions/32310935/difference-between-dts-and-acpi" class="bare">https://stackoverflow.com/questions/32310935/difference-between-dts-and-acpi</a></p>
<div class="listingblock">
<div class="content">
<pre>ACPI tables are located in the firmware.
 On x86 the kernel takes all the platform information from ACPI tables that are provided by the firmware (

* Durante el arranque el kernel utiliza dtb o acpi ¿dtb?

Not completely correct:

ACPI started as an interface between firmware (formerly BIOS) and OS for things like power management, but also things like platform device probing
DT was always (even long before ACPI existed) about declarative platform device descriptions (probing and configuration), so the OS can properly initialize all drivers, configure operation points, etc, etc.
ACPI was always very limited in scope and depends on firmware, while DT stands on its own (just requires the bootloader to pass the right dtb to the kernel).

ACPI is the unprofessional, hackish attempt of bios and board vendors to solve a small subset of the problems that DT already solved long ago. A major pro argument for those gallows-wearing folks probably is that ACPI/BIOS hides lots of low level configuration stuff (up to runtime device programming, eg. for power management) in the firmware blob, thus preventing the OS kernel to have full control over the machine. (which finally leads to things like broken machines by broken BIOS, etc). We, the kernel developers, often have to work around crappy BIOSes.

My strong advice: get of ACPI when you can.</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_consumo">23. Consumo</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Power</p>
</li>
<li>
<p><a href="https://www.intel.com/content/www/us/en/developer/articles/tool/power-gadget.html" class="bare">https://www.intel.com/content/www/us/en/developer/articles/tool/power-gadget.html</a></p>
</li>
<li>
<p><code>cpupower</code></p>
<div class="ulist">
<ul>
<li>
<p>sudo apt-get install linux-tools-5.4.0-131-generic</p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="https://documentation.suse.com/es-es/sles/15-SP1/html/SLES-all/cha-tuning-power.html" class="bare">https://documentation.suse.com/es-es/sles/15-SP1/html/SLES-all/cha-tuning-power.html</a> &#8594; muy bueno</p>
<div class="ulist">
<ul>
<li>
<p>man cpupower</p>
</li>
<li>
<p>cpupower --help</p>
</li>
<li>
<p><code>cpupower -c all monitor</code></p>
</li>
<li>
<p><code>sudo cpupower -c all frequency-info</code></p>
</li>
<li>
<p>man cpupower-TAB</p>
</li>
<li>
<p>man cpupower-monitor</p>
<div class="ulist">
<ul>
<li>
<p><code>sudo cpupower monitor -l</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>powertop</p>
<div class="ulist">
<ul>
<li>
<p><code>sudo powertop monitor</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Física</p>
<div class="listingblock">
<div class="content">
<pre>Trabajo de una fuerza en paralelo con lo que mueve=F*dx=Energía=Julios
Potencia=dE/dt
Potencia*dt=dE
Una bombilla de 60W en una hora consume energía -&gt; 60Wh -&gt; 60x3600 joule
1Wh=3600Wseg=3600Joule

i=dq/dt
Potencia=v*i=v*dq/dt
Energia=Potencia*dt= v*dq -&gt; capacidad batería=la energía que proporciona una batería equivale a carga proporcionada
si una batería proporciona energía a la velocidad dE/dt=Potencia el tiempo de vida de la batería es la capacidad_bateria/energy_rate = Potencia*dt/Potencia=dt</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_measure_performance_benchmark">24. Measure Performance Benchmark</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_references">24.1. References</h3>
<div class="sect3">
<h4 id="_ingeniero">24.1.1. ingeniero</h4>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.brendangregg.com/" class="bare">https://www.brendangregg.com/</a></p>
<div class="ulist">
<ul>
<li>
<p>Systems Performance: Enterprise and the Cloud, 2nd Edition (2020)</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_web">24.1.2. web</h4>
<div class="ulist">
<ul>
<li>
<p><a href="https://en.wikipedia.org/wiki/Computer_performance" class="bare">https://en.wikipedia.org/wiki/Computer_performance</a></p>
</li>
<li>
<p><a href="https://en.wikipedia.org/wiki/Benchmark_%28computing%29" class="bare">https://en.wikipedia.org/wiki/Benchmark_%28computing%29</a></p>
</li>
<li>
<p><a href="file:///media/Documentation/Escritorio/programming_informatica/performance/">local</a>:books</p>
</li>
<li>
<p>Seltzer</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.usenix.org/legacy/event/lisa/cfp/seltzer.pdf" class="bare">https://www.usenix.org/legacy/event/lisa/cfp/seltzer.pdf</a></p>
</li>
<li>
<p><a href="http://www.scs.stanford.edu/~dm/home/papers/chen:p5-sosp.pdf" class="bare">http://www.scs.stanford.edu/~dm/home/papers/chen:p5-sosp.pdf</a></p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="http://www.eembc.org/techlit/whitepaper.php" class="bare">http://www.eembc.org/techlit/whitepaper.php</a></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_book_2">24.1.3. book</h4>
<div class="ulist">
<ul>
<li>
<p>Measuring Computer Performance: A Practitioner’s Guide By David J. Lilja . Publisher: Cam.bridge University Press 2000 | 278 Pages | ISBN: 0521641055 | File type: PDF | 2 mb</p>
</li>
<li>
<p>Fundamentals of Performance Evaluation of Computer and Telecommunications</p>
</li>
<li>
<p>Systems Performance: Enterprise and the Cloud, 2nd Edition (2020).</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_openbenchmarking">24.2. openbenchmarking</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://openbenchmarking.org/s/Intel+Core+i5-6300U" class="bare">https://openbenchmarking.org/s/Intel+Core+i5-6300U</a></p>
<div class="listingblock">
<div class="content">
<pre>The Intel Core i5-6300U is a 2 core and 4 thread processor configuration with 3GHz clock speed and 3MB L3 cache. The Intel Core i5-6300U is a "Skylake" processor. Some of the prominent capabilities of the processor include SSE 4.2 + AVX + AVX2 + AES + Intel VT-x + FMA + RdRand + FSGSBASE + BMI2. This processor has been found on OpenBenchmarking.org since Q3'2016 and found in approximately 1,497 results on OpenBenchmarking.org.</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://openbenchmarking.org/test/pts/phpbench" class="bare">https://openbenchmarking.org/test/pts/phpbench</a></p>
<div class="listingblock">
<div class="content">
<pre>COMPONENT	        PERCENTILE RANK	  # COMPATIBLE PUBLIC RESULTS	SCORE (AVERAGE)
Intel Core i5-6300U	69th	          4	                        439507 +/- 33277</pre>
</div>
</div>
</li>
<li>
<p>habría que registrarse, ejecutar los tests y publicar el resultado.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_introduction">24.3. Introduction</h3>
<div class="ulist">
<ul>
<li>
<p><a href="http://bapco.com/products/sysmark-2014" class="bare">http://bapco.com/products/sysmark-2014</a></p>
<div class="ulist">
<ul>
<li>
<p>Propietario.</p>
</li>
<li>
<p>AMD and Nvidia quit SySmark benchmark group, dejando solo a intel.</p>
</li>
<li>
<p>Lo utiliza <a href="http://www.xbitlabs.com/articles/cpu/display/intel-haswell-refresh_3.html#sect0" class="bare">http://www.xbitlabs.com/articles/cpu/display/intel-haswell-refresh_3.html#sect0</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_linux">24.4. Linux</h3>
<div class="sect3">
<h4 id="_cpu_2">24.4.1. cpu</h4>
<div class="ulist">
<ul>
<li>
<p><a href="https://romanrm.net/dd-benchmark" class="bare">https://romanrm.net/dd-benchmark</a>: testea la CPU con el procesamiento md5sum y la velocidad de DISCO con dd</p>
<div class="ulist">
<ul>
<li>
<p><code>dd if=/dev/zero bs=1M count=512 | md5sum</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_disk">24.4.2. disk</h4>
<div class="ulist">
<ul>
<li>
<p><a href="https://romanrm.net/dd-benchmark" class="bare">https://romanrm.net/dd-benchmark</a></p>
</li>
<li>
<p><a href="https://www.cyberciti.biz/faq/howto-linux-unix-test-disk-performance-with-dd-command/" class="bare">https://www.cyberciti.biz/faq/howto-linux-unix-test-disk-performance-with-dd-command/</a></p>
<div class="listingblock">
<div class="content">
<pre>Use the dd command to measure server throughput (write speed):
dd if=/dev/zero of=/tmp/test1.img bs=1G count=1 oflag=dsync
We can also use the dd command to measure server latency:
dd if=/dev/zero of=/tmp/test2.img bs=512 count=1000 oflag=dsync</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_consumo_bateria">24.4.3. consumo bateria</h4>
<div class="ulist">
<ul>
<li>
<p>watch</p>
<div class="literalblock">
<div class="content">
<pre>watch 'upower -d | grep "energy-rate\|energy:"'</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>watch  ejecuta el comando de forma periódica</p>
</li>
<li>
<p>upower mide la batería</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_phoronix">24.4.4. phoronix</h4>
<div class="ulist">
<ul>
<li>
<p><a href="http://lbs.sourceforge.net/" class="bare">http://lbs.sourceforge.net/</a></p>
</li>
<li>
<p><a href="http://www.howtoforge.com/how-to-benchmark-your-system-cpu-file-io-mysql-with-sysbench">sysbench</a></p>
</li>
<li>
<p>pruebas en disco con: DD, hdparm, iozone, etc.</p>
</li>
<li>
<p><a href="http://openbenchmarking.org/" class="bare">http://openbenchmarking.org/</a></p>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.phoronix-test-suite.com/">Phoronix Test Suite</a>: test con aplicaciones</p>
<div class="ulist">
<ul>
<li>
<p><a href="http://javierin.com/2014/12/04/medir-el-rendimiento-en-linux/" class="bare">http://javierin.com/2014/12/04/medir-el-rendimiento-en-linux/</a></p>
</li>
<li>
<p><code>git clone <a href="https://github.com/phoronix-test-suite/phoronix-test-suite.git" class="bare">https://github.com/phoronix-test-suite/phoronix-test-suite.git</a></code></p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">candido@lur:~/git_repos/phoronix-test-suite<span class="nv">$ </span><span class="nb">ls
</span>AUTHORS  CHANGE-LOG  COPYING  documentation  install-sh  phoronix-test-suite  phoronix-test-suite.bat  pts-core  README</code></pre>
</div>
</div>
</li>
<li>
<p>En la carpeta documentation leemos la info sobre instalacion y utilizacion</p>
</li>
<li>
<p><a href="http://www.phoronix-test-suite.com/?k=documentation" class="bare">http://www.phoronix-test-suite.com/?k=documentation</a></p>
<div class="ulist">
<ul>
<li>
<p>Running <code>sudo ./install-sh</code> from the root directory of the Phoronix Test Suite will install the software for system-wide access. By default the <code>phoronix-test-suite</code> executable is in <em>/usr/bin/</em>, the Phoronix Test Suite files in <em>/usr/share/phoronix-test-suite/</em>, and the documentation in <em>/usr/share/doc/phoronix-test-suite/</em>: <a href="file:///home/candido/git_repos/phoronix-test-suite/documentation/phoronix-test-suite.html">local documentation</a>. Root access is required. The default installation prefix is /usr/ but can be adjusted as the first argument (example: install-sh /home/user/ to install the Phoronix Test Suite in your home directory).</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>man phoronix-test-suite</code></p>
</li>
<li>
<p>comandos</p>
<div class="ulist">
<ul>
<li>
<p><code>phoronix-test-suite system-info</code></p>
</li>
<li>
<p><code>phoronix-test-suite detailed-system-info</code></p>
</li>
<li>
<p><code>phoronix-test-suite list-tests</code> :available tests</p>
</li>
<li>
<p><code>phoronix-test-suite  list-installed-tests</code>: Phoronix Test Suite v5.4.0m1 0 Tests Installed</p>
</li>
<li>
<p><code>phoronix-test-suite info systemd-boot-total</code>: informacion detallada de un test particular, en este caso del test systemd-boot-total</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">Phoronix Test Suite v5.4.0m1
Systemd Total Boot Time

Run Identifier: pts/systemd-boot-total-1.0.1
Profile Version: 1.0.1
Maintainer: Jim Kukunas
Test Type: Processor
Software Type: Utility
License Type:
Test Status:
Project Web-Site:

Description: This <span class="nb">test </span>uses systemd-analyze to report the entire boot time.

Test Installed: No</code></pre>
</div>
</div>
</li>
<li>
<p><code>phoronix-test-suite benchmark battery-power-usage</code></p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">INSTALA 3 <span class="nb">test </span>suites y una da errorrrr

    To Install: pts/mplayer-base-1.3.0

    To Install: pts/video-sample-1.0.0  <span class="nt">--------</span><span class="o">&gt;</span> ERROR -&gt;
ERROR: /usr/lib/gcc/x86_64-linux-gnu/4.6/../../../../lib/libvga.a<span class="o">(</span>vesa.o<span class="o">)</span>:<span class="o">(</span>.text+0x4f5<span class="o">)</span>: more undefined references to <span class="sb">`</span>LRMI_int<span class="s1">' follow
            LOG: ~/.phoronix-test-suite/installed-tests/pts/mplayer-base-1.3.0/install-failed.log

    To Install: pts/battery-power-usage-1.0.0
</span></code></pre>
</div>
</div>
</li>
<li>
<p>Se ejecuta y pide confirmación si queremos salvar el resultado y también pide palabras de descripción del test. Tarda 3 minutos en realizar le test. Pregunta si quiero ver el resultado en el navegador y si quiero subir el resultado a la web del server openbenchmark.org . Resultado en fichero local <a href="file:///home/candido/.phoronix-test-suite/test-results/testbateriatxt/composite.xml" class="bare">file:///home/candido/.phoronix-test-suite/test-results/testbateriatxt/composite.xml</a> y en el web openbenchmark <a href="http://openbenchmarking.org/result/1502072-LI-TESTBATER97">test battery result</a>. VEr <a href="http://openbenchmarking.org/test/pts/battery-power-usage" class="bare">http://openbenchmarking.org/test/pts/battery-power-usage</a>: See how your system performs with this test using the Phoronix Test Suite. It&#8217;s as easy as runnning the phoronix-test-suite benchmark pts/systemd-boot-total comand. If the Phoronix Test Suite is already installed with the OpenBenchmarking MIME support enabled, you can also run this test by just <strong>clicking on the OpenBenchmarking.org icon</strong> to auto-launch the Phoronix Test Suite. Probamos a hacer click y también lo ejecuta abriendo un terminal.</p>
</li>
<li>
<p><code>phoronix-test-suite benchmark systemd-boot-total</code>: debe instalar un test particular (systemd-boot-total) y lo ejecuta. Da error warning:
pts/systemd-boot-total-1.0.1: Systemd is required for this test.   Not Supported: pts/systemd-boot-total-1.0.1</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh"><span class="k">****</span> +sudo phoronix-test-suite  <span class="nb">install </span>systemd-boot-total+ :pts/systemd-boot-total-1.0.1: Systemd is required <span class="k">for </span>this test.
<span class="k">****</span> +sudo phoronix-test-suite  install-dependencies systemd-boot-total+ : pts/systemd-boot-total-1.0.1: Systemd is required <span class="k">for </span>this test.
<span class="k">****</span> +phoronix-test-suite list-installed-dependencies+
<span class="k">****</span> +phoronix-test-suite list-possible-dependencies+
<span class="k">****</span> +phoronix-test-suite list-missing-dependencies+: lista 22 de las 65 pero no aparece systemd
<span class="k">****</span> systemd es un daemon
<span class="k">****</span> +~/git_repos/phoronix-test-suite<span class="nv">$ </span>git pull+ Already up-to-date.
<span class="k">***</span> http://openbenchmarking.org/test/pts/systemd-boot-total</code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>hardinfo</p>
</li>
<li>
<p>GtkPerf</p>
</li>
<li>
<p><a href="https://code.google.com/p/likwid/" class="bare">https://code.google.com/p/likwid/</a></p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">likwid-topology: Show the thread and cache topology
likwid-perfctr: Measure hardware performance counters on Intel and AMD processors
likwid-features: Show and Toggle hardware prefetch control bits on Intel Core 2 processors
likwid-pin: Pin your threaded application without touching your code <span class="o">(</span>supports pthreads, Intel OpenMP and gcc OpenMP<span class="o">)</span>
likwid-bench: Benchmarking framework allowing rapid prototyping of threaded assembly kernels
likwid-mpirun: Script enabling simple and flexible pinning of MPI and MPI/threaded hybrid applications
likwid-perfscope: Frontend <span class="k">for </span>likwid-perfctr timeline mode. Allows live plotting of performance metrics.
likwid-powermeter: Tool <span class="k">for </span>accessing RAPL counters and query Turbo mode steps on Intel processor.
likwid-memsweeper: Tool to cleanup ccNUMA memory domains and force eviction of dirty cachelines from caches.
likwid-setFrequencies: Tool to <span class="nb">set </span>specific processor frequencies.</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_windows">24.5. Windows</h3>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.sisoftware.co.uk/">sisoft sandra</a>: windows</p>
</li>
<li>
<p><a href="http://www.maxon.net/products/cinebench/overview.html">maxon cinebench</a>: windows</p>
</li>
<li>
<p><a href="http://www.futuremark.com/benchmarks/pcmark8">futuremark pcmark</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_ejemplos">24.6. Ejemplos</h3>
<div class="ulist">
<ul>
<li>
<p>Sintéticos</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://en.wikipedia.org/wiki/Dhrystone" class="bare">https://en.wikipedia.org/wiki/Dhrystone</a></p>
</li>
<li>
<p><a href="https://en.wikipedia.org/wiki/Whetstone_%28benchmark%29" class="bare">https://en.wikipedia.org/wiki/Whetstone_%28benchmark%29</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_optimization_2">25. Optimization</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_benchmark_2">25.1. benchmark</h3>
<div class="sect3">
<h4 id="_programas">25.1.1. programas</h4>
<div class="ulist">
<ul>
<li>
<p><code>time top</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_boot">25.1.2. boot</h4>
<div class="ulist">
<ul>
<li>
<p><code>sudo systemd-analyze</code></p>
<div class="listingblock">
<div class="content">
<pre>Startup finished in 36.415s (kernel) + 2min 23.135s (userspace) = 2min 59.550s
graphical.target reached after 2min 23.105s in userspace</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>ha tardado 3 minutos en arrancar</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_disk_2">25.1.3. disk</h4>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.linux-magazine.com/Online/Features/Tune-Your-Hard-Disk-with-hdparm" class="bare">https://www.linux-magazine.com/Online/Features/Tune-Your-Hard-Disk-with-hdparm</a></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_cached">25.1.4. cached</h4>
<div class="ulist">
<ul>
<li>
<p><a href="https://sites.google.com/site/tfsidc/linux-tricks/processing-a-large-number-of-files" class="bare">https://sites.google.com/site/tfsidc/linux-tricks/processing-a-large-number-of-files</a></p>
<div class="ulist">
<ul>
<li>
<p>si accedo a un fichero está se queda en la cache y el siguiente acceso es más rápido</p>
</li>
<li>
<p>con este comando ls | xargs -n 32 -P 8 cat &gt; /dev/null accedo a todos los ficheros de una carpeta y por lo tanto quedan en cached</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_virtual_memory_2">25.1.5. virtual memory</h4>
<div class="ulist">
<ul>
<li>
<p><a href="https://discuss.aerospike.com/t/how-to-tune-the-linux-kernel-for-memory-performance/4195" class="bare">https://discuss.aerospike.com/t/how-to-tune-the-linux-kernel-for-memory-performance/4195</a></p>
<div class="listingblock">
<div class="content">
<pre>Fine-tuning these parameters is dependant upon the current utilization. For Aerospike, it should be at least 1.1GB free in min_free_kbytes, if the available system memory allows. This means that caches will still operate sufficiently, while leaving a margin for applications to allocate into. The standard RedHat recommendation 365 is to keep min_free_kbytes at 1-3% of the total memory on the system,</pre>
</div>
</div>
</li>
<li>
<p><code>cat /proc/sys/vm/min_free_kbytes</code> &#8594; 67584</p>
<div class="ulist">
<ul>
<li>
<p><code>echo NUMBER &gt; /proc/sys/vm/min_free_kbytes</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>For low-latency operations, using swap to any extent will drastically slow down performance. To set the swappiness to 0 to reduce potential latency</p>
</li>
<li>
<p><code>cat /proc/sys/vm/swappiness</code> &#8594; 60</p>
<div class="ulist">
<ul>
<li>
<p><code>echo 0 &gt; /proc/sys/vm/swappiness</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>permanent changes &#8594; /etc/sysctl.conf</p>
<div class="listingblock">
<div class="content">
<pre>vm.min_free_kbytes = 1153434
vm.swappiness = 0</pre>
</div>
</div>
</li>
<li>
<p>vacio buffer y cached</p>
<div class="ulist">
<ul>
<li>
<p><code>sysctl -w vm.drop_caches=3</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tips">26. Tips</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://www.math.fsu.edu/~okhanmoh/gnu_linux_notes.html" class="bare">https://www.math.fsu.edu/~okhanmoh/gnu_linux_notes.html</a></p>
</li>
<li>
<p><a href="https://sites.google.com/site/tfsidc/linux-tricks/processing-a-large-number-of-files" class="bare">https://sites.google.com/site/tfsidc/linux-tricks/processing-a-large-number-of-files</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_cirosantilli">27. Cirosantilli</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_refs_6">27.1. refs</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/cirosantilli/x86-bare-metal-examples" class="bare">https://github.com/cirosantilli/x86-bare-metal-examples</a></p>
</li>
<li>
<p>~/Dropbox/apuntes/apuntes_Estr_Computadores/cirosantilli/x86-bare-metal-examples &#8594; github local</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_macros">27.2. macros</h3>
<div class="sect3">
<h4 id="_common_h">27.2.1. common.h</h4>
<div class="ulist">
<ul>
<li>
<p>common.h</p>
</li>
<li>
<p>altmacro</p>
<div class="ulist">
<ul>
<li>
<p>macro modo alternativo: se habilita con la directiva .altmacro</p>
</li>
<li>
<p><a href="https://sourceware.org/binutils/docs/as/Altmacro.html" class="bare">https://sourceware.org/binutils/docs/as/Altmacro.html</a></p>
</li>
<li>
<p>la macro HEX_NIBBLE utiliza como argumento reg. El argumento reg se pasa con &lt;&gt; &#8594; HEX_NIBBLE &lt;%eax&gt;</p>
</li>
<li>
<p>directiva LOCAL: creo que el argumento name de la directiva LOCAL en cada instancia utiliza un nombre diferente.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_begin">27.2.2. BEGIN</h4>
<div class="ulist">
<ul>
<li>
<p>.code16</p>
</li>
<li>
<p>inicializa los registros: segmentos y punteros de pila</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_clear">27.2.3. CLEAR</h4>
<div class="ulist">
<ul>
<li>
<p>Clear the screen, move to position 0, 0.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_protected_mode">27.2.4. PROTECTED MODE</h4>
<div class="ulist">
<ul>
<li>
<p>Use the simplest GDT possible</p>
</li>
<li>
<p>.code32</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_vga">27.2.5. VGA</h4>
<div class="ulist">
<ul>
<li>
<p>VGA_PRINT_STRING: Print a NULL terminated string to position 0 in VGA</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_hardware">27.3. hardware</h3>
<div class="sect3">
<h4 id="_vga_2">27.3.1. vga</h4>
<div class="ulist">
<ul>
<li>
<p><a href="https://wiki.osdev.org/Printing_To_Screen" class="bare">https://wiki.osdev.org/Printing_To_Screen</a></p>
<div class="ulist">
<ul>
<li>
<p>0xb8000 == magic video memory address which shows on the screen. */</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_protected_mode_2">27.4. protected_mode</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/cirosantilli/x86-bare-metal-examples#protected-mode" class="bare">https://github.com/cirosantilli/x86-bare-metal-examples#protected-mode</a></p>
</li>
<li>
<p>BIOS is not available in protected mode</p>
</li>
<li>
<p>se utiliza el hardware VGA para imprimir</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_hello_world">27.4.1. hello_world</h4>
<div class="ulist">
<ul>
<li>
<p><code>./run protected_mode</code></p>
<div class="ulist">
<ul>
<li>
<p>qemu-system-i386 -drive <em>file=protected_mode.img,format=raw</em> -serial mon:stdio -smp 2</p>
</li>
<li>
<p>ls protected_mode.*</p>
<div class="listingblock">
<div class="content">
<pre>protected_mode.elf  protected_mode.img  protected_mode.o  protected_mode.S</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>file protected_mode.elf &#8594; protected_mode.elf: ELF 32-bit LSB executable, Intel 80386, version 1 (SYSV), statically linked, with debug_info, not stripped</p>
</li>
</ul>
</div>
</li>
<li>
<p>protected_mode.S</p>
<div class="listingblock">
<div class="content">
<pre>/* https://github.com/cirosantilli/x86-bare-metal-examples#protected-mode */

#include "common.h"
BEGIN
    CLEAR
    PROTECTED_MODE
    VGA_PRINT_STRING $message
    jmp .
message:
    .asciz "hello world"</pre>
</div>
</div>
</li>
<li>
<p>macros</p>
<div class="listingblock">
<div class="content">
<pre>con la macro BEGIN empieza con .code16 y con la macro PROTECTED_MODE pasa a .code32
no utiliza la bios y utiliza la VGA escribiendo directamente en memoria en protected_mode</pre>
</div>
</div>
</li>
<li>
<p>instrucciones:16-bit mode 32-bit instructions are encodable with a special prefix.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_grub">28. grub</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://www.gnu.org/software/grub/manual/grub/grub.html" class="bare">https://www.gnu.org/software/grub/manual/grub/grub.html</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_operating_system_asm">29. operating system asm</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://www.cs.bham.ac.uk/~exr/lectures/opsys/10_11/lectures/os-dev.pdf" class="bare">https://www.cs.bham.ac.uk/~exr/lectures/opsys/10_11/lectures/os-dev.pdf</a> &#8594; bios</p>
<div class="ulist">
<ul>
<li>
<p>descargado</p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="https://littleosbook.github.io/#bios" class="bare">https://littleosbook.github.io/#bios</a> &#8594; grub, asm, C , kernel &#8594; lo emula con BOSCH</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://gayan1999malinda.medium.com/build-your-own-operating-system-9bd9f8531633" class="bare">https://gayan1999malinda.medium.com/build-your-own-operating-system-9bd9f8531633</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ubuntu_errors">30. Ubuntu Errors</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_locale">30.1. locale</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://help.ubuntu.com/community/EnvironmentVariables#Locale_setting_variables" class="bare">https://help.ubuntu.com/community/EnvironmentVariables#Locale_setting_variables</a></p>
</li>
<li>
<p><a href="https://wiki.gentoo.org/wiki/Localization/Guide#What_are_locales.3F" class="bare">https://wiki.gentoo.org/wiki/Localization/Guide#What_are_locales.3F</a></p>
</li>
<li>
<p><a href="https://wiki.archlinux.org/title/locale#Setting_the_system_locale" class="bare">https://wiki.archlinux.org/title/locale#Setting_the_system_locale</a>
**</p>
</li>
<li>
<p>cannot open locale definition file &#8216;en&#8217;: No such file or directory</p>
<div class="ulist">
<ul>
<li>
<p><code>locale -a</code></p>
<div class="listingblock">
<div class="content">
<pre>iee@fpgalab:~$ locale -a
C
C.UTF-8
en_US.utf8
es_ES.utf8
POSIX</pre>
</div>
</div>
</li>
<li>
<p>locale</p>
<div class="listingblock">
<div class="content">
<pre>LANG=es_ES.UTF-8  -&gt; The basic language setting used by applications on the system, unless overridden by one of the other locale environment variables
LANGUAGE=en -&gt;
	The "LANGUAGE" environment variable, which is set by the GUIs more often than not on Ubuntu desktops, controls language for message and menu display for GNU compatible applications. For such applications it overrides whatever locale names are set in "LANG" and "LC_MESSAGES".

	Unlike "LANG" and "LC_*", "LANGUAGE" should not be assigned a complete locale name including the encoding part (e.g. ".UTF-8"). Instead "LANGUAGE" should contain a colon separated priority list of language codes, for instance "es:de:en". A single language code is also correct.

LC_ALL=       -&gt; Using LC_ALL is strongly discouraged as it automatically overrides all other LC_* variables (LANG is not affected)</pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><a href="https://wiki.archlinux.org/title/locale#LANGUAGE:_fallback_locales" class="bare">https://wiki.archlinux.org/title/locale#LANGUAGE:_fallback_locales</a>
**</p>
</li>
<li>
<p>gettext &#8594; traducciones</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.gnu.org/software/gettext/manual/" class="bare">https://www.gnu.org/software/gettext/manual/</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>/usr/share/locale &#8594; decenas de idiomas</p>
</li>
<li>
<p><code>localectl status</code></p>
</li>
<li>
<p><code>export LANGUAGE=en:es</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_kernel">31. Kernel</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_oficial">31.1. oficial</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://lkml.org/" class="bare">https://lkml.org/</a> &#8594; this site is the (unofficial) Linux Kernel Mailing List archive</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_driver">31.2. driver</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://cateee.net/lkddb/" class="bare">https://cateee.net/lkddb/</a></p>
<div class="ulist">
<ul>
<li>
<p><a href="https://cateee.net/" class="bare">https://cateee.net/</a> &#8594; solo hasta 2014</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_inventario_hw">32. Inventario HW</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_news">32.1. News</h3>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.xbitlabs.com/articles/cpu/" class="bare">http://www.xbitlabs.com/articles/cpu/</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_touchpad_mouse">32.2. Touchpad mouse</h3>
<div class="ulist">
<ul>
<li>
<p>En ubuntu &#8594; System &#8594; Settings &#8594; touchpad mouse &#8594; se puede configurar que funcione el desplazamiento de dedos pero no el TOQUE</p>
</li>
<li>
<p><a href="https://www.techrepublic.com/article/tweak-your-touchpad-to-taste-in-linux/" class="bare">https://www.techrepublic.com/article/tweak-your-touchpad-to-taste-in-linux/</a></p>
<div class="ulist">
<ul>
<li>
<p>synclient command</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_temperatura">33. Temperatura</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_pasta_térmica">33.1. Pasta térmica</h3>
<div class="ulist">
<ul>
<li>
<p>Chances are the thermal paste needs to be replaced. Your fan is having to work overtime to dissipate the heat. OEM laptop producers don&#8217;t normally use very high quality paste to begin with, and the application a lot of times is sloppy (I would say EVERY time based on personal observation, but I&#8217;m trying to be fair). After 4 years, especially with the last year running hot, even if they used good paste and applied it well, it would still be due for replacement. Get yourself some good paste (IC Diamond 7, Arctic Cooler 5, Noctua NH-T1, Tuniq TX3 or 4, doesn&#8217;t really matter) from your favorite computer store, some isopropyl alcohol (99% by preference, but lower purity will work), and some q-tips. If you haven&#8217;t done this before, there are a ton of tutorials on youtube. While you have the heat sink off, make sure to clean the dust out of the cooling fins very thoroughly.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_pantalla">34. Pantalla</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_fundamentos">34.1. Fundamentos</h3>
<div class="ulist">
<ul>
<li>
<p>El tamaño de la pantalla afecta a: la portabilidad por su tamaño y uso en ambientes externos, consumo de la batería, salud de los ojos</p>
</li>
<li>
<p>Tecnología</p>
<div class="ulist">
<ul>
<li>
<p>LCD-LED</p>
</li>
<li>
<p>AMOLED</p>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.oled-info.com/lenovo-announces-worlds-first-oled-laptop-14-amoled-display" class="bare">http://www.oled-info.com/lenovo-announces-worlds-first-oled-laptop-14-amoled-display</a> &#8594; no pwm &#8594; no flick &#8594; no ojos secos</p>
</li>
</ul>
</div>
</li>
<li>
<p>IPS: (In-plane switching) is a screen technology for liquid crystal displays (LCDs). Reduce la dependencia angular.</p>
</li>
</ul>
</div>
</li>
<li>
<p>brillo</p>
<div class="ulist">
<ul>
<li>
<p>unidades nit=cd/m2=candela/m2.</p>
</li>
<li>
<p>poder manipular externamente</p>
</li>
<li>
<p>lo ideal en exteriores es por encima de 500 cd/m2</p>
</li>
<li>
<p>monitores con anti-glare</p>
</li>
<li>
<p>el brillo se controla con una modulación PWM que provoca daño en los ojos</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_ojos">34.2. ojos</h3>
<div class="ulist">
<ul>
<li>
<p>Salud PWM</p>
<div class="ulist">
<ul>
<li>
<p><a href="http://laptopmedia.com/top-laptop-pwm-ranking-rated-by-negative-impact-on-eyesight/" class="bare">http://laptopmedia.com/top-laptop-pwm-ranking-rated-by-negative-impact-on-eyesight/</a></p>
<div class="ulist">
<ul>
<li>
<p><a href="http://laptopmedia.com/reviews/health-impact-of-display-blue-light-and-our-solutions-for-you/" class="bare">http://laptopmedia.com/reviews/health-impact-of-display-blue-light-and-our-solutions-for-you/</a></p>
</li>
<li>
<p><a href="http://laptopmedia.com/reviews/how-to-take-advantage-of-laptopmedia-office-web-design-gaming-and-health-guard-profiles/#purchasing-installing-and-using-the-profiles" class="bare">http://laptopmedia.com/reviews/how-to-take-advantage-of-laptopmedia-office-web-design-gaming-and-health-guard-profiles/#purchasing-installing-and-using-the-profiles</a>: Purchasing, installing and using the profiles</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><a href="https://www.ncbi.nlm.nih.gov/pubmed/15096230" class="bare">https://www.ncbi.nlm.nih.gov/pubmed/15096230</a></p>
<div class="ulist">
<ul>
<li>
<p>estudio clinico</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_características">34.3. Características</h3>
<div class="ulist">
<ul>
<li>
<p>tamaño: 14 pulgadas</p>
</li>
<li>
<p>brillo: 500 cd/m2</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_e_writere_reader">35. e-Writer/e-Reader</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_importante">35.1. IMPORTANTE</h3>
<div class="ulist">
<ul>
<li>
<p>La experiencia al leer para una lectura rápida y concentrada:</p>
<div class="ulist">
<ul>
<li>
<p>un tamaño pequeño puede provocar estar todo el rato moviendo la página o que la letra sea muy pequeña</p>
</li>
<li>
<p>un bajo contraste dificulta la lectura</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_refs_7">35.2. Refs</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.todoereaders.com/manuskript-la-alternativa-libre-scrivener.html" class="bare">https://www.todoereaders.com/manuskript-la-alternativa-libre-scrivener.html</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_conceptos">35.3. Conceptos</h3>
<div class="ulist">
<ul>
<li>
<p>COMPATIBILIDAD:</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://es.kobo.com/help/es-ES/article/3069/leer-pdf-en-tu-ereader-kobo?products=Kobo%20Mini">PDF-EPUB</a>:</p>
<div class="ulist">
<ul>
<li>
<p>una cosa es poder leer pdf y epub y otra cosa es leerlos como dios manda</p>
</li>
<li>
<p>leer un PDf con kindle es un horror</p>
</li>
<li>
<p>para visualizar una página completa PDf como dios manda son necesarios 10"</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>screen</p>
<div class="ulist">
<ul>
<li>
<p>I&#8217;d prefer E-ink over LCD (tablet) since I&#8217;m gonna be doing alot of reading on it</p>
</li>
<li>
<p>E-ink:</p>
<div class="ulist">
<ul>
<li>
<p>no flicker</p>
</li>
<li>
<p>Display with ambient light reflflection which doesn&#8217;t hurt your eyes, even after hours of reading;</p>
</li>
</ul>
</div>
</li>
<li>
<p>No backlight, no screen glare or flare reflection</p>
</li>
<li>
<p>solution: 1200 x 825 pixels</p>
</li>
<li>
<p>Grayscale: 16 levels of gray</p>
<div class="ulist">
<ul>
<li>
<p>No colour</p>
</li>
</ul>
</div>
</li>
<li>
<p>Viewing angle: 180 degrees</p>
</li>
<li>
<p>contrast</p>
<div class="ulist">
<ul>
<li>
<p>With a whiter background, darker font color,  and richer detail,</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>I love my kindle, but it&#8217;s way too small for textbooks.</p>
<div class="ulist">
<ul>
<li>
<p>10.1 inch e-ink readers</p>
</li>
</ul>
</div>
</li>
<li>
<p>resolution</p>
<div class="ulist">
<ul>
<li>
<p>high dpi e-ink</p>
</li>
</ul>
</div>
</li>
<li>
<p>stylus</p>
<div class="ulist">
<ul>
<li>
<p>electronmagnetic touch screen</p>
</li>
<li>
<p>interchangeable tips for you to choose your favorite</p>
</li>
</ul>
</div>
</li>
<li>
<p>external storage media</p>
<div class="ulist">
<ul>
<li>
<p>wifi: support connecting to third party storage services like Dropbox</p>
</li>
<li>
<p>Apps: programs can no longer write to the external storage media on cloud like dropbox, ms onedrive,</p>
</li>
</ul>
</div>
</li>
<li>
<p>keyboard</p>
<div class="ulist">
<ul>
<li>
<p>swype: secuencia teclas continua</p>
</li>
</ul>
</div>
</li>
<li>
<p>comfortable</p>
<div class="ulist">
<ul>
<li>
<p>smooth page transitioning</p>
</li>
<li>
<p>stylus size for hand manipulation</p>
</li>
<li>
<p>pression sensibility</p>
</li>
<li>
<p>precision</p>
</li>
</ul>
</div>
</li>
<li>
<p>otros</p>
<div class="ulist">
<ul>
<li>
<p>battery duration</p>
</li>
<li>
<p>direct sunlight as in the shade, digital paper excels in any kind of strong light.</p>
</li>
<li>
<p>connect to PC like wacom drawing tablet</p>
</li>
<li>
<p>you can rest your palm on</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_devices">35.4. Devices</h3>
<div class="ulist">
<ul>
<li>
<p>e reader</p>
<div class="ulist">
<ul>
<li>
<p>comparison</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://en.wikipedia.org/wiki/Comparison_of_e-book_readers" class="bare">https://en.wikipedia.org/wiki/Comparison_of_e-book_readers</a></p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="https://news.ycombinator.com/item?id=13865777">populares</a></p>
<div class="listingblock">
<div class="content">
<pre>It's a good alternative to the discontinued SONY DPT-S1 and Onyx BOOX. (Edit: and goodereader)
The main difference based on spec is the screen, pen sensitivity, and price.

ReMarkable:
- 10.3" 1872 x 1404 (4:3, 226 DPI)
- 2048 levels sensitivity, high friction pen
- $429 (limited time offer, preorder)
SONY DPT-S1:
(discontinued Jan 17, 2017)
- 13.3" 1600 x 1200 (4:3, 150 DPI)
- pen input
- was $799 (now &gt; $1k on ebay)
Onyx BOOX Max:
- 13.3" 1600 x 1200 (4:3, 150 DPI)
- pen input
- $760
Onyx BOOX N96:
- 9.7" 1200x825 (16:11, 150 DPI)
- pen input
- $369
Goodereader:
- 13.3" 1600 x 1200 (4:3, 150 DPI)
- 1024 levels sensitivity pen
- $699 (preorder)</pre>
</div>
</div>
</li>
<li>
<p>best top</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://wiki.ezvid.com/best-e-readers" class="bare">https://wiki.ezvid.com/best-e-readers</a></p>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.youtube.com/watch?v=D4uP62gJUZY" class="bare">https://www.youtube.com/watch?v=D4uP62gJUZY</a></p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="http://www.pcmag.com/article2/0,2817,2470508,00.asp" class="bare">http://www.pcmag.com/article2/0,2817,2470508,00.asp</a></p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="http://www.pocketbook-int.com/us/products/pocketbook-inkpad">pocketbook inkpad</a></p>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.ielectro.es/product/pocketbook-inkpad-2-gris-libro-electrnico-8-tctil-retroiluminada-con-wifi?utm_source=google&amp;utm_medium=shop&amp;utm_campaign=shopping_feed&amp;gclid=CjwKEAjw_uvHBRDUkumF0tLFp3cSJACAIHMYh_bXXr0bNnpJ89qY0vssqgxUdw49EmKJZDP6kIXt3RoCG_Tw_wcB" class="bare">http://www.ielectro.es/product/pocketbook-inkpad-2-gris-libro-electrnico-8-tctil-retroiluminada-con-wifi?utm_source=google&amp;utm_medium=shop&amp;utm_campaign=shopping_feed&amp;gclid=CjwKEAjw_uvHBRDUkumF0tLFp3cSJACAIHMYh_bXXr0bNnpJ89qY0vssqgxUdw49EmKJZDP6kIXt3RoCG_Tw_wcB</a></p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="https://es.kobobooks.com/" class="bare">https://es.kobobooks.com/</a></p>
</li>
<li>
<p><a href="https://pro.sony.com/bbsc/ssr/product-DPTS1/?PID=I:digitalpaper:digitalpaperproductpage">Sony DPT-S1</a>--This one has everything. The only drawback is its incredibly high price, and the fact that it ONLY reads pdf files: 1000$</p>
<div class="ulist">
<ul>
<li>
<p><a href="http://goodereader.com/blog/electronic-readers/sony-digital-paper-review" class="bare">http://goodereader.com/blog/electronic-readers/sony-digital-paper-review</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>iPad Pro</p>
</li>
<li>
<p><a href="http://www.onyx-international.com/index.php/en/boox-products/n96-n96ml">onyx</a></p>
<div class="ulist">
<ul>
<li>
<p>chino</p>
</li>
<li>
<p>9.7"</p>
<div class="ulist">
<ul>
<li>
<p>N96: double touch &#8594; capacitive (finger) and electromag (stylus)</p>
</li>
<li>
<p>N96ML: single touch (styllus) y front light</p>
</li>
<li>
<p>N96CML: no aparece en la web</p>
</li>
<li>
<p>M96: single core cpu</p>
</li>
<li>
<p>text to speech</p>
</li>
<li>
<p>wifi y browser¿¿??</p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="http://ereader-store.de/en/17-onyx-boox">shop prices</a></p>
</li>
<li>
<p><a href="http://blog.the-ebook-reader.com/2017/01/12/why-such-a-lack-of-onyx-boox-n96-reviews/">overview</a></p>
<div class="listingblock">
<div class="content">
<pre>Hi,

I purchased the N96 Dual Touch (that is, the one having capacitive touch as well as stylus touch, without the front light) online. Received a very well packaged and completely sealed/new unit a couple of days back delivered at my place in New Delhi. I’ve been a long-time user of e-readers, and I currently own my six-year-old Kindle Touch as well as a one year old Kindle Voyage. I have also separately ordered for a Yotaphone 2 (the android phone that has an E Ink screen on the reverse). I had also ordered for Good E-reader 13.3 inch android-based e-reader, but subsequently cancelled my order since the delivery dates are extremely vague and I was informed that I will likely receive my e-reader “months” from now (I wasn’t prepared for a vague timeline, and hence settled for the N96). Overall you may note that I’m a huge fan of E Ink technology and of niche e-readers. I am a voracious reader and consume a significant number of books, magazines and newspapers every month, and being a lawyer also love reading my work-related documents on my e-readers.

Now that I have established my credentials as someone being genuinely interested in e-readers/E Ink technology, and as someone who has significant prior experience using e-readers over the past 5-6 years, let me summarise my three main reasons for not exactly being head over heels for my new N 96:

(1) The most striking letdown is definitely the ancient resolution. My Kindle Touch is also ancient and uses the same 150 PPI Pearl screen, but the N96 is a letdown compared even to my ancient Kindle Touch. Perhaps the bigger screen size is the culprit, but I will be lying if I don’t admit my extreme disappointment with the resolution. Text is highly jagged (at least by my expectations). It doesn’t mean text is unreadable, but even by my Kindle Touch standards the text seems highly pixelated. By my reckoning this is the most likely reason why the big screen e-readers have not taken off (which I think fuels the vicious circle of low demand resulting in continuing high prices of these devices). Some YouTube videos recommended “bolding” the font to make it more readable. To an extent it works, but the extreme lack of sharpness in the text is still disconcerting.
(2) Compared to my Kindle Voyage, the physical weight is significantly high. One hand reading is out of the question. Nighttime bed reading is also relatively inconvenient compared to the more portable smaller e-readers. Having said this, fact of the matter is that this is a 9.7 inch screen and the weight is comparable to even the supposedly premium 9.7 inch iPad (I think there is a difference of only about 40 gms).
(3) The Internet experience is also very average, and fairly clunky. One of the main reasons I wanted to invest in a big screen android e-reader was with the expectation that I will significantly cut down on my screen time on my multiple Macs, iPhone, and Sony Xperia phablet. While the web browsing experience has turned out to be definitely better than the “experimental” browser found on my Kindles, but given the expectations one has for smooth web browsing, the clunky feel of web browsing on N96 is a letdown. The speed of web browsing is fairly okay, it is the low screen resolution, and most importantly the constant refreshing required for proper reading, that are the two reasons of this feedback on the Internet experience. Many of the apps found on the android play store are either not compatible with this device, or even if installed are not optimised and thus the experience is not great at all. I have installed the Kindle app and while it’s not as if you’re unable to read your Kindle books, the experience is once again clunky. The text is grey and light and not very sharp, the page turns have a slight jarring feel, and the main bookshelf interface of the Kindle app takes a long time to load. I installed the Gmail app as well but the experience wasn’t very pleasant, so I ended up uninstalling it.

It wasn’t as if I wasn’t expecting some of these drawbacks having seen many of the YouTube videos of similar products (the video reviews that you get of the older M-series are pretty useful since there isn’t a lot of difference between the overall experience between the M and the N series). Despite this pre-existing setting of expectations, I was still let down because of the reasons I mentioned above. Does this mean it’s a completely useless device? No, it’s not and the fact is I have been using it for hours since the day it landed. Battery life without the Wi-Fi is good. But is it a device of any significant value-add? For the price it commands, I will have to be honest: it does not justify any additional value-added. Had this device been at least 50% cheaper than what it is priced at currently, perhaps things could be different. The downside is that isn’t much happening on the big screen e-reader scene so there isn’t a lot of choice, notwithstanding the Good E-reader 13.3 inch launch and the reMarkable writing e-reader scheduled to be launched later this year.

Thanks,
Anand</pre>
</div>
</div>
</li>
<li>
<p><a href="https://www.youtube.com/watch?v=72g5OO_S9V8">overview spanish</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Boogie Board Sync LCD eWriter-- It&#8217;s great for writing but I can&#8217;t view my textbooks on it.</p>
</li>
<li>
<p>Noteslate&#8212;&#8203;Looks promising, but when does it come out?</p>
</li>
<li>
<p><a href="https://support.getremarkable.com/hc/en-us">Remarkable</a></p>
</li>
<li>
<p><a href="http://the-digital-reader.com/2015/01/08/hands-netronix-6-8-13-3-e-ink-android-ereaders/">netronix</a></p>
</li>
<li>
<p><a href="http://goodereader.com/blog/electronic-readers/good-e-reader-is-launching-a-13-3-inch-e-reader">goodereader</a></p>
</li>
<li>
<p><a href="https://en.wikipedia.org/wiki/Comparison_of_e-book_readers">wiki ereader</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>tablet</p>
<div class="ulist">
<ul>
<li>
<p>Google Nexus 10</p>
</li>
<li>
<p>Samsung Galaxy note 10.1</p>
<div class="ulist">
<ul>
<li>
<p>S-pen</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>ultralaptop</p>
<div class="ulist">
<ul>
<li>
<p>Microsoft Surface Pro</p>
</li>
<li>
<p>MacBook pro</p>
</li>
<li>
<p>lenovo book</p>
</li>
</ul>
</div>
</li>
<li>
<p>smartphone</p>
<div class="ulist">
<ul>
<li>
<p>yotaphone2</p>
<div class="ulist">
<ul>
<li>
<p><a href="/home/candido/Dropbox/apuntes/apuntes_smartphone/smartphone.html#_yotaphone">Yotaphone</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_editor">35.5. Editor</h3>
<div class="ulist">
<ul>
<li>
<p>Applications</p>
<div class="ulist">
<ul>
<li>
<p>Evernote</p>
</li>
<li>
<p>Onenote</p>
</li>
<li>
<p>google docs</p>
</li>
<li>
<p><a href="http://www.literatureandlatte.com/scrivener.php">scrivener</a>: Esta herramienta era bastante distinta a Sigil o el editor de Calibre pues ofrecía una suite completa de herramientas necesarias para escribir un libro o un ebook, no sólo la edición básica del ebook o libro</p>
</li>
<li>
<p><a href="http://www.theologeek.ch/manuskript/download/">Manuskript</a>: una versión para Linux de Scrivener</p>
</li>
<li>
<p>Calibre &#8594; linux</p>
</li>
<li>
<p>Sigil &#8594; linux</p>
</li>
</ul>
</div>
</li>
<li>
<p>Concepts</p>
<div class="ulist">
<ul>
<li>
<p>formats: pdf, epub</p>
</li>
<li>
<p>math symbol recognition, shape recognition</p>
</li>
<li>
<p>notes on documents: tools for reviewing documents, such highlighter, pen and tags.</p>
</li>
<li>
<p>convert my handwriting into typed text</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_keyboard">36. Keyboard</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_teoria">36.1. Teoria</h3>
<div class="paragraph">
<p><a href="http://thc.org/papers/writing-linux-kernel-keylogger.txt">keylogger</a></p>
</div>
<div class="literalblock">
<div class="content">
<pre>                             ==Phrack Inc.==

               Volume 0x0b, Issue 0x3b, Phile #0x0e of 0x12


|=-----------------=[ Writing Linux Kernel Keylogger ]=------------------=|
|=-----------------------------------------------------------------------=|
|=------------------------=[ rd &lt;rd@thc.org&gt; ]=--------------------------=|
|=------------------------=[ June 19th, 2002 ]=--------------------------=|

--[ Contents

 1 - Introduction

 2 - How Linux keyboard driver work

 3 - Kernel based keylogger approaches
   3.1 - Interrupt handler
   3.2 - Function hijacking
       3.2.1 - handle_scancode
       3.2.2 - put_queue
       3.2.3 - receive_buf
       3.2.4 - tty_read
       3.2.5 - sys_read/sys_write

 4 - vlogger
   4.1 - The syscall/tty approach
   4.2 - Features
   4.3 - How to use

 5 - Greets

 6 - References

 7 - Keylogger source




--[ 1 - Introduction

  This article is divided into two parts.  The first part of the paper
gives an overview on how the linux keyboard driver work, and discusses
methods that can be used to create a kernel based keylogger.  This part
will be useful for those who want to write a kernel based keylogger, or to
write their own keyboard driver (for supporting input of non-supported
language in linux environment, ...) or to program taking advantage of many
features in the Linux keyboard driver.

  The second part presents detail of vlogger, a smart kernel based linux
keylogger, and how to use it.  Keylogger is a very interesting code being
used widely in honeypots, hacked systems, ... by white and black hats.  As
most of us known, besides user space keyloggers (such as iob, uberkey,
unixkeylogger, ...), there are some kernel based keyloggers.  The earliest
kernel based keylogger is linspy of halflife which was published in Phrack
50 (see [4]).  And the recent kkeylogger is presented in 'Kernel Based
Keylogger' paper by mercenary (see [7]) that I found when was writing this
paper.  The common method of those kernel based keyloggers using is to log
user keystrokes by intercepting sys_read or sys_write system call.
However, this approach is quite unstable and slowing down the whole system
noticeably because sys_read (or sys_write) is the generic read/write
function of the system; sys_read is called whenever a process wants to read
something from devices (such as keyboard, file, serial port, ...).  In
vlogger, I used a better way to implement it that hijacks the tty buffer
processing function.

  The reader is supposed to possess the knowledge on Linux Loadable Kernel
Module.  Articles [1] and [2] are recommended to read before further
reading.


--[ 2 - How Linux keyboard driver work

  Lets take a look at below figure to know how user inputs from console
keyboard are processed:

  _____________            _________             _________
 /             \ put_queue|         |receive_buf|         |tty_read
/handle_scancode\--------&gt;|tty_queue|----------&gt;|tty_ldisc|-------&gt;
\               /         |         |           |buffer   |
 \_____________/          |_________|           |_________|

     _________          ____________
    |         |sys_read|            |
---&gt;|/dev/ttyX|-------&gt;|user process|
    |         |        |            |
    |_________|        |____________|


                            Figure 1

  First, when you press a key on the keyboard, the keyboard will send
corresponding scancodes to keyboard driver.  A single key press can produce
a sequence of up to six scancodes.

  The handle_scancode() function in the keyboard driver parses the stream
of scancodes and converts it into a series of key press and key release
events called keycode by using a translation-table via kbd_translate()
function.  Each key is provided with a unique keycode k in the range 1-127.
Pressing key k produces keycode k, while releasing it produces keycode
k+128.

  For example, keycode of 'a' is 30. Pressing key 'a' produces keycode 30.
Releasing 'a' produces keycode 158 (128+30).

  Next, keycodes are converted to key symbols by looking them up on the
appropriate keymap.  This is a quite complex process. There are eight
possible modifiers (shift keys - Shift , AltGr, Control, Alt, ShiftL,
ShiftR, CtrlL and CtrlR), and the combination of currently active modifiers
and locks determines the keymap used.

  After the above handling, the obtained characters are put into the raw
tty queue - tty_flip_buffer.

  In the tty line discipline, receive_buf() function is called periodically
to get characters from tty_flip_buffer then put them into tty read queue.

  When user process want to get user input, it calls read() function on
stdin of the process. sys_read() function will calls read() function
defined in file_operations structure (which is pointed to tty_read) of
corresponding tty (ex /dev/tty0) to read input characters and return to the
process.

  The keyboard driver can be in one of 4 modes:
	- scancode (RAW MODE): the application gets scancodes for input.
	It is used by applications that implement their own keyboard
	driver (ex: X11)

	- keycode (MEDIUMRAW MODE): the application gets information on
	which keys (identified by their keycodes) get pressed and
	released.

	- ASCII (XLATE MODE): the application effectively gets the
	characters as defined by the keymap, using an 8-bit encoding.

	- Unicode (UNICODE MODE): this mode only differs from the ASCII
	mode by allowing the user to compose UTF8 unicode characters by
	their decimal value, using Ascii_0 to Ascii_9, or their
	hexadecimal (4-digit) value, using Hex_0 to Hex_9.  A keymap can
	be set up to produce UTF8 sequences (with a U+XXXX pseudo-symbol,
	where each X is an hexadecimal digit).

  Those modes influence what type of data that applications will get as
keyboard input.  For more details on scancode, keycode and keymaps, please
read [3].</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_hardware_2">36.2. Hardware</h3>
<div class="ulist">
<ul>
<li>
<p><a href="http://en.wikipedia.org/wiki/Enhanced_keyboard#Keyboard_layouts">teclado</a>: PC/AT extendido Windows Europeo de 105 teclas.</p>
<div class="ulist">
<ul>
<li>
<p>Lenovo:</p>
<div class="ulist">
<ul>
<li>
<p>5 botones multimedia y 3 botones mouse.</p>
</li>
<li>
<p>22 teclas superiores</p>
</li>
<li>
<p>3 filas de 14 teclas y 2 filas de 13 teclas: 68 teclas</p>
</li>
<li>
<p>en total 22 y 68 = 90 teclas FISICAS</p>
</li>
<li>
<p>se superponen las teclas del teclado numérico NumLock =</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>QWERTY</p>
</li>
<li>
<p>PC/AT</p>
</li>
<li>
<p><a href="http://en.wikipedia.org/wiki/Keyboard_layout#Spanish">layout</a></p>
</li>
<li>
<p>QM67 Express Chipset Family LPC Controller : <a href="http://www.intel.com/content/www/us/en/chipsets/mainstream-chipsets/q67-express-chipset.html" class="bare">http://www.intel.com/content/www/us/en/chipsets/mainstream-chipsets/q67-express-chipset.html</a></p>
</li>
<li>
<p><a href="http://halicery.com/8042/8042_INTERN_TXT.htm">8042_intel_controller</a>:</p>
<div class="literalblock">
<div class="content">
<pre>                   8042 INTERN
                   ===========
An attempt to reveal the internal operation of the IBM PC AT 8042 keyboard controller based the disassembly of 2KB ROM from 1983. This is of historical interest.

                 A. Tarpai 2010
            A little 8-bit nostalgia :)
 (Questions &amp; comments are welcome to tarpai76 at gmail)
         This file has been downloaded from
    http://www.halicery.com/8042/8042_INTERN_TXT.htm


***  TOC
     ===

     PART I
     -
     All the information I could collect on the 8042

     PART II
     -
     ROM Disassembly

     PART III
     -
     An UPI 41/42 disassembler


***


                     PART I

About the 8042
==============

       +----------------+
       |                |
       |   IBM PC/AT    |
       |    ("Host")    |       &lt;- scan codes
       |            +----+                        +-------------------------+
       |       0x60 |8042|  &lt;--- DATA ----------&gt; |     AT  KEYBOARD        |
       |       0x64 |KBC |  &lt;--- CLOCK ---------&gt; |       84-key            |
       |            |    |                        +-------------------------+
       |            +----+      kbd commands -&gt;
       |                |
       |                |
       |                |
       +----------------+

IBM used an 8042 slave UPI microcomputer in the AT in 1984 as the keyboard controller. The AT keyboard was an improvement to the previous keyboard of the IBM PC and XT: it not only had 1 extra key (84 keys), but it could also receive commands from the host. Thus the connection became bi-directional and the interface much more complex. They chose to program up an 8042 for the job and solder it onto the new AT motherboard. Today all Super I/O chips sitting on the LPC bus is emulating the functions of the 8042 for the PC when turned on.

I was always very interested in the keyboard - as I'm currently typing it - and in the low-level keyboard hardware programming. Using a pre-programmed microcontroller (as it would be called today) is a quite advanced and cool feature I think (the PC and XT had only a simple serial-to-parallel converter IC to interface the keyboard).

The 'programming interface' for the AT- and PS/2-like keyboard and mouse controllers, just as the whole IBM PC is well-documented - except the program, the firmware, that drives the 8042 to function as a keyboard controller (KBC). The only thing I knew was that IBM, Award and Phoenix all wrote firmware for the 8042 and derivates used in the AT and PS/2 line of computers. The code itself was never found.

Then someone talented has dumped the 2K program ROM of a 8042-like KBC in the AT. This is a 2KB binary file and I had no idea what's inside! But peeked in with a hex editor and it looked very exciting: IBM 1983. OK, so what are these microcomputers anyway and how they work? I found these always very confusing when programming ibm-style keyboards, mice and controllers: the status register and the command byte? both has status bits... where are they exactly? When sending commands? to the KBC, to the KBD (and to the mouse)? This is the base of the whole exciting quest, that hopefully adds a bit and clears up some of the mist how these controllers really operate.

How this was done
==================

  From the MESS project: "the 1503033 AT i8042 keyboard controller was dumped by Kevin Horton", "Keyboard Controller is effectively dumped (it is almost certainly the same as on the AT, has same P/N but is on a preprogrammed eprom-based i8642 instead of a mask rom i8042)" - isn't it 8742??

  1. get 1503033.bin
  2. study Intel UPI-41/42 USER'S MANUAL
  3. wrote a (dumb) 41/42 disassembler
  4. comment it.. with some love of 8-bit-nostalgia :))


TODO
====

  1. there are still some white spots in the code (eg. the ROM checksum?)
  2. and I certainly made mistakes.. feel free to contribute!
  3. a PS/2-style firmware dump would be GREAT!


*******************************************************************************

The 8042 in general
===================

  The 8042 was a slave UPI from Intel used for controlling hardware peripherials (it became famous for being used as the KBC of the AT and later for kbd/mouse of the PS/2).

  The 8042 faces 2 sides: the Host system (eg. AT ISA bus) and the I/O lines to the peripherials. There is a microcomputer 'in the middle' with its own little 8-bit CPU, 2KB program memory in the ROM it executes, and some 128 bytes RAM:


                    +-------------------+
              ----&gt; |R               P27| --
              ----&gt; |W      8042     P26| --
              ----&gt; |A0     ====     P25| --
                    |                P24| --
                    |                P23| --
                    |                P22| --      I/O lines
                    |                P21| --
                    |       C P U    P20| --
    Host            |       R O M       |
    system          |D7     R A M    P17| --
    R/W             |D6              P16| --
                    |D5              P15| --
             &lt;----&gt; |D4              P14| --
                    |D3              P13| --
                    |D2              P12| --
                    |D1              P11| --
                    |D0              P10| --
                    |                   |
                    |                 T0| --
                    |                 T1| --
                    +-------------------+


History of the 8042
===================

  February, 1978.. a preliminary description from iNTEL of the 8041/8741 UPI 8-bit microcomputer:
  - Pin Compatible ROM (8041) and UV-erasable EPROM (8741) versions
  - 1K words of program memory, 64 words data memory on-chip
  - CPU, ROM, RAM, I/O, Timer and Clock in a Single Package
  - clocked at 6 MHz
  This was the same year as the MCS-48 (8048) products.

  The later 8042/8742 model had doubled the memory and clock frequency:
  - 2KB ROM, 128 byte RAM
  - 12 MHz

  8242. Pre-programmed versions for the keyboard and keyboard/mouse controller, firmware from IBM, Award and Phoenix for the AT and PS/2.

  8742. EPROM (UV-erasable ROM) version of the 8042.



8042 architecture
=================

  I/O lines
  ---------
  - 2x8 input and output lines, open-collector
  - pins in, out, in/out
  - open collector with high imp internal pull-up
  - 2 Test input pins, T0 and T1 (can be tested by machine instructions: JT0, JNT0, JT1, JNT1)


  Host interface
  --------------
  - 8-bit data bus
  - 3 physical registers
  - 2 DATA BUS BUFFER registers (DBBIN and DBBOUT)
  - 1 status register (STATUS)
  - R, W, A0 input to chose register and R/W
  - the 8042 never initiates bus cycles (='slave') only answers them


  How the DATA BUS BUFFER registers work?
  ---------------------------------------

  The name is very descriptive actually: data bus buffers. They buffer between the external- and the internal 8-bit data buses in both (R/W) directions:


              +------------------------------------------------------------+
              |          R=1   +----------+                          8042  |
              |        &lt;-----  |  STATUS  | &lt;-----&gt;-+ MOV STS,A      ====  |
       R ---&gt; |         A0=1   +----------+         | MOV A,STS            |
       W ---&gt; |                                     |                      |
      A0 ---&gt; |      R=1   +---------------+     (OUT DBB,A)               |
              |   +----&lt;-- |    DBB OUT    | &lt;------+                      |
              |   | A0=0   +---------------+        |                      |
    D0-7 &lt;--&gt; | &lt;-&gt;                                 '&lt;-----&gt; Accumulator   |
              |   |        +---------------+        |                      |
              |   +------&gt; |    DBB IN     | --&gt;----+                      |
              |     W=1    +---------------+      (IN A,DBB)               |
              |                                                            |
              |                                                            |
              +------------------------------------------------------------+


        DBBIN
        - Host write sets IBF in STATUS
        - 8042 read clears IBF in STATUS

        DBBOUT
        - 8042 write sets OBF in STATUS
        - Host read clears OBF in STATUS
        (OBF can also be routed to output P24 to interrupt Host)

        In the STATUS register these bits are controlled by the 8042 hardware automatically (the remaining bits are for software use and don't-care for the 8042):

        +-----------------------+
        | | | | |A0 |   |IBF|OBF|
        +-----------------------+

        They reflect the data bus buffer registers' status and the A0 input pin. The Host can read out the content of this register any time by setting A0 and make a read from the 8042.


  8-bit CPU
  ---------
  - 2K program ROM
  - 128 byte RAM
  - 2 banks of 8 registers
  - Accumulator for ALU (add, or, and, xor..)
  - 8 words stack
  - 3-bit stack pointer SP
  - PSW and flags
  - 10-bit Prg Cnt
  - Timer and IBF interrupts
  - port (P1 and P2) instructions
  - TEST pin instr
  - inc/dec registers
  - jmp abs and conditional
  - instructions can wait for data from the Host
  - or some signal change on the input pins
  - subroutines
  - nice instruction set
  - faces the ISA Host


Open collector
==============

  Took me a while to understand.. but there is a very important principle:

  - if the line is not controlled by anybody, it's HIGH
  - if anybody pulls the line LOW, it stays low.


                    5V
                     |              Line pulled low..
                     |
           0 -&gt;------+
                     |
                     +---&gt; '0'         ..read as '0'
                     |


                    5V
                     |
                     |
           1 -&gt;--    +              'Disconnected'..
                     |
                     +---&gt; '1'         ..read as '1'
                     |


                    5V
                     |
                     |
           1 -&gt;--    +-----&lt;---      When disconnected, others drive the bus..
                     |
            0/1 &lt;----+                  ..and level can be read as input
                     |


The 8042 in the AT
==================

  To understand and comment the disassembly these were *must* to know how the 8042 was soldered on the AT mobo: the 8042 is in a HARDWIRED configuration and the firmware is programmed accordingly. This means the code controls certain lines and I had to know the schematics to understand.

  The main function of the keyboard controller (KBC) is to handle the bi-directional data flow between the computer and the keyboard (KBD). It appeared on the IBM PC/AT motherboard as a 8042-variant in 1984:

       +----------------+
       |                |
       |   IBM PC/AT    |
       |                |       &lt;- scan codes
       |            +----+                        +-------------------------+
       |            |8042|  &lt;--- DATA ----------&gt; |     AT  KEYBOARD        |
       |       0x60 |KBC |  &lt;--- CLOCK ---------&gt; |       84-key            |
       |       0x64 |    |                        +-------------------------+
       |            +----+       kb commands -&gt;
       |                |
       |                |
       |                |
       +----------------+

   Data flows in both directions (half-duplex) on 2-wires, CLK and DATA, using a 5 pin DIN plug:

          ____ ____
         /    -    \
        |           |
        | 1       3 |
        |  4     5  |
         \    2    /
           -------


AT schematics of 8042: The Host interface
-----------------------------------------

  The AT provides the chip select signal when the CPU reads/writes I/O-space 0x60 or 0x64. Bit 2 of the address line is connected to the A0 input of the 8042, so the 4 legal combinations from the Host side are:

                &gt;&gt; AT &lt;&lt;      R  W  A0     &gt;&gt; 8042 &lt;&lt;
               """"""""""     |  |  |     """"""""""""

               read 0x60      1  0  0      &lt;-----  DBBOUT

               read 0x64      1  0  1      &lt;-----  STATUS

               write 0x60     0  1  0      ---+                 +--&gt; KBD CMD
                                              |--&gt; DBBIN + F1 --|
               write 0x64     0  1  1      ---+                 +--&gt; KBC CMD


  - when Host makes a read cycle the 8042 places the contents of the DBBOUT or STATUS onto the external data bus based on the state of A0
  - when Host makes a write cycle, the 8042 places the data into the DBBIN register and sets bit3 of the STATUS register based on the state of A0 (this is the reason for "before writing to 0x60 or 0x64 check if IBF=0 in the STATUS register"). Note that it is the 8042's program that will interpret the contents of the DBBIN register (data byte with write address of 0x60 or a so called command byte written to 0x64).

The AT-style STATUS register (read 0x64)
----------------------------------------

                  +---------------+
       0x64  &lt;--  |    STATUS     |  &lt;----&gt;
                  +---------------+

                  7  Parity error
                  6  Receive timeout
                  5  Transmit timeout
                  4  INH (copy of P17 input, the keyboard switch, when a byte sent to Host)

                  3  F1 (hw, A0 input)
                  2  F0
                  1  IBF (hw)
                  0  OBF (hw)

    There are 3 hardware status bits: OBF, IBF and F1, which are set/cleared by the 8042 hardware during operation.

    F0 ('SYS'): This firmware never touches it. Host can write it by setting bit2 in the Command Byte.

    The upper 4 bits (and F0) are software status bits and can mean anything.. (that's the reason they differ in AT- or PS/2-mode programmed 8042). These bits can be set in software by executing 8042 machine instructions:

      "MOV STS,A"
        writes the upper nibble, bits 4-7 of the STATUS register

      "CLR F0" and "CPL F0"
        clears and complements the F0 bit

      "CLR F1" and "CPL F1"
        clears and complements the F1 bit


AT schematics of 8042: The I/O interface
----------------------------------------

  I drew only the pins that has meaning in the code:


     +----------------+
     |             P27| ------&gt; DATA
     |     8042    P26| ------&gt; _CLK
     |     ====    P25| ------&gt;
     |             P24| ------&gt; OBF (IRQ1)
     |             P23| ------&gt; _IBF (NC)
     |             P22| ------&gt;
     |             P21| ------&gt;
     |             P20| ------&gt;
     |                |
     |             P17| &lt;-----  KEY INHIBIT SWITCH
     |             P16| &lt;-----
     |             P15| &lt;-----
     |             P14| &lt;-----
     |             P13| &lt;-----
     |             P12| &lt;-----
     |             P11| &lt;-----
     |             P10| &lt;-----
     |                |
     |              T0| &lt;----- CLK
     |              T1| &lt;----- DATA
     +----------------+


  Because of the hardwired configuration of the pins this is very important to know when reading the code. There are 2 8-bit I/O ports on the 8042, any pins can be input, output, or both(!) - cool and flexible by the way. In the AT P1 is set for input on reset, P2 is for output:

  P27 -&gt; Keyboard Data
  P26 -&gt; inverted(!) -&gt; Keyboard Clock
  P25 -&gt; (not connected) _IBF routing for host interrupts: inverted, we interrupt host when DBBIN had been emptied by 8042
  P24 -&gt; OBF routing for host interrupts: we interrupt host when DBBOUT had been written by 8042

    (The rest of the pins left free and was used for various things in the AT, don't care for the 8042, like A20-line and Reset-line).

  P17 &lt;- keyboard switch (I've seen this in my life=): it's really a KEY in a keyhole, kbd INHIBITED when the key is not in and locked (=0).

    (The rest of the input lines are don't care for the 8042)


AT schematics of 8042: Keyboard CLOCK and DATA
----------------------------------------------

  When I first read the disassembly it was very confusing and didn't make any sense, setting/clearing CLK and DATA.. then I saw this: an AT-compatible implementation (VT82C42) of the 8042, which cleared it up.

  C L O C K   I S   I N V E R T E D ! (DATA is not, and don't ask me why, and the whole code is written for this schematics - caused me days of headache.. eg. "ANL P2,#$BF" pulls output P26 low, which will set the CLK HIGH):


    +----------------------------+
    |                            |
    |                    |\      |
    |                    | \     |
    +--&gt; T0       P26 ---|  0----+------   Keyboard CLOCK
                         | /
                         |/


                         |\
                         | \
    +--&gt; T1       P27 ---|  -----+------   Keyboard DATA
    |                    | /     |
    |                    |/      |
    |                            |
    +----------------------------+


  The following CLK schematics is actually from a PS/2-style datasheet (8242BB), but it's interesting. Note the inverter on the output pin!

                 5V
                  |
                  § 10K
                  |
          |\      |
          | \     |
  P26 ----|  0----+
          | /     |
          |/      +---&lt;----&gt;--- KBD
                  |
   T0 &lt;-----------+
                  |
                  = 47pF
                  |
                 GND



H  _____ idle = input that can be tested by reading the level back
        \
L        \_____  pulled down: written, read as low for sure


****************************************************************************************************************

The disassembler was written by me and is totally free of use, full source code included.


About the code
==============

This code is from an AT-style 8042 controller so it's keyboard controller only. It was written by IBM in 1983: this keyboard controller firmware was already done in 1983 for the AT to be released in 1984.

It implements the keyboard serial protocol by direct programming of 2 lines (CLK and DATA are pulled-up open-collector lines), for both the bi-directional AT- and the previous uni-directional PC/XT-keyboard.

It really does what is well documented in reference manuals.. (but it's still interesting how - at least for me :) ).

It's amazing how much code fits into 2KB! 8-bit really rulez!

Obvious that the code was originally not written in assembly (many redundant jumps, register saves sometimes as a product of some kind of compiler - as I don't know too much about that)



*******************************************************************

THe disassembly in details
==========================

  All the details I could figure out are in the source code, here is the big picture only.


The 8042 internals
==================

Reset
=====
After reset the 8042 fetches the first instruction from program ROM at $0000. In my file here is a 0x04: JMP! That was promising so I wrote a disassembler to learn the instruction set..

- dis i
- P1=ff
- P2=cf
- waits for AA command from Host - and nothing else
- then does the self-test
- enter the main poll loop


The Main Poll Loop
==================

When 'nothing' is happening, the 8042 runs in a crazy loop and waiting for things happen from the 2 sides:

  host writes, IBF set    &lt;------+
  KBD pulls down the CLK line  --+

This is the main loop (note, that 8042 polls IBF and doesn't use interrupts).

I. Host writes to input buffer (DBBIN - INput Data Bus Buffer)

  The IBF bit in the STATUS register is set. 8042 disables KBD by pulling CLK low. Checks, if write was 0x60 or 0x64 (by examining the F1 bit in the STATUS register).
  - if Host has written data to 0x60, it will send it to the KBD, read the reply, and puts it into DBBOUT
  - if Host has written data to 0x64, that is a 'Controller Command' and the 8042 will execute the appropriate program code
  Then loops again.

II. KBD pulls down the CLK line

  Probably, because the user has pressed or released a key and the KBD wants the send the 'scan code' (see another chapter on scan codes). Transmission happens on the Keyboard Data line guided by the Keyboard Clock line: this is the "AT-keyboard protocol" - see there.

Sending and receiving data from the kbd
=======================================

See the 2-wire protocol in details.
It can not only time out, but the AT serial protocol transfers with parity bit. When parity error occurs, the 8042 will try 1 more time (variable @21).


General timeout
===============

The 8042 implements a safety timeout function during each transfer. It uses the on-chip Timer and the Timer Interrupt for this function. The implementation is actually brilliant!! This is where assembly comes handy, C cannot do this.

The idea is the following. In a subroutine (eg. 'Read byte from KBD') the 8042 has to wait for a pin to change state and there is a danger for an infinite loop. So first, it starts the Timer. If the 8042 has been waiting too long, the Timer will overflow and cause an interrupt. At this point the stack looks like this:

  |      |  Timer Interrupt Stack
  |      |
  | INT  |
  | CALL |
  +------+

First the return address for the subroutine was pushed by the original caller, then the interrupt occured. The Timer interrupt then does only one thing: "it returns to the original caller placing A=2 as a Timeout error code in A", by manipulating the stack: decrements the 3-bit stack pointer before executing its RETR. For the caller it looks like as if the subroutine simply returned with a 'timeout error' code!! We're in 1983.. :)

This construct is used by many functions, and the caller can decide what to do when a subroutine returns with A=2.


Earlier (IBM PC and XT) keyboard support
========================================

After days of confusion I've finally figured out what bit 5 of the Command Byte means! The IBM PC keyboard protocol mode!! So.. Did you know that the first AT-style 8042 keyboard controllers did support the old IBM PC and PC/XT keyboards? Well, I didn't.. :)

In this 'mode' all lines are driven by the keyboard and data flows only from the keyboard (uni-directional). The code at $041C does:

1. IDLE is when CLK is HIGH and DATA is LOW.
2. kbd pulls down CLK to start transmitting
3. makes a long startbit (that's why wait CLK hig.. then low.. then high again) to read first bit
4. data bit is valid on DATA line on CLK RISING EDGE
5. NO PARITY bit


XLAT
====

The other compatibility feature that can be confusing with the PC-keyboard compatibility. I hope the following will clear it up (see http:...)

The hardware part of the IBM PC keyboard was simple and straightforward: 83-keys with 83 scan codes (make codes, msb set for break codes), read from 0x60 after IRQ1. It was the PC ROM BIOS that made many confusions by implementing Special codes, functions, etc..)

XLAT is used to pretend for programs, which directly read the scan code from 0x60, that the 84-key AT keyboard is an 83-key PC/XT-keyboard:
  - AT-kbd sends 0x1C when 'A' is pressed, while the XT-kbd sends 0x1E
  - AT-kbd sends 0xF0 0x1C when 'A' is released, while the XT-kbd sends 0x9E.

The 8042 firmware is capable of this translation.

Why is this??

Legacy programs that read scan codes from 0x60 has relied on that 'A' is 0x1E. The 8042 could further provide this illusion even when an AT-keyboard was attached to the computer. That's it.

What about both XT-keyboard and XLAT??
======================================

Now.. we have 4 cases: XT and XLAT. The 8042 firmware cares about XLAT only in AT-mode. This means 3 cases:

	XT=0 XLAT=0 =&gt; AT-KBD is attached, set-2 program reads 0x60
	XT=0 XLAT=1 =&gt; AT-KBD is attached, set-1 program reads 0x60 (compatibility)
	XT=1        =&gt; XT-KBD is attached, set-1 program reads 0x60

	(There is no 'REVERSE XLAT' function, when set-2 with XT-KBD)


The AT keyboard protocol
========================
  (Code at $03AE)

  This is important, the whole keyboard protocol is programmed by 8042 code. Main features of the protocol, when the KBD is sending data to the 8042 KBC:
    - KBD starts transmission by pulling CLK low
    - CLK is driven by the KBD
    - DATA is valid on falling edges of CLK
    - CLK is INVERTED and connected to the T0 test-input pin of the 8042
    - DATA on T1.

   _____
  C
   _____
  D

    In the Idle state both lines are high, passively pulled up (see the open-collector 'bus protocol'). The 8042 runs in a crazy circle and constantly monitors the CLK line. When it falls.. that is a sign, so (probably) the KBD wants to send a scan code ('probably' means the 8042, before start reading in bits, will make sure that CLK is stable low).

   __
  C  \__
   _____
  D

    CLK pulled low by KBD (the protocol also talks about the 'start bit' on the DATA line, which is 0 when this CLK falls happen, but this 8042 code doesn't seem to care about it(?)).

   __       _
  C  \___ _/ \__
   __        ^
  D  \___ ~~~0

    The first data bit (bit 0, LSB) will be valid on the next falling edge of CLK. 8042 simply waits for this to happen.. (loop: JT0 loop). Then reads the level of T1 (^ here) and right rotates into accumulator register, A. Here we have the first bit! (~ represents unknown state of DATA, 0 is 'bit 0', high or low depending on the data byte to send).

   __       _       _
  C  \___ _/ \__  _/ \__
   __        ^       ^
  D  \___ ~~~0    ~~~1

    The next bit is the same: 8042 waits for the next falling edge, then reads in DATA.

      _      _      _      _      _      _      _
  C _/ \__ _/ \__ _/ \__ _/ \__ _/ \__ _/ \__ _/ \__
       ^      ^      ^      ^      ^      ^      ^
  D ~~~1   ~~~2   ~~~3   ~~~4   ~~~5   ~~~6   ~~~7

    It happens 8 times for all the data bits to arrive.

       _      _
  C  _/ \__ _/ \__
        ^      ^
  D  ~~~7   ~~~P

    After the last data bit the AT-keyboard will send the PARITY bit, in the same way as the 8 data bits (as a 9th bit), using 'odd-parity' (odd parity is a method to append a bit to the data, so the overall number of 1-s will be an odd number).

       _      _      _
  C  _/ \__ _/ \__ _/
        ^      ___ ___
  D  ~~~P   ~~/

    After the parity bit another bit, called a '1' stop-bit is written by the KBD. After that the KBD pulls up ('releases') both lines, which returns to the high Idle state.


  Compare timing of the AT and PC/XT keyboard protocol - both supported by this firmware
  --------------------------------------------------------------------------------------
  Here is the whole cycle when the KBD is sending data to the 8042. There are a few time constrains, and many things can go wrong during transfer. The code is dealing with all these, see the details.

  AT
  ==
           ___        _      _      _      _      _      _      _      _      _      _     __
          C   \____ _/ \__ _/ \__ _/ \__ _/ \__ _/ \__ _/ \__ _/ \__ _/ \__ _/ \__ _/ \__ /  C
    IDLE   __  ^       ^      ^      ^      ^      ^      ^      ^      ^      ^      ^__ ___  IDLE
          D  \___   ~~~0   ~~~1   ~~~2   ~~~3   ~~~4   ~~~5   ~~~6   ~~~7   ~~~P   __/       D

    AT short version:
           ___        _                _      _      _    __
          C   \____ _/ \__           _/ \__ _/ \__ _/ \__/  C
    IDLE   __  ^        ^      ...       ^      ^      ^____  IDLE
          D  \___    ~~~0             ~~~7   ~~~P   __/     D


    - IDLE is when both CLK and DATA is high
    - CLK falls..
    - 11 falling edges - 11 bits
    - start bit (=0) .. 8 data bits .. Parity bit .. stop bit (=1)


  PC/XT
  =====
           __         _      _      _      _      _      _      _      _      _      ___
          C  \_____ _/ \__ _/ \__ _/ \__ _/ \__ _/ \__ _/ \__ _/ \__ _/ \__ _/ \__ _/   C
    IDLE       ____  ^      ^      ^      ^      ^      ^      ^      ^      ^      ^      IDLE
          D___/            ~0     ~1     ~2     ~3     ~4     ~5     ~6     ~7     \____D

    PC/XT short version:
           __        _      _               _      ___
          C  \____ _/ \__ _/ \__          _/ \__ _/   C
    IDLE       ___  ^      ^       ...     ^      ^      IDLE
          D___/           ~0              ~7     \____D


    - IDLE is when CLK is high and DATA is pulled low
    - CLK falls
    - 10 rising edges - 10 bits
    - start bit (=1) .. 8 data bits .. stop bit (=0)




Host Commands of this 8042 firmware
===================================


	Bit 0 and 1 of the Command Byte @20
	-----------------------------------
	= enable/disable keyboard IRQ.

	Background:

	When the 8042 writes a byte into DBBOUT, the OBF bit in the STATUS register gets set by the hardware. This is the normal operation, but the Host has to periodically read, poll, the OBF bit in the STATUS register to check whether a byte has been written by the 8042.

	Using the "EN FLAGS" instruction (and when a '1' has been previously written to P24) the 8042 will also set the P24 output pin. If this pin is connected to the IRQ-system of the Host, it will cause an IRQ.

	This firmware executes the "EN FLAGS" instruction after RESET. Better cited: "This instruction allocates two I/O lines on PORT 2 (P24 and P25). P24 is the Output Buffer Full interrupt request line to the host system. P25 is the Input Buffer empty interrupt request line. These interrupt outputs reflect the internal status of the OBF flag and the IBF inverted flag " - in the STATUS register. "Note, these outputs may be inhibited by writing a '0' to these pins. Reenabling interrupts is done by writing a '1' to these port pins." UPI-41AH/42AH manual.

	So.. the 8042 can route the OBF bit of the STATUS register to one of the output pins (P24), causing an interrupt request (IRQ) to the Host system when connected. Routing OBF is the proper configuration for an interrupt-driven system, like the AT.

	Note, that _IBF-routing is handled similarly to OBF and this 8042 firmware handles them together (bit 1 of the Command Byte will be written to P25), because they are not separable: "EN FLAGS" will allocate P24 and P25 together. In the AT bit 1 is specified as Reserved, because pin P25 is not connected, not used (seems like it was fine to poll IBF when the Host is writing to 0x60/0x64 and not use interrupts for that).

	The 8042 firmware uses the Command Byte bit 0 to write P24, thus enabling/disabling OBF-routing to P24, thus enabling/disabling IRQ1, Keyboard Interrupt, in the AT system.

	STATUS bits
	===========
	This register is a hardware register.
	The lower nibble part is used for maintaining the Data Bus Buffer (DBB) registers' status and the A0-line by the hardware.
    The upper nibble part can be set by software and are therefore firmware-dependent (8042 uses "MOV STS,A" to write data into the STATUS register).
    The host reads this register on 0x64.
    In the AT-firmware the bits are defined as:

	             +----------------  ----------------+
	    0x64 &lt;-- |PER|RTO|TTO|INH|  |A0 |   |IBF|OBF| &lt;----&gt; 8042
	             +----------------  ----------------+

             7  Parity error
             6  Receive timeout
             5  Transmit timeout
             4  INH (copy of P17 input, the keyboard switch, updated when a byte sent to Host)

             3  F1 (hw, A0 input)
             2  F0
             1  IBF (hw)
             0  OBF (hw)
    .



	Writing the Command Byte @20
	============================
	The Command Byte is _not_ a register for the Host: just one of the 128 memory bytes at address 0x20 in the 8042's RAM. It is special when the Host issues a RAM write command to address 0x20 (by writing 0x60/0x40 to 0x64, then the value to 0x60). The 8042 firmware monitors the bits and performs different tasks, *in this order*:

	1. save @20

	2. write the new @20

	3. Examine bit 0: OBF (set/clr P24 to en/dis IRQ1 for the Host)

	4. bit 1: _IBF (same, but N/C on AT)

	5. bit 2: SYS (don't care for 8042, set/clr F0 in STATUS)

	6. bit 3: OVR (nop): scan code received from KBD will be passed to Host if (P17 || OVR)

	7. bit 4: _EN (=1 disable kbd interface)
	          Setting _EN: the 8042 pulls down the CLK line immediately, disabling serial communication with the KBD.
	          Clearing _EN (Host enables the keyboard interface from the disabled state): nothing happens here, only set the flag @2E=1 for Main, bc of the next bit will leave the AT-KBD DISABLED(!)

	8. bit 5: set AT/XT-keyboard protocol (NB. this gets examimned after _EN)
	          =0 Set AT-KBD protocol: DATA=1 CLK=0 (pull CLK low, DISABLE AT-KBD), go to Main and Main will enable if flag @2E is set
	          =1 Set XT-KBD protocol: DATA=0 CLK=1 (pull DATA low, this is IDLE-state of XT-KBD), go to Main

	9. bit 6: XLAT (nop)
	10. bit 7: (nop)



	KBD EN variations
	=================

	           CMD _EN                   CLK/DATA

	  RESET     1                         0/1 (P2=#$CF at $0045)
	  CMDAA     1                         0/1 (P2=#$CF at $0700)
	  CMD60/AT  0                         0/1 (disabled &amp; @2E=1)
	  CMD60/XT  0                         1/0 (idle)
	  CMDAE     0                         N/A
	  CMDAD     1                         N/A
	  CMD (write P2 directly)




                     ****

                    PART II
                      -
                 ROM Disassembly

      see http://www.halicery.com/8042/8042_1503033.TXT


                     ****

                   PART III
                      -
            A UPI 41/42 disassembler

     http://www.halicery.com/8042/dasm42.c

  (and a simple win32 console front-end, main.c)
.</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_software">36.3. Software</h3>

</div>
<div class="sect2">
<h3 id="_assembly">36.4. Assembly</h3>
<div class="sect3">
<h4 id="_halicery">36.4.1. halicery</h4>
<div class="ulist">
<ul>
<li>
<p><a href="http://halicery.com/8042/8042_1503033_TXT.htm">8042_assembly</a></p>
</li>
</ul>
</div>
<div class="literalblock">
<div class="content">
<pre>1503033 DISASSEMBLY
===================
A. Tarpai 2010 October
Comments and corrections are welcome to tarpai76 at gmail! Feel free
This file has been downloaded from http://www.halicery.com/8042/8042_1503033_TXT.htm
For more detailed info on the 8042 please look at http://www.halicery.com/8042/8042_INTERN_TXT.htm

TOC
  Intro
  8042 ROM disassembly
  8042 RAM map


    What is this?
    =============
    Commented disassembly of the file 1503033.bin, a 2KB IBM ROM dump of an AT 8042 keyboard controller (KBC) from 1983. The rom is from the MESS project, I wrote a simple 41/42 disassembler and did my best to comment this wonderful vintage piece.

    Why?
    ====
    It is for historical interest.. and fun. An attept to understand how one of the 8042 KBC internally worked. I love keyboard hardware programming and it gave me a lot of headache to understand why are things like they are, and I was hoping to find some answers in this quite old and outdated code. Reading and commenting the code reminded me of the good ol' 8-bit days anyway and that I'm still alive..

    Conclusions
    ===========
    Not much actually..:) The 8042 programming interface is well documented by IBM and the firmware really does what it said to do. No hidden code or undocumented features. Still, it's very interesting - IMHO!

    Syntax
    ======
    Everything is hexa, $ is the sign. Eg. #$CF is an immediate hexa 8-bit value. The 2K Program memory (ROM) is separate from the small RAM (128 bytes). The RAM is also the place for 8 general purpose registers, R0-R7. @R0 and @R1 can be used to indirectly address the other RAM locations. There is an Accumulator (A). @A addresses locations in program ROM. P1 and P2 are the two 8-bit I/O ports. The two test input pins (T0 and T1) are directly tested by the conditional branch instructions, eg. JNT0 $0310 jumps when T0=0.


    This firmware relies on the following
    =====================================

        +---------------+
        |            P27| -&gt; DATA
        |   8042     P26| -&gt; _CLK (inverted)
        |   ====        |
        |            P17| &lt;- KEYBOARD SWITCH (0=INHIBITED)
        |               |
        |             T0| &lt;- CLK
        |             T1| &lt;- DATA

        (NB: P26 connects to an INVERTER and then drives the keyboard CLOCK line!)


    STATUS bits
    ===========
    STATUS is a physical register. Host reads it on 0x64:

                  sw-bits           hw-bits
             +----------------  ----------------+
         &lt;-- |PER|RTO|TTO|INH|  |A0 |   |IBF|OBF|
             +----------------  ----------------+


    Command Byte (CMD) bits in this 8042 firmware
    =============================================
        CMD is a byte in the 8042's RAM. Host can read it by writing 0x20 (or 0) to 0x64, then reading 0x60:

            +--------------------------------+
        &lt;-- | - |XLAT|XT |_EN|OVR| F0|IBF|OBF|
            +--------------------------------+


    TODO
    ====
    - There are some white spots, like the ROM checksum, and many small details to be cleared up.
    - Find a PS/2-style keyboard/mouse controller ROM dump(!)
    - Find a keyboard ROM dump (the 'other side')




***


Opening 1503033.bin

  ; START VECTORS

0000: 04 45   JMP $0045     ; -&gt; Reset
0002: 00      NOP
0003: 04 3A   JMP $003A     ; -&gt; IBF intr
0005: 00      NOP
0006: 00      NOP
0007: 04 21   JMP $0021     ; -&gt; Timer intr

  ; Timer intr
  ; ==========
  ;   This is something special: used as a general timeout in subroutines.
  ;   It manipulates the Stack Pointer and pretends the
  ;   called function returned with value 2 in the Accumulator.
  ;   (And disables kbd on the wire). Brilliant.


0021: 65      STOP TCNT
0022: C7      MOV A,PSW
0023: 53 07   ANL A,#$07
0025: 07      DEC A         ; dec SP
0026: A8      MOV R0,A
0027: C7      MOV A,PSW
0028: 53 F8   ANL A,#$F8
002A: 48      ORL A,R0
002B: D7      MOV PSW,A
002C: B8 20   MOV R0,#$20   ; check bit5 in CMD
002E: F0      MOV A,@R0
002F: B2 35   JB5 $0035
0031: 74 DE   CALL $03DE    ; AT-KBD: we pull CLK low and hold
0033: 04 37   JMP $0037
0035: 9A 7F   ANL P2,#$7F   ; XT-KBD: we just pull DATA low
0037: 23 02   MOV A,#$02
0039: 93      RETR

  ; IBF intr
  ; ========
  ; This is not supposed to happen
  ; and is considered as ERROR. We just count it in @2F.
  ; Then back to Main

003A: 65      STOP TCNT
003B: 15      DIS I
003C: B8 2F   MOV R0,#$2F
003E: F0      MOV A,@R0
003F: 17      INC A
0040: C6 43   JZ $0043
0042: A0      MOV @R0,A
0043: 24 02   JMP $0102     ; -&gt; Main

  ; Reset routine
  ; =============
  ;
  ;   \/\/\__________  CLK pulled low
  ;         _________    (AT-KBD disabled state?)
  ;   \/\/\/           DATA set high

0045: 23 CF   MOV A,#$CF    ; DATA=1 CLK=0 (KBD DISABLED)
0047: 3A      OUTL P2,A
0048: F5      EN FLAGS      ; OBF/_IBF routing ON to P24/P25, but so far disabled (P2=CF)
0049: 26 4D   JNT0 $004D
004B: 9A BF   ANL P2,#$BF
004D: 09      IN A,P1
004E: 90      MOV STS,A     ; Stage1
004F: D6 4F   JNIBF $004F   ; wait for data from Host..
0051: 23 10   MOV A,#$10
0053: 90      MOV STS,A
0054: 22      IN A,DBB
0055: 76 59   JF1 $0059
0057: 04 4F   JMP $004F
0059: D3 AA   XRL A,#$AA    ; Command Self-Test?
005B: 96 4F   JNZ $004F
005D: E4 06   JMP $0706     ; do Command AA (it will return here on success)

005F: 23 60   MOV A,#$60    ; Stage2. Init RAM variables
0061: 90      MOV STS,A
0062: B8 20   MOV R0,#$20
0064: B0 10   MOV @R0,#$10  ; @20=10 (CMD = kbd disable by default)
0066: 18      INC R0
0067: B0 01   MOV @R0,#$01  ; @21=1 (this is how many times we try after parity error)
0069: 18      INC R0
006A: B0 06   MOV @R0,#$06  ; @22=6
006C: 18      INC R0
006D: 18      INC R0
006E: 18      INC R0
006F: B0 01   MOV @R0,#$01  ; @25=1
0071: 18      INC R0
0072: 18      INC R0
0073: B0 FB   MOV @R0,#$FB  ; @27=FB (Timer reload value for send data to kbd)
0075: 18      INC R0
0076: B0 E0   MOV @R0,#$E0  ; @28=E0 (Timer reload before read scan code?)
0078: 18      INC R0
0079: B0 06   MOV @R0,#$06  ; @29=6
007B: 18      INC R0
007C: B0 10   MOV @R0,#$10  ; @2A=10 (pull CLK low and hold for AT-KBD in a loop of @2A)
007E: 18      INC R0
007F: B0 20   MOV @R0,#$20  ; @2B=20 (base for RAM address read/write commands)
0081: 18      INC R0
0082: B0 15   MOV @R0,#$15  ; @2C=15 (set and hold CLK/DATA for XT-KBD in a loop of 256 x @2C before IDLE)
0084: BC 55   MOV R4,#$55   ; Send 55 to Host (Self-test completed)
0086: B9 00   MOV R1,#$00
0088: 74 D3   CALL $03D3
008A: 24 02   JMP $0102     ; -&gt; Main

  ; to read this page
008C: A3      MOVP A,@A
008D: 83      RET

  ; to read this page
0100: A3      MOVP A,@A
0101: 83      RET

  ; Main Entry
  ; ==========

0102: 86 0A   JOBF $010A	; DBBOUT still full? (wait until Host reads out previous byte sent)
0104: D6 10   JNIBF $0110	; DBBOUT empty, go an poll kbd if enabled

  ; DBBIN is full: parse command/data

0106: 76 49   JF1 $0149     ; Command written to 0x64. Returns to $0102
0108: 44 02   JMP $0202     ; Data is written to 0x60. Returns to $0102

010A: D6 02   JNIBF $0102	; DBBOUT full, loop until emptied or we receive sth
010C: 76 06   JF1 $0106
010E: 24 02   JMP $0102     ; -&gt; Main

  ; DBBIN empty: deal with kbd

0110: B8 20   MOV R0,#$20   ;
0112: F0      MOV A,@R0
0113: 92 02   JB4 $0102     ; _EN set -&gt; kbd disabled, back to Main loop

  ; KBD enabled: do XT- or AT-protocol based on CMD5

0115: B2 3F   JB5 $013F     ; XT-kbd?

  ; AT-KBD enabled
  ; (or has just been enabled by Host, @2E=1: then we make sure DATA is high)

0117: B8 28   MOV R0,#$28   ; Preload Timer for later call $03AE (READ BYTE FROM AT-KBD)
0119: F0      MOV A,@R0
011A: 62      MOV T,A
011B: B8 2E   MOV R0,#$2E   ; Host has just enabled kbd by clearing _EN in CMD?
011D: F0      MOV A,@R0
011E: C6 26   JZ $0126
0120: 46 02   JNT1 $0102    ; ??? start all over if DATA is pulled low??
0122: 46 02   JNT1 $0102	; ??? make sure DATA is still high??
0124: 27      CLR A         ; OK, DATA is Idle
0125: A0      MOV @R0,A     ; clear flag, release CLK and do the poll loop

0126: 9A BF   ANL P2,#$BF   ; release CLK!
0128: 24 2A   JMP $012A     ; and do the AT-KBD Main Poll Loop

  ; AT-KBD Main Poll Loop of CLK and IBF
  ; ====================================
  ; Either CLK gets pulled down by AT-KBD
  ; or Host sends a byte will exit from here

012A: 26 32   JNT0 $0132    ; kbd pulled CLK down?
012C: D6 2A   JNIBF $012A   ; Host wrote 0x60 or 0x64

  ; byte arrived from Host in AT-mode

012E: 74 DE   CALL $03DE    ; pull CLK low and hold (disable kbd.. it will be re-enabled when reading the response byte)
0130: 24 06   JMP $0106     ; and deal with command/data from Host. Returns to $0102

  ; DBBIN empty
  ; AT-KBD pulled CLK down

0132: 26 4B   JNT0 $014B

  ; CLK fall was noise, count ERROR in @24 and loop again
  ; CLK |_| short fall

0134: 74 DE   CALL $03DE
0136: B8 24   MOV R0,#$24
0138: F0      MOV A,@R0
0139: 17      INC A
013A: C6 26   JZ $0126
013C: A0      MOV @R0,A
013D: 24 26   JMP $0126

  ; XT-KBD Main Poll Loop of CLK and IBF
  ; ====================================
  ; (strange, CLK always checked twice.. ?)

013F: 36 45   JT0 $0145
0141: 36 3F   JT0 $013F
0143: 84 02   JMP $0402     ; XT-KBD has pulled CLK low -&gt; read scan code
0145: D6 3F   JNIBF $013F

  ; byte arrived from Host in XT-mode: now what?
  ; (XT-KBD is uni-directional.. funny)

0147: 24 06   JMP $0106     ; Command, XT-mode(!)

0149: A4 02   JMP $0502     ; Command Parser, AT-mode

  ; OK, AT-KBD pulled the CLK down
  ; (scan code is expected)

014B: 74 AE   CALL $03AE    ; READ BYTE FROM AT-KBD
014D: 12 53   JB0 $0153     ; parity error?
014F: 32 79   JB1 $0179     ; timeout error?
0151: 24 7F   JMP $017F     ; OK -&gt;

  ; scan code received with Parity Error

0153: B8 21   MOV R0,#$21   ; # of retry-s variable @21 (=1 init)
0155: F0      MOV A,@R0
0156: C6 75   JZ $0175

0158: AD      MOV R5,A      ; if we allow retry (normally do, 1) -&gt; loop in R5

  ; Resend RETRY after Parity error

0159: B8 23   MOV R0,#$23   ; inc ERROR COUNTER @23
015B: F0      MOV A,@R0
015C: 17      INC A
015D: C6 60   JZ $0160
015F: A0      MOV @R0,A
0160: BC FE   MOV R4,#$FE   ; Send FE (resend) to AT-KBD
0162: 54 32   CALL $0232

0164: 32 75   JB1 $0175     ; did sending FE timed out?
0166: B9 29   MOV R1,#$29   ; Receive scan code again from AT-KBD, call 380 passing R1=29(?)
0168: 74 80   CALL $0380
016A: 12 73   JB0 $0173     ; did second attempt ended with Parity Error again? Try again, loop
016C: 32 75   JB1 $0175     ; did second attempt ended with Time Out?
016E: FC      MOV A,R4
016F: D3 FE   XRL A,#$FE
0171: 96 7F   JNZ $017F
0173: ED 59   DJNZ R5,$0159

0175: B9 80   MOV R1,#$80   ; sending FE to AT-KBD Timed out
0177: 24 7B   JMP $017B

  ; Scan code receive ended with Timeout Error

0179: B9 40   MOV R1,#$40
017B: BC 00   MOV R4,#$00
017D: 24 81   JMP $0181

  ; Send received scan code from AT-KBD to Host
  ; Translation set?

017F: B9 00   MOV R1,#$00

0181: B8 20   MOV R0,#$20
0183: F0      MOV A,@R0
0184: 37      CPL A
0185: D2 BE   JB6 $01BE     ; XLAT?

  ; XLAT=1
  ; Translate set-2 to set-1
  ; Watch for
  ;   - set-2 scan codes over 0x7f
  ;   - F0 break codes
  ;   - INH and key switch

0187: FC      MOV A,R4      ; XLAT ON: translate to set-1 (7-bit make codes, msb set for break codes)
0188: D3 83   XRL A,#$83
018A: 96 90   JNZ $0190
018C: BC 02   MOV R4,#$02   ; 0x80 -&gt; 0x02 (=F7)
018E: 24 97   JMP $0197
0190: FC      MOV A,R4
0191: D3 84   XRL A,#$84
0193: 96 97   JNZ $0197
0195: BC 7F   MOV R4,#$7F   ; 0x84 -&gt; 0x7F (=SysRq, the new key pressed)

0197: F0      MOV A,@R0     ; Send scan code to Host only if (INH || SW)
0198: 72 A6   JB3 $01A6     ; (INH=CMD3, SW=P17)
019A: 09      IN A,P1
019B: F2 A6   JB7 $01A6

019D: FC      MOV A,R4      ; KBD disabled.
019E: F2 B4   JB7 $01B4     ; Just store make/break in @2D and exit
01A0: 27      CLR A
01A1: B8 2D   MOV R0,#$2D
01A3: A0      MOV @R0,A
01A4: 24 C0   JMP $01C0

01A6: FC      MOV A,R4      ; KBD enabled.
01A7: F2 B4   JB7 $01B4     ; Is it break code?

01A9: E3      MOVP3 A,@A    ; No, do the translation (table at $0300, 128 bytes)
01AA: AC      MOV R4,A      ; get possible break code bit
01AB: B8 2D   MOV R0,#$2D
01AD: F0      MOV A,@R0
01AE: 4C      ORL A,R4
01AF: AC      MOV R4,A
01B0: 27      CLR A
01B1: A0      MOV @R0,A
01B2: 24 BE   JMP $01BE     ; send to Host

01B4: D3 F0   XRL A,#$F0    ; did AT-KBD send us the break code (F0)?
01B6: 96 BE   JNZ $01BE     ; no, send R4 to Host and exit
01B8: B8 2D   MOV R0,#$2D   ; yes, set flag @2D and exit
01BA: B0 80   MOV @R0,#$80
01BC: 24 C0   JMP $01C0

  ; XLAT=0, do nothing
  ; Send byte and status to Host

01BE: 74 D3   CALL $03D3    ; R4-&gt;DBBOUT, R1-&gt;STATUS
01C0: 24 02   JMP $0102     ; -&gt; Main



***************************************************************
**   BANK 2:                                                 **
**                                                           **
**       $0202 Send Keyboard Command to KBD and read reply   **
**       $0232 Send byte to KBD                              **
***************************************************************

  ; to read this page
0200: A3      MOVP A,@A
0201: 83      RET

  ; Host has written to 0x60

0202: 22      IN A,DBB
0203: AC      MOV R4,A
0204: B8 20   MOV R0,#$20
0206: F0      MOV A,@R0
0207: 53 EF   ANL A,#$EF
0209: A0      MOV @R0,A     ; enable kbd in CMD BYTE (for reading response?) - will be disabled before back to Main
020A: B2 2E   JB5 $022E     ; CMD5?

  ; Send Byte to AT-kbd

020C: 54 32   CALL $0232    ; Send byte in R4
020E: 8A 80   ORL P2,#$80   ; DATA=1 (above returned with CLK pulled low)
0210: B9 20   MOV R1,#$20
0212: 32 28   JB1 $0228     ; Timeout Error? Set TxTO and Resend

0214: B8 22   MOV R0,#$22   ; pass @22 to $0380 if non-zero (=6 on reset)
0216: F0      MOV A,@R0
0217: C6 30   JZ $0230

0219: A9      MOV R1,A      ; receive reply (pass 6 in R1?)
021A: 74 80   CALL $0380
021C: B9 A0   MOV R1,#$A0
021E: 12 28   JB0 $0228     ; Parity Error? Set PERR &amp; RxTO and Resend
0220: B9 60   MOV R1,#$60
0222: 32 28   JB1 $0228     ; Timeout Error? Set RxTO &amp; TxTO and Resend
0224: B9 00   MOV R1,#$00   ; OK. Send reply byte to Host
0226: 44 2A   JMP $022A

  ; Parity Error occured during sending byte to kbd

0228: BC FE   MOV R4,#$FE   ; Send FE to Host (resend)
022A: 74 D3   CALL $03D3
022C: 44 30   JMP $0230     ; -&gt; Main

022E: 94 50   CALL $0450    ; Send Byte to XT-kbd
0230: 24 02   JMP $0102     ; -&gt; Main

  ; Send byte in AT-keyboard protocol (byte in R4)

0232: 9A 7F   ANL P2,#$7F   ; pull DATA low
0234: 74 DE   CALL $03DE    ; pull CLK low and hold (prepare AT-kbd to receive byte?)

0236: B8 26   MOV R0,#$26
0238: F0      MOV A,@R0
0239: 62      MOV T,A       ; Timer Reload with @26 for start bit
023A: 55      STRT T
023B: B8 27   MOV R0,#$27
023D: BA 08   MOV R2,#$08
023F: BB 00   MOV R3,#$00
0241: 9A BF   ANL P2,#$BF   ; release CLK!

0243: FC      MOV A,R4      ; loop for sending 8 data bits
0244: 67      RRC A
0245: AC      MOV R4,A
0246: 36 46   JT0 $0246     ; wait for CLK falling edge..
0248: F6 4E   JC $024E
024A: 9A 7F   ANL P2,#$7F   ; then write DATA
024C: 44 51   JMP $0251
024E: 8A 80   ORL P2,#$80
0250: 1B      INC R3        ; compute parity
0251: 65      STOP TCNT
0252: F0      MOV A,@R0
0253: 62      MOV T,A       ; Timer Reload with @27 for data bits
0254: 55      STRT T
0255: 26 55   JNT0 $0255    ; wait for CLK rising edge..
0257: EA 43   DJNZ R2,$0243 ; next data bit

0259: 23 01   MOV A,#$01    ; send Parity bit
025B: DB      XRL A,R3
025C: 67      RRC A
025D: 36 5D   JT0 $025D
025F: F6 65   JC $0265
0261: 9A 7F   ANL P2,#$7F
0263: 44 67   JMP $0267
0265: 8A 80   ORL P2,#$80
0267: 65      STOP TCNT

0268: F0      MOV A,@R0     ; send Stop bit..
0269: 62      MOV T,A
026A: 55      STRT T
026B: 26 6B   JNT0 $026B
026D: 44 6F   JMP $026F
026F: 36 6F   JT0 $026F
0271: 8A 80   ORL P2,#$80
0273: 65      STOP TCNT

0274: F0      MOV A,@R0     ; Wait for |_| on DATA (ACK)..
0275: 62      MOV T,A
0276: 55      STRT T
0277: 56 77   JT1 $0277
0279: 44 7B   JMP $027B
027B: 46 7B   JNT1 $027B
027D: 65      STOP TCNT

027E: 00      NOP
027F: 74 DE   CALL $03DE    ; pull CLK low and hold
0281: 27      CLR A         ; return A=0, OK
0282: 83      RET



*******************************************************************************
**   BANK 3:                                                                 **
**                                                                           **
**       $0300  set-2 to set-1 translation table (128 entries)               **
**       $0380  Read byte from AT-KBD (wait first for CLK pulled low by kbd) **
**       $03AE  Read byte from AT-KBD (CLK already pulled low by kbd)        **
**       $03D3  SEND BYTE to HOST (R4) and set STATUS (R1)                   **
**       $03DE  PULL CLK LOW and HOLD for AT-KBD                             **
*******************************************************************************

0300: ff 43 41 3f 3d 3b 3c 58 | 64 44 42 40 3e 0f 29 59
0310: 65 38 2a 70 1d 10 02 5a | 66 71 2c 1f 1e 11 03 5b
0320: 67 2e 2d 20 12 05 04 5c | 68 39 2f 21 14 13 06 5d
0330: 69 31 30 23 22 15 07 5e | 6a 72 32 24 16 08 09 5f
0340: 6b 33 25 17 18 0b 0a 60 | 6c 34 35 26 27 19 0c 61
0350: 6d 73 28 74 1a 0d 62 6e | 3a 36 1c 1b 75 2b 63 76
0360: 55 56 77 78 79 7a 0e 7b | 7c 4f 7d 4b 47 7e 7f 6f
0370: 52 53 50 4c 4d 48 01 45 | 57 4e 51 4a 37 49 46 54

  ; This was always a little mistique.. what is this really?

0380: B8 28   MOV R0,#$28   ; reload Timer with @28
0382: F0      MOV A,@R0     ; that is for $03AE!
0383: 62      MOV T,A

0384: 9A BF   ANL P2,#$BF   ; release CLK.. and wait for kbd to answer in a doesn't-make-sense-way(?)

0386: 27      CLR A         ; loop R1-times (6?)
0387: 26 AC   JNT0 $03AC    ;CLK pulled low by kbd?
0389: 17      INC A
038A: C6 90   JZ $0390
038C: 26 AC   JNT0 $03AC
038E: 64 87   JMP $0387
0390: 26 AC   JNT0 $03AC
0392: C9      DEC R1
0393: F9      MOV A,R1
0394: 96 86   JNZ $0386

0396: 64 A7   JMP $03A7     ; disable kbd and return with Timeout Error
0398: AA      MOV R2,A
0399: 74 DE   CALL $03DE    ; pull CLK low and hold
039B: FA      MOV A,R2
039C: 17      INC A
039D: C6 A3   JZ $03A3
039F: 9A BF   ANL P2,#$BF   ; release CLK..
03A1: 64 87   JMP $0387
03A3: C9      DEC R1
03A4: F9      MOV A,R1
03A5: 96 84   JNZ $0384

03A7: 74 DE   CALL $03DE    ; pull CLK low and hold
03A9: 23 02   MOV A,#$02    ; disable kbd and return with Timeout Error
03AB: 83      RET

03AC: 36 98   JT0 $0398     ; CLK pulled low by kbd AND stable? Yes.. we fall thru start reading byte

  ; Receive byte from AT-keyboard
  ; CLK fell.. and CMD5=0. Timer should be preloaded.
  ; we read DATA on falling edges of CLK
  ; and compute parity (will be returned in A)
  ; (Amazing how much 8-bit code fits into 37 bytes!:)

03AE: 55      STRT T
03AF: BA 09   MOV R2,#$09
03B1: BB 00   MOV R3,#$00
03B3: 26 B3   JNT0 $03B3
03B5: 67      RRC A
03B6: 36 B6   JT0 $03B6     ; wait for CLK falling edge..
03B8: 97      CLR C
03B9: 46 BD   JNT1 $03BD    ; read in DATA into Carry
03BB: A7      CPL C
03BC: 1B      INC R3
03BD: EA B3   DJNZ R2,$03B3
03BF: AC      MOV R4,A
03C0: 26 C0   JNT0 $03C0
03C2: 64 C4   JMP $03C4
03C4: 36 C4   JT0 $03C4
03C6: 65      STOP TCNT     ; done
03C7: 00      NOP
03C8: 74 DE   CALL $03DE    ; pull CLK low
03CA: FB      MOV A,R3      ; return parity: A=0 is OK
03CB: 12 D1   JB0 $03D1
03CD: 23 01   MOV A,#$01
03CF: 64 D2   JMP $03D2
03D1: 27      CLR A
03D2: 83      RET

  ; Send data and status to Host
  ;   R1 -&gt; STATUS (host can read 0x64)
  ;   R4 -&gt; DBBOUT (host can read 0x60)
  ;   this then sets OBF -&gt; IRQ1 on AT

03D3: 09      IN A,P1       ; Copy keylock status bit
03D4: 53 80   ANL A,#$80
03D6: 77      RR A
03D7: 77      RR A
03D8: 77      RR A
03D9: 49      ORL A,R1
03DA: 90      MOV STS,A     ; write STATUS
03DB: FC      MOV A,R4
03DC: 02      OUT DBB,A     ; write DBBOUT
03DD: 83      RET

  ; Frequently called.
  ; What does this mean to an AT-keyboard? Disable? Abort sending scan codes and wait for command?
  ; __
  ;   \____ _ _   pull CLK low and hold stable a while

03DE: 8A 40   ORL P2,#$40
03E0: B8 2A   MOV R0,#$2A
03E2: F0      MOV A,@R0
03E3: A8      MOV R0,A
03E4: E8 E4   DJNZ R0,$03E4
03E6: 83      RET


*****************************************************************
**   BANK 4:  XT-keyboard protocol routines                    **
**                                                             **
**       $0402  Read byte from XT-KBD                          **
**       $0450  Send byte to XT-KBD (hae?)                     **
*****************************************************************

  ; to read this page
0400: A3      MOVP A,@A
0401: 83      RET

  ; Read scan code from XT-KBD and handle errors
  ; send result to Host

0402: 94 1C   CALL $041C
0404: 12 1A   JB0 $041A     ;
0406: 32 14   JB1 $0414
0408: B9 00   MOV R1,#$00
040A: B8 20   MOV R0,#$20
040C: F0      MOV A,@R0
040D: 72 18   JB3 $0418
040F: 09      IN A,P1
0410: F2 18   JB7 $0418		; SW=1 send scan code to Host
0412: 84 1A   JMP $041A		; SW=0 exit to Main
0414: B9 40   MOV R1,#$40	;
0416: BC FF   MOV R4,#$FF
0418: 74 D3   CALL $03D3
041A: 24 02   JMP $0102     ; -&gt; Main

  ; Receive byte in XT-keyboard protocol
  ; CLK fell.. and CMD5=1

041C: 27      CLR A
041D: 62      MOV T,A
041E: 55      STRT T
041F: B8 09   MOV R0,#$09
0421: 27      CLR A
0422: 8A 80   ORL P2,#$80
0424: 00      NOP
0425: 00      NOP
0426: 00      NOP
0427: 00      NOP
0428: 26 37   JNT0 $0437
042A: B8 24   MOV R0,#$24
042C: F0      MOV A,@R0
042D: 17      INC A
042E: C6 31   JZ $0431
0430: A0      MOV @R0,A
0431: 23 01   MOV A,#$01
0433: 9A 7F   ANL P2,#$7F
0435: 84 4E   JMP $044E
0437: 26 37   JNT0 $0437
0439: 26 37   JNT0 $0437
043B: 97      CLR C
043C: 46 3F   JNT1 $043F
043E: A7      CPL C
043F: 67      RRC A
0440: 36 40   JT0 $0440
0442: 36 40   JT0 $0440
0444: E8 37   DJNZ R0,$0437
0446: 9A 7F   ANL P2,#$7F
0448: 26 48   JNT0 $0448
044A: 26 48   JNT0 $0448
044C: AC      MOV R4,A
044D: 27      CLR A
044E: 65      STOP TCNT
044F: 83      RET

  ; Send byte to XT-keyboard???

0450: D2 54   JB6 $0454     ; XLAT?
0452: 84 68   JMP $0468

0454: B9 00   MOV R1,#$00   ; XLAT=1
0456: E9 56   DJNZ R1,$0456
0458: FC      MOV A,R4
0459: AA      MOV R2,A
045A: D3 EE   XRL A,#$EE
045C: C6 60   JZ $0460
045E: BC FA   MOV R4,#$FA
0460: B9 00   MOV R1,#$00
0462: 74 D3   CALL $03D3    ; Send to Host
0464: FA      MOV A,R2
0465: 17      INC A
0466: 96 7A   JNZ $047A

  ; Set and hold.. then IDLE for XT-keyboard(?)
  ;                      ___
  ;     CLK   \___ __ __/
  ;             __ __ _
  ;    DATA    /       \____

0468: 8A 40   ORL P2,#$40   ; XLAT=0
046A: 8A 80   ORL P2,#$80
046C: B8 2C   MOV R0,#$2C   ; pull CLK low and set DATA high
046E: F0      MOV A,@R0
046F: A8      MOV R0,A
0470: B9 00   MOV R1,#$00
0472: E9 72   DJNZ R1,$0472
0474: E8 72   DJNZ R0,$0472 ; hold it in a loop of 256 x @2C
0476: 9A 7F   ANL P2,#$7F
0478: 9A BF   ANL P2,#$BF   ; set the XT idle state
047A: 83      RET


*******************************************************************************
**                                                                           **
**        BANK 5:  Command parser and most Commands                          **
*******************************************************************************

  ; to read this page
0500: A3      MOVP A,@A
0501: 83      RET

  ; There is a byte in DBBIN written to 0x64 bu the Host

0502: 22      IN A,DBB

  ; xxxx xxxx

0503: F2 09   JB7 $0509

  ; 0xxx xxxx

0505: D2 12   JB6 $0512

  ; 00xx xxxx

0507: A4 0D   JMP $050D

  ; 1xxx xxxx

0509: D2 8C   JB6 $058C

  ; 10xx xxxx

050B: A4 62   JMP $0562

  ; Command 00xx xxxx: Read RAM
  ; 0x00-0x1F will read 0x20-0x3F
  ; 0x20-0x3F will read 0x20-0x3F

050D: B4 59   CALL $0559    ; Compute RAM address
050F: F0      MOV A,@R0     ; read RAM into A
0510: A4 DE   JMP $05DE     ; -&gt; send A to Host and go Main

  ; Command 01xx xxxx: Write RAM
  ; 0x40-0x5F will write 0x20-0x3F
  ; 0x60-0x7F will write 0x20-0x3F

0512: B4 59   CALL $0559    ; Compute RAM address
0514: D6 14   JNIBF $0514   ; wait for byte from Host..
0516: 76 02   JF1 $0502     ; command? abort
0518: D3 20   XRL A,#$20    ; Host writes CMD BYTE?
051A: C6 20   JZ $0520      ; no, write RAM and exit
051C: 22      IN A,DBB
051D: A0      MOV @R0,A
051E: A4 E3   JMP $05E3     ; -&gt; Main

  ; This is special: Host writes CMD BYTE at 0x20
  ; watch the bits

0520: F0      MOV A,@R0     ; save CMD
0521: A9      MOV R1,A      ; into R1 (for re-enabling the AT-KBD)
0522: 22      IN A,DBB
0523: A0      MOV @R0,A     ; write CMD (!)

0524: 12 42   JB0 $0542     ; CMD0 (OBF)
0526: 9A EF   ANL P2,#$EF   ; P24=0 (OBF routed)

0528: 32 46   JB1 $0546     ; CMD1 (_IBF)
052A: 9A DF   ANL P2,#$DF   ; P25=0

052C: 52 4A   JB2 $054A     ; CMD2 (mirror of F0 in STATUS)
052E: 85      CLR F0        ; F0=0

052F: 92 4F   JB4 $054F     ; CMD4 (_EN)
0531: F9      MOV A,R1      ; check previous _EN
0532: 37      CPL A
0533: 92 39   JB4 $0539     ; _EN 1-&gt;0 transition? Host enabled a previously disabled keyboard?
0535: B9 2E   MOV R1,#$2E   ; just set flag @2E=1 for Main and do next bit
0537: B1 01   MOV @R1,#$01  ; (bc that will leave the AT-KBD disabled, CLK low!)
0539: F0      MOV A,@R0
053A: B2 53   JB5 $0553     ; CMD5?

  ; CMD5=0, set AT-KBD protocol: DISABLE AT-KBD on the wire immediately
  ;     ______
  ;  __/        set DATA high (idle)
  ;  ___
  ;     \_____  pull CLK low (= disable AT-KBD)

053C: 8A 80   ORL P2,#$80
053E: 8A 40   ORL P2,#$40
0540: A4 E3   JMP $05E3     ; -&gt; Main

  ; Host wrote CMD0 (OBF)

0542: 8A 10   ORL P2,#$10   ; P24=1 means enable OBF routing (= IRQ1 enable on AT)
0544: A4 28   JMP $0528     ; next bit..

  ; Host wrote CMD1 (_IBF)
0546: 8A 20   ORL P2,#$20   ; P25=1
0548: A4 2C   JMP $052C

  ; CMD2 (mirror of F0 in STATUS)
054A: B6 2F   JF0 $052F
054C: 95      CPL F0        ; F0=1
054D: A4 2F   JMP $052F

  ; Host set CMD4 (_EN) = DISABLE KEYBOARD
  ;  __
  ;    \______  pull CLK LOW immediately

054F: 8A 40   ORL P2,#$40
0551: A4 3A   JMP $053A

  ; CMD=1 (XT-keyboard protocol): SET XT-KBD to IDLE on the wire immediately
  ;  __
  ;    \______  DATA pulled low
  ;      _____
  ;  ___/       CLK high (idle) = this is XT-mode IDLE state.

0553: 9A 7F   ANL P2,#$7F
0555: 9A BF   ANL P2,#$BF
0557: A4 E3   JMP $05E3     ; -&gt; Main

  ; Compute RAM address for R/W commands
  ;   if 001x xxxx (0x20 - 0x3F) we leave it (actual RAM address)
  ;   if 000x xxxx (0x00 - 0x1F) we add the value @2B (that is reset to 0x20)

0559: 53 3F   ANL A,#$3F
055B: B2 60   JB5 $0560
055D: B8 2B   MOV R0,#$2B
055F: 60      ADD A,@R0
0560: A8      MOV R0,A
0561: 83      RET           ; return RAM address in R0

  ; 10xx xxxx

0562: 03 56   ADD A,#$56
0564: 96 68   JNZ $0568

  ; Command AA
  ; Self-test and Reset

0566: E4 00   JMP $0700

0568: 07      DEC A
0569: 96 6F   JNZ $056F

  ; Command AB
  ; Test kbd interface (DATA and CLK lines)

056B: D4 69   CALL $0669    ; returns 0 (OK), 1, 2, 3 or 4 in R4
056D: A4 DF   JMP $05DF     ; -&gt; send R4 to Host with OK, then -&gt;Main

056F: 07      DEC A
0570: 96 76   JNZ $0576

  ; Command AC
  ; Diagnostic Dump of 20 bytes in scan code set-1 format

0572: D4 12   CALL $0612
0574: A4 E3   JMP $05E3     ; -&gt; Main

0576: 07      DEC A
0577: 96 81   JNZ $0581

  ; Command AD
  ; Disable kbd interface
  ; = set _EN

0579: B8 20   MOV R0,#$20
057B: F0      MOV A,@R0
057C: 43 10   ORL A,#$10    ; CMD4=1 _EN (kbd disabled)
057E: A0      MOV @R0,A
057F: A4 E3   JMP $05E3     ; -&gt; Main

0581: 07      DEC A
0582: 96 E3   JNZ $05E3     ; -&gt; Main

  ; Command AE
  ; Enable kbd interface
  ; = clr _EN

0584: B8 20   MOV R0,#$20
0586: F0      MOV A,@R0
0587: 53 EF   ANL A,#$EF    ; CMD4=0 _EN (kbd enabled)
0589: A0      MOV @R0,A
058A: A4 E3   JMP $05E3     ; -&gt; Main

  ; 11xx xxxx

058C: B2 AC   JB5 $05AC

  ; 110x xxxx

058E: 92 CE   JB4 $05CE

  ; 1100 xxxx

0590: D3 C0   XRL A,#$C0
0592: 96 97   JNZ $0597

  ; Command C0
  ; Read P1 into A and return

0594: 09      IN A,P1
0595: A4 DE   JMP $05DE     ; -&gt; send A to Host and -&gt; Main

0597: D3 02   XRL A,#$02
0599: 96 A1   JNZ $05A1

  ; Command C2
  ; Read P1 higher nibble into STATUS (4..7 only)
  ; and loop until Host writes a dummy byte to 0x60 or 0x64 (!)
  ; (what is this? to let Host poll P1 through STATUS?)

059B: 09      IN A,P1
059C: 90      MOV STS,A
059D: D6 9B   JNIBF $059B
059F: A4 E3   JMP $05E3     ; -&gt; Main

05A1: D3 01   XRL A,#$01    ; ignore all other 0xCx
05A3: 96 E3   JNZ $05E3     ; -&gt; Main

  ; C1
  ; Read P1 lower nibble into STATUS (4..7 only)
  ; and loop until Host writes a dummy byte to 0x60 or 0x64 (!)
  ; (what is this? to let Host poll P1 through STATUS?)

05A5: 09      IN A,P1
05A6: 47      SWAP A
05A7: 90      MOV STS,A
05A8: D6 A5   JNIBF $05A5
05AA: A4 E3   JMP $05E3     ; -&gt; Main

05AC: 92 BC   JB4 $05BC
05AE: D3 E0   XRL A,#$E0    ; we ignore if not E0
05B0: 96 E3   JNZ $05E3     ; -&gt; Main

  ; Command E0
  ; Read T0/T1 input pins (CLK/DATA)

05B2: 26 B6   JNT0 $05B6
05B4: 43 01   ORL A,#$01
05B6: 46 DE   JNT1 $05DE
05B8: 43 02   ORL A,#$02
05BA: A4 DE   JMP $05DE     ; -&gt; send A to Host and -&gt; Main

  ; Command F0..FF
  ; Pulse P2 bits 0..3

05BC: AA      MOV R2,A
05BD: 37      CPL A
05BE: A9      MOV R1,A
05BF: B8 20   MOV R0,#$20
05C1: F0      MOV A,@R0
05C2: 47      SWAP A
05C3: 53 30   ANL A,#$30
05C5: AB      MOV R3,A
05C6: 0A      IN A,P2
05C7: 4B      ORL A,R3
05C8: 5A      ANL A,R2
05C9: 3A      OUTL P2,A
05CA: 49      ORL A,R1
05CB: 3A      OUTL P2,A
05CC: A4 E3   JMP $05E3     ; -&gt; Main

05CE: D3 D0   XRL A,#$D0
05D0: C6 DD   JZ $05DD

05D2: 07      DEC A
05D3: 96 E3   JNZ $05E3     ; -&gt; Main

  ; Command D1
  ; Write P2

05D5: D6 D5   JNIBF $05D5   ; wait for byte from Host (NB! infinite loop)
05D7: 76 02   JF1 $0502     ; 0x64 written? Parse command
05D9: 22      IN A,DBB      ; read byte written to 0x60
05DA: 3A      OUTL P2,A     ; out P2
05DB: A4 E3   JMP $05E3     ; -&gt; Main

  ; Command D0
  ; Read P2

05DD: 0A      IN A,P2       ; read P2

  ; Return to Main with sending A to Host

05DE: AC      MOV R4,A      ; send to Host fall through

  ; Return to Main with sending R4 to Host

05DF: B9 00   MOV R1,#$00   ; STATUS=OK
05E1: 74 D3   CALL $03D3    ; send R4 to Host

    ; Return to Main

05E3: 27      CLR A         ;
05E4: 24 02   JMP $0102     ; -&gt; Main


****************************************
***    BANK 6:  Command AC and AB     **
****************************************

  ; 16 ASCII hexa digits in scan code set-1 format
  ; Eg. 0B in scan code set-1 is the '0'-key..

0600: 0B 02 03 04 05 06 07 08 09 0A 1E 30 2E 20 12 21

  ; to read this page
0610: A3      MOVP A,@A
0611: 83      RET

  ; Command AC
  ; ==========
  ; Will send 20 bytes to Host in scan code set-1 format(!), like "10 06 E0 ..."
  ; First it stored these:
  ;   @30=P1
  ;   @31=P2
  ;   @32 T0/T1 (KB CLK and DATA from Test pins)
  ;   @33 PSW
  ; Then pumps 20 bytes out from @20-@33
  ;   @20 (CMD byte)
  ;   @21-@2F (different variables, error counters, see above)

0612: 23 10   MOV A,#$10    ; set _EN
0614: 90      MOV STS,A
0615: B8 30   MOV R0,#$30
0617: 09      IN A,P1
0618: A0      MOV @R0,A     ; @30=P1
0619: 18      INC R0
061A: 0A      IN A,P2
061B: A0      MOV @R0,A     ; @31=P2
061C: 18      INC R0
061D: 27      CLR A
061E: 26 22   JNT0 $0622
0620: 43 01   ORL A,#$01
0622: 46 26   JNT1 $0626
0624: 43 02   ORL A,#$02
0626: A0      MOV @R0,A     ; @32=T0/T1
0627: 18      INC R0
0628: C7      MOV A,PSW
0629: A0      MOV @R0,A     ; @33=PSW

062A: B9 14   MOV R1,#$14   ; Dump 20 bytes
062C: B8 20   MOV R0,#$20   ; from @20
062E: D6 32   JNIBF $0632   ; Host should just read patiently
0630: C4 57   JMP $0657     ; Host sending aborts dumping
0632: 86 2E   JOBF $062E
0634: D4 58   CALL $0658
0636: F0      MOV A,@R0
0637: 47      SWAP A        ; hexa hi-nibble first
0638: 53 0F   ANL A,#$0F
063A: A3      MOVP A,@A     ; look-up
063B: 02      OUT DBB,A     ; send scan code to Host
063C: D6 40   JNIBF $0640
063E: C4 57   JMP $0657
0640: 86 3C   JOBF $063C
0642: D4 58   CALL $0658    ; delay..
0644: F0      MOV A,@R0     ; hexa lo-nibble
0645: 53 0F   ANL A,#$0F
0647: A3      MOVP A,@A
0648: 02      OUT DBB,A
0649: D6 4D   JNIBF $064D
064B: C4 57   JMP $0657
064D: 86 49   JOBF $0649
064F: D4 58   CALL $0658
0651: 23 39   MOV A,#$39    ; send 0x39 (set-1 space? yes!)
0653: 02      OUT DBB,A
0654: 18      INC R0        ; inc pointer
0655: E9 2E   DJNZ R1,$062E ; loop
0657: 83      RET

  ; Some delay to give Host to remove characters

0658: F8      MOV A,R0
0659: AA      MOV R2,A
065A: F9      MOV A,R1
065B: AB      MOV R3,A
065C: B8 00   MOV R0,#$00
065E: B9 40   MOV R1,#$40
0660: E8 60   DJNZ R0,$0660
0662: E9 60   DJNZ R1,$0660
0664: FB      MOV A,R3
0665: A9      MOV R1,A
0666: FA      MOV A,R2
0667: A8      MOV R0,A
0668: 83      RET

  ; Command AB
  ; ==========
  ;   "lines stuck test"
  ;   returns 0 (OK), 1, 2, 3 or 4

0669: 9A BF   ANL P2,#$BF   ; release CLK line (=&gt; should be HIGH)
066B: 8A 80   ORL P2,#$80   ; release DATA line (=&gt; should be HIGH)

066D: B8 00   MOV R0,#$00
066F: 36 77   JT0 $0677     ; OK, CLK high
0671: E8 6F   DJNZ R0,$066F
0673: BC 01   MOV R4,#$01   ; Error, CLK stuck low
0675: C4 98   JMP $0698

0677: 8A 40   ORL P2,#$40   ; pull CLK low
0679: C4 7B   JMP $067B     ; delay
067B: 26 83   JNT0 $0683    ; OK, CLK low
067D: 9A BF   ANL P2,#$BF   ; (release CLK line anyway from my side)
067F: BC 02   MOV R4,#$02   ; Error, CLK stuck low
0681: C4 98   JMP $0698

0683: B8 00   MOV R0,#$00   ;
0685: 56 8D   JT1 $068D     ; OK, DATA high
0687: E8 85   DJNZ R0,$0685
0689: BC 03   MOV R4,#$03   ; Error, DATA stuck low
068B: C4 98   JMP $0698

068D: 9A 7F   ANL P2,#$7F   ; pull DATA low
068F: 00      NOP
0690: BC 00   MOV R4,#$00   ;
0692: 46 96   JNT1 $0696    ; OK
0694: BC 04   MOV R4,#$04   ; Error, DATA stuck high
0696: 8A 80   ORL P2,#$80   ; release DATA line anyway, exit

0698: 83      RET


**********************************
***     BANK7: SELF-TEST       ***
**********************************

  ; Entry point when Host sends Command AA

0700: 89 FF   ORL P1,#$FF
0702: 23 CF   MOV A,#$CF
0704: 3A      OUTL P2,A
0705: C5      SEL RB0

  ; Entry point after Reset

0706: 23 20   MOV A,#$20
0708: 90      MOV STS,A
0709: 96 0D   JNZ $070D
070B: 04 4F   JMP $004F
070D: 27      CLR A
070E: C6 12   JZ $0712
0710: 04 4F   JMP $004F
0712: 97      CLR C
0713: E6 17   JNC $0717
0715: 04 4F   JMP $004F
0717: A7      CPL C
0718: F6 1C   JC $071C
071A: 04 4F   JMP $004F
071C: 23 30   MOV A,#$30
071E: 90      MOV STS,A
071F: B8 00   MOV R0,#$00
0721: F8      MOV A,R0
0722: 96 52   JNZ $0752
0724: B8 55   MOV R0,#$55
0726: F8      MOV A,R0
0727: D3 55   XRL A,#$55
0729: 96 52   JNZ $0752
072B: B8 AA   MOV R0,#$AA
072D: F8      MOV A,R0
072E: D3 AA   XRL A,#$AA
0730: 96 52   JNZ $0752

0732: B8 7F   MOV R0,#$7F   ; 128 bytes of RAM
0734: F8      MOV A,R0
0735: A0      MOV @R0,A
0736: E8 34   DJNZ R0,$0734

0738: B8 7F   MOV R0,#$7F   ; 128 bytes of RAM
073A: F8      MOV A,R0
073B: D0      XRL A,@R0
073C: 96 52   JNZ $0752
073E: 23 55   MOV A,#$55
0740: A0      MOV @R0,A
0741: D0      XRL A,@R0
0742: 96 52   JNZ $0752
0744: 23 AA   MOV A,#$AA
0746: A0      MOV @R0,A
0747: D0      XRL A,@R0
0748: 96 52   JNZ $0752
074A: A0      MOV @R0,A
074B: D0      XRL A,@R0
074C: 96 52   JNZ $0752
074E: E8 3A   DJNZ R0,$073A
0750: E4 54   JMP $0754
0752: 04 4F   JMP $004F

0754: 23 40   MOV A,#$40    ; ROM checksum?
0756: 90      MOV STS,A
0757: 23 FF   MOV A,#$FF
0759: AE      MOV R6,A
075A: AF      MOV R7,A
075B: BA 08   MOV R2,#$08
075D: B8 00   MOV R0,#$00
075F: FA      MOV A,R2
0760: AB      MOV R3,A
0761: F8      MOV A,R0
0762: 37      CPL A
0763: 17      INC A
0764: EB 67   DJNZ R3,$0767
0766: A3      MOVP A,@A
0767: EB 6B   DJNZ R3,$076B
0769: D4 10   CALL $0610
076B: EB 6F   DJNZ R3,$076F
076D: B4 00   CALL $0500
076F: EB 73   DJNZ R3,$0773
0771: 94 00   CALL $0400
0773: EB 76   DJNZ R3,$0776
0775: E3      MOVP3 A,@A
0776: EB 7A   DJNZ R3,$077A
0778: 54 00   CALL $0200
077A: EB 7E   DJNZ R3,$077E
077C: 34 00   CALL $0100
077E: EB 82   DJNZ R3,$0782
0780: 14 8C   CALL $008C
0782: DE      XRL A,R6
0783: AD      MOV R5,A
0784: 47      SWAP A
0785: AC      MOV R4,A
0786: DD      XRL A,R5
0787: AE      MOV R6,A
0788: E7      RL A
0789: 53 E0   ANL A,#$E0
078B: DD      XRL A,R5
078C: 2E      XCH A,R6
078D: F7      RLC A
078E: 47      SWAP A
078F: 67      RRC A
0790: 67      RRC A
0791: E7      RL A
0792: 53 F1   ANL A,#$F1
0794: 2C      XCH A,R4
0795: 53 0F   ANL A,#$0F
0797: AD      MOV R5,A
0798: E7      RL A
0799: DC      XRL A,R4
079A: DF      XRL A,R7
079B: 2E      XCH A,R6
079C: DD      XRL A,R5
079D: AF      MOV R7,A
079E: E8 5F   DJNZ R0,$075F
07A0: EA 5F   DJNZ R2,$075F
07A2: FE      MOV A,R6
07A3: 96 AA   JNZ $07AA
07A5: FF      MOV A,R7
07A6: 96 AA   JNZ $07AA
07A8: E4 AC   JMP $07AC
07AA: 04 4F   JMP $004F

07AC: 23 50   MOV A,#$50    ; Test Timer intr
07AE: 90      MOV STS,A
07AF: 27      CLR A
07B0: 62      MOV T,A
07B1: 25      EN TCNTI      ; INT enable
07B2: B9 0F   MOV R1,#$0F
07B4: F4 C4   CALL $07C4    ; A=0 here
07B6: 32 C2   JB1 $07C2     ; A=2? Timer Intr occured
07B8: B9 02   MOV R1,#$02
07BA: F4 C4   CALL $07C4
07BC: 32 C0   JB1 $07C0
07BE: E4 C2   JMP $07C2
07C0: 04 5F   JMP $005F
07C2: 04 4F   JMP $004F

07C4: 55      STRT T        ; loop and let Timer intr happen
07C5: B8 00   MOV R0,#$00
07C7: E8 C7   DJNZ R0,$07C7
07C9: E9 C7   DJNZ R1,$07C7
07CB: 65      STOP TCNT
07CC: 00      NOP
07CD: 83      RET

  ; A0 38 (what is this at the end of the ROM?)
07FE: A0      MOV @R0,A
07FF: 38      OUTL P0,A



RAM Memory Map
==============
The 8042 has 128 bytes of RAM. The RAM also stores 2 x 8 General Registers and the Program Stack. The rest is used by the firmware for variables (eg. the COMMAND BYTE @20, timer reload values, flags) and for different *Error Counters*: they count an event from zero to 255, but not more, and can be read by the AC Command.
Theoretically.. the Host could write these parameters and affect the operation of the 8042! Eg. to change a timer reload value, clear an Error Counter, etc.. just thinking.


@00 --+     R0-R7
@01   |     8 BANK0 registers
@02   |     Direct RAM access:
@03   |       R0-R7 implicite in instruction byte
@04   |     Indirect RAM access:
@05   |       Indexed through @R0 or @R1
@06   |
@07 --+
@08 --+
@09   |
@0A   |
@0B   |
@0C   |
@0D   |     8 words (2 x 8 bytes)
@0E   |
@0F   |     PROGRAM STACK
@10   |
@11   |
@12   |
@13   |
@14   |
@15   |
@16   |
@17 --+
@18 --+
@19   |
@1A   |     R0'-R7'
@1B   |     8 BANK1 registers
@1C   |
@1D   |
@1E   |
@2F --+

@20 ---  COMMAND BYTE, the *mighty*
@21 ---  This is how many times we resend (FE) after parity error (init to 1)
@22 ---  (=0x06) Used in 380. checked for zero after succesful sending byte to kbd. If zero, jump back into main loop..
@23 ---  ERROR CNT: # of parity errors detected since reset
@24 ---  ERROR CNT: too short signal fall on CLK detected (noise?)
@25 ---  (=0x01) ?
@26 ---  TIMER RELOAD, first pulse, when Send BYTE to KBD (init to 0x00)
@27 ---  TIMER RELOAD, bit pulses, when Send BYTE to KBD (init to 0xFB)
@28 ---  Timer reload (=0xE0): after kbd pulls down CLK, this is how much we wait to set it high again.
@29 ---  (=0x06) ?
@2A ---  loop counter for pulling CLK low and hold it stable for a while (how long? 60us? 250us?)
@2B ---  base for RAM write command = 0x20
@2C ---  loop counter for XT-keyboard before set to IDLE
@2D ---  make/brake code (0x00 or 0x80) for scan code set-2
@2E ---  flag, Host has enabled a previously disabled kbd by clearing _EN in Command Byte
@2F ---  ERROR CNT: IBF interrupt occured (not supposed to, we poll IBF)
@30 ---  We copy P1 here for CMD AC (Diagnostic Dump)
@31 ---  We copy P2 here for CMD AC (Diagnostic Dump)
@32 ---  bit0: T0, bit1:T1 (KB CLK and DATA from Test pins) for CMD AC (Diagnostic Dump)
@33 ---  PSW (Program Status Word) of the 8042, for CMD AC (Diagnostic Dump)

@34-@7F   unused?</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_art_of_assembly">36.4.2. art_of_assembly</h4>
<div class="ulist">
<ul>
<li>
<p>Capítulo 20 del libro art_of_assembly: <a href="http://flint.cs.yale.edu/cs422/doc/art-of-asm/pdf/index.html" class="bare">http://flint.cs.yale.edu/cs422/doc/art-of-asm/pdf/index.html</a></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_kernel_2">36.4.3. Kernel</h4>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">candido@lur:~<span class="nv">$ </span>dmesg | <span class="nb">grep </span>keyboard
<span class="o">[</span>    1.770000] input: AT Translated Set 2 keyboard as /devices/platform/i8042/serio0/input/input3 <span class="nt">-------</span><span class="o">&gt;</span> i8042 KEYBOARD CONTROLLER</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">candido@lur:/<span class="nv">$ </span>dmesg | <span class="nb">grep </span>i8042
<span class="o">[</span>    1.761204] i8042: PNP: PS/2 Controller <span class="o">[</span>PNP0303:KBD,PNP0f13:MOU] at 0x60,0x64 irq 1,12
<span class="o">[</span>    1.765743] serio: i8042 KBD port at 0x60,0x64 irq 1
<span class="o">[</span>    1.765756] serio: i8042 AUX port at 0x60,0x64 irq 12
<span class="o">[</span>    1.769527] input: AT Translated Set 2 keyboard as /devices/platform/i8042/serio0/input/input3
<span class="o">[</span>   19.011310] input: SynPS/2 Synaptics TouchPad as /devices/platform/i8042/serio1/input/input5
<span class="o">[</span>   27.025577] input: TPPS/2 IBM TrackPoint as /devices/platform/i8042/serio1/serio2/input/input14</code></pre>
</div>
</div>
<div class="paragraph">
<p>Al arrancar el ordenador unicamente carga &#8230;&#8203;..</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh"><span class="nv">$lsmod</span> -&gt; modulos cargables cargados.</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_xorg">36.4.4. Xorg</h4>
<div class="ulist">
<ul>
<li>
<p>Estrategia:</p>
<div class="ulist">
<ul>
<li>
<p>Desenrredar el ovillo partiendo de <code>man xorg</code>.</p>
</li>
<li>
<p>Comienzo por los ficheros de configuración xorg.conf.d:  <a href="http://www.x.org/archive/current/doc/man/man5/xorg.conf.5.xhtml">man 5 xorg</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh"><span class="nb">ls</span> <span class="nt">-l</span> /usr/share/X11
total 68
drwxr-xr-x 62 root root  4096 May 29 07:00 locale
lrwxrwxrwx  1 root root    16 Mar 22  2012 rgb.txt -&gt; /etc/X11/rgb.txt
<span class="nt">-rw-r--r--</span>  1 root root 41495 Mar  2  2012 XErrorDB
drwxr-xr-x 10 root root  4096 Jul 27 15:09 xkb
<span class="nt">-rw-r--r--</span>  1 root root  8305 Mar  7  2012 xman.help
drwxr-xr-x  2 root root  4096 Sep 29 04:46 xorg.conf.d</code></pre>
</div>
</div>
<div class="paragraph">
<p>Fichero de configuración (xorg.conf) en X11/xorg.conf.d/  de los dispositivos de entrada</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">candido@lur:~<span class="nv">$ </span><span class="nb">cat</span> /usr/share/X11/xorg.conf.d/10-evdev.conf
<span class="c">#</span>
<span class="c"># Catch-all evdev loader for udev-based systems</span>
<span class="c"># We don't simply match on any device since that also adds accelerometers</span>
<span class="c"># and other devices that we don't really want to use. The list below</span>
<span class="c"># matches everything but joysticks.</span>

Section <span class="s2">"InputClass"</span>
        Identifier <span class="s2">"evdev pointer catchall"</span>
        MatchIsPointer <span class="s2">"on"</span>
        MatchDevicePath <span class="s2">"/dev/input/event*"</span>
        Driver <span class="s2">"evdev"</span>
EndSection

Section <span class="s2">"InputClass"</span>
        Identifier <span class="s2">"evdev keyboard catchall"</span>
        MatchIsKeyboard <span class="s2">"on"</span>
        MatchDevicePath <span class="s2">"/dev/input/event*"</span>
        Driver <span class="s2">"evdev"</span>
EndSection

Section <span class="s2">"InputClass"</span>
        Identifier <span class="s2">"evdev touchpad catchall"</span>
        MatchIsTouchpad <span class="s2">"on"</span>
        MatchDevicePath <span class="s2">"/dev/input/event*"</span>
        Driver <span class="s2">"evdev"</span>
EndSection

Section <span class="s2">"InputClass"</span>
        Identifier <span class="s2">"evdev tablet catchall"</span>
        MatchIsTablet <span class="s2">"on"</span>
        MatchDevicePath <span class="s2">"/dev/input/event*"</span>
        Driver <span class="s2">"evdev"</span>
EndSection

Section <span class="s2">"InputClass"</span>
        Identifier <span class="s2">"evdev touchscreen catchall"</span>
        MatchIsTouchscreen <span class="s2">"on"</span>
        MatchDevicePath <span class="s2">"/dev/input/event*"</span>
        Driver <span class="s2">"evdev"</span>
EndSection</code></pre>
</div>
</div>
<div class="paragraph">
<p>xorg_web:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The most commonly used input drivers are evdev(4) on Linux systems, and kbd(4) and mousedrv(4) on other platforms.</p>
</li>
<li>
<p>evdev: EVent DEVice</p>
</li>
<li>
<p>INPUTCLASS SECTION:</p>
<div class="ulist">
<ul>
<li>
<p>The config file may have multiple InputClass sections. These sections are optional and are used to provide configuration for a <em>class</em> of input devices as they are <em>automatically added</em>, es decir, hot plug. An input device can match more than one InputClass section. Each class can override settings from a previous class, so it is best to arrange the sections with the most generic matches first.</p>
</li>
</ul>
</div>
</li>
<li>
<p>El fichero de configuracion lógicamente es una capa de alto nivel del servidor Xorg, es la parte Front end. El Back end será el chipset y el driver del teclado.</p>
</li>
<li>
<p>evdev  is  an  Xorg  input  driver  for Linux´s generic event devices.</p>
</li>
<li>
<p>The evdev driver can serve as both a pointer and a keyboard input device. Multiple input devices are supported by multiple  instances of this driver. En nuestro fichero de configuracion tenemos el driver evdev para: tablet, wacom, toucscreen, touchpad, keyboard, pointer.</p>
</li>
<li>
<p>el driver evdev de Xorg accederá a drivers específicos del kernel.</p>
</li>
<li>
<p>xserver-xorg-input-kbd: driver de Xorg para el teclado</p>
</li>
<li>
<p>La distribución <a href="https://wiki.archlinux.org/index.php/Xorg#Keyboard_settings">archlinux</a> aclara la función de servidor xorg.</p>
</li>
</ul>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
La documentación del  <a href="http://www.kernel.org/doc/Documentation/input/input.txt">kernel</a> es la clave para comprender el driver del teclado: kernel &#8594; Linux Input drivers v1.0 (c) 1999-2001 Vojtech Pavlik &lt;<a href="mailto:vojtech@ucw.cz">vojtech@ucw.cz</a>&gt; Sponsored by SuSE
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><a href="http://www.kernel.org/doc/Documentation/input/input.txt">kernel</a>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Detailed Description(3):</p>
<div class="ulist">
<ul>
<li>
<p>Device drivers(3.1):Device drivers are the modules that generate events. The events are however not useful without being handled, so you also will need to use some of the modules from section 3.2.</p>
</li>
<li>
<p>Event handlers(3.2):Event handlers distribute the events from the devices to userland and kernel, as needed.</p>
<div class="ulist">
<ul>
<li>
<p>keybdev(3.2.1): keybdev is currently a rather ugly hack that translates the input events into architecture-specific keyboard raw mode (Xlated AT Set2 on x86), and passes them into the handle_scancode function of the keyboard.c module. This works well enough on all architectures that keybdev can generate rawmode on, other architectures can be added to it.   The right way would be to pass the events to keyboard.c directly, best if keyboard.c would itself be an event handler. This is done in the input patch, available on the webpage mentioned below.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>device driver (genera events) &#8594; event handler &#8594;</p>
</div>
<div class="paragraph">
<p><a href="http://www.kernel.org/doc/Documentation/input/">kernel_inputs</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">Parent Directory                              -
amijoy.txt               28-Apr-2011 01:03  7.5K
appletouch.txt           26-Jul-2011 17:58  3.2K
atarikbd.txt             28-Apr-2011 01:03   25K
bcm5974.txt              26-Jul-2011 17:58  2.2K
cd32.txt                 28-Apr-2011 01:03  535
cma3000_d0x.txt          26-Jul-2011 17:58  2.8K
cs461x.txt               28-Apr-2011 01:03  2.1K
elantech.txt             11-Aug-2011 22:14   14K
event-codes.txt          30-Jul-2011 17:08   10K
ff.txt                   26-Jul-2011 17:58  7.4K
gameport-programming.txt 28-Apr-2011 01:03  5.8K
iforce-protocol.txt      26-Jul-2011 17:58  7.5K
input-programming.txt    28-Apr-2011 01:03   10K
input.txt                26-Jul-2011 17:58   11K
interactive.fig          28-Apr-2011 01:03  1.4K
joystick-api.txt         28-Apr-2011 01:03  9.4K
joystick-parport.txt     30-Jul-2011 17:08   20K
joystick.txt             26-Jul-2011 17:58   20K
multi-touch-protocol.txt 26-Jul-2011 17:58   13K
notifier.txt             28-Apr-2011 01:03  1.7K
ntrig.txt                26-Jul-2011 17:58  5.4K
rotary-encoder.txt       11-Aug-2011 22:14  3.8K
sentelic.txt             26-Jul-2011 17:58   22K
shape.fig                28-Apr-2011 01:03  1.9K
walkera0701.txt          30-Jul-2011 17:08  3.8K
xpad.txt                 26-Jul-2011 17:58  6.8K
yealink.txt              28-Apr-2011 01:03  6.0K</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ficheros interesantes: input.txt, event-codes.txt, input-programming.txt</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">candido@lur:~<span class="nv">$ </span><span class="nb">sudo grep</span> <span class="nt">-Ei</span> <span class="s1">'keyboard'</span> /var/log/Xorg.0.log
<span class="o">[</span>    40.745] <span class="o">(</span>II<span class="o">)</span> Initializing built-in extension XKEYBOARD
<span class="o">[</span>    41.601] <span class="o">(</span><span class="k">**</span><span class="o">)</span> Power Button: Applying InputClass <span class="s2">"evdev keyboard catchall"</span>
<span class="o">[</span>    41.647] <span class="o">(</span>II<span class="o">)</span> evdev: Power Button: Configuring as keyboard
<span class="o">[</span>    41.647] <span class="o">(</span>II<span class="o">)</span> XINPUT: Adding extended input device <span class="s2">"Power Button"</span> <span class="o">(</span><span class="nb">type</span>: KEYBOARD, <span class="nb">id </span>6<span class="o">)</span>
<span class="o">[</span>    41.675] <span class="o">(</span><span class="k">**</span><span class="o">)</span> Video Bus: Applying InputClass <span class="s2">"evdev keyboard catchall"</span>
<span class="o">[</span>    41.675] <span class="o">(</span>II<span class="o">)</span> evdev: Video Bus: Configuring as keyboard
<span class="o">[</span>    41.675] <span class="o">(</span>II<span class="o">)</span> XINPUT: Adding extended input device <span class="s2">"Video Bus"</span> <span class="o">(</span><span class="nb">type</span>: KEYBOARD, <span class="nb">id </span>7<span class="o">)</span>
<span class="o">[</span>    41.675] <span class="o">(</span><span class="k">**</span><span class="o">)</span> Sleep Button: Applying InputClass <span class="s2">"evdev keyboard catchall"</span>
<span class="o">[</span>    41.675] <span class="o">(</span>II<span class="o">)</span> evdev: Sleep Button: Configuring as keyboard
<span class="o">[</span>    41.675] <span class="o">(</span>II<span class="o">)</span> XINPUT: Adding extended input device <span class="s2">"Sleep Button"</span> <span class="o">(</span><span class="nb">type</span>: KEYBOARD, <span class="nb">id </span>8<span class="o">)</span>
<span class="o">[</span>    41.677] <span class="o">(</span>II<span class="o">)</span> config/udev: Adding input device AT Translated Set 2 keyboard <span class="o">(</span>/dev/input/event3<span class="o">)</span>
<span class="o">[</span>    41.677] <span class="o">(</span><span class="k">**</span><span class="o">)</span> AT Translated Set 2 keyboard: Applying InputClass <span class="s2">"evdev keyboard catchall"</span>
<span class="o">[</span>    41.677] <span class="o">(</span>II<span class="o">)</span> Using input driver <span class="s1">'evdev'</span> <span class="k">for</span> <span class="s1">'AT Translated Set 2 keyboard'</span>
<span class="o">[</span>    41.677] <span class="o">(</span><span class="k">**</span><span class="o">)</span> AT Translated Set 2 keyboard: always reports core events
<span class="o">[</span>    41.677] <span class="o">(</span><span class="k">**</span><span class="o">)</span> evdev: AT Translated Set 2 keyboard: Device: <span class="s2">"/dev/input/event3"</span>
<span class="o">[</span>    41.677] <span class="o">(</span><span class="nt">--</span><span class="o">)</span> evdev: AT Translated Set 2 keyboard: Vendor 0x1 Product 0x1
<span class="o">[</span>    41.677] <span class="o">(</span><span class="nt">--</span><span class="o">)</span> evdev: AT Translated Set 2 keyboard: Found keys
<span class="o">[</span>    41.677] <span class="o">(</span>II<span class="o">)</span> evdev: AT Translated Set 2 keyboard: Configuring as keyboard
<span class="o">[</span>    41.677] <span class="o">(</span>II<span class="o">)</span> XINPUT: Adding extended input device <span class="s2">"AT Translated Set 2 keyboard"</span> <span class="o">(</span><span class="nb">type</span>: KEYBOARD, <span class="nb">id </span>9<span class="o">)</span>
<span class="o">[</span>    41.718] <span class="o">(</span><span class="k">**</span><span class="o">)</span> ThinkPad Extra Buttons: Applying InputClass <span class="s2">"evdev keyboard catchall"</span>
<span class="o">[</span>    41.718] <span class="o">(</span>II<span class="o">)</span> evdev: ThinkPad Extra Buttons: Configuring as keyboard
<span class="o">[</span>    41.718] <span class="o">(</span>II<span class="o">)</span> XINPUT: Adding extended input device <span class="s2">"ThinkPad Extra Buttons"</span> <span class="o">(</span><span class="nb">type</span>: KEYBOARD, <span class="nb">id </span>12<span class="o">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>xorg.conf</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh"><span class="nv">$ </span>locate xorg.conf
/usr/share/X11/xorg.conf.d
/usr/share/X11/xorg.conf.d/10-evdev.conf
/usr/share/X11/xorg.conf.d/11-evdev-quirks.conf
/usr/share/X11/xorg.conf.d/11-evdev-trackpoint.conf
/usr/share/X11/xorg.conf.d/50-synaptics.conf
/usr/share/X11/xorg.conf.d/50-vmmouse.conf
/usr/share/X11/xorg.conf.d/50-wacom.conf
/usr/share/X11/xorg.conf.d/51-synaptics-quirks.conf
/usr/share/man/man5/xorg.conf.5.gz
/usr/share/man/man5/xorg.conf.d.5.gz</code></pre>
</div>
</div>
<div class="paragraph">
<p>librería driver evdev</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">/usr/lib/xorg/modules/input/evdev_drv.so</code></pre>
</div>
</div>
<div class="paragraph">
<p>keymap-keycodes</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">candido@lur:/usr/share/X11/xkb<span class="nv">$ </span><span class="nb">ls
</span>compat      geometry      keycodes      keymap      rules      semantics.dir  symbols.dir  types.dir
compat.dir  geometry.dir  keycodes.dir  keymap.dir  semantics  symbols        types</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_keyboard_controller_i8042">36.4.5. keyboard controller i8042</h4>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">candido@lur:~<span class="nv">$ </span>locate i8042
/usr/src/linux-3.4.4/arch/arm/mach-vt8500/include/mach/i8042.h
/usr/src/linux-3.4.4/drivers/input/serio/i8042-io.h
/usr/src/linux-3.4.4/drivers/input/serio/i8042-ip22io.h
/usr/src/linux-3.4.4/drivers/input/serio/i8042-jazzio.h
/usr/src/linux-3.4.4/drivers/input/serio/i8042-ppcio.h
/usr/src/linux-3.4.4/drivers/input/serio/i8042-snirm.h
/usr/src/linux-3.4.4/drivers/input/serio/i8042-sparcio.h
/usr/src/linux-3.4.4/drivers/input/serio/i8042-unicore32io.h
/usr/src/linux-3.4.4/drivers/input/serio/i8042-x86ia64io.h
/usr/src/linux-3.4.4/drivers/input/serio/i8042.c
/usr/src/linux-3.4.4/drivers/input/serio/i8042.h
/usr/src/linux-3.4.4/include/linux/i8042.h
/usr/src/linux-headers-3.2.0-30/arch/arm/mach-vt8500/include/mach/i8042.h
/usr/src/linux-headers-3.2.0-30/include/linux/i8042.h
/usr/src/linux-headers-3.2.0-30-generic/include/config/serio/i8042.h
/usr/src/linux-headers-3.2.0-30-generic/include/linux/i8042.h
/usr/src/linux-headers-3.2.0-31/arch/arm/mach-vt8500/include/mach/i8042.h
/usr/src/linux-headers-3.2.0-31/include/linux/i8042.h
/usr/src/linux-headers-3.2.0-31-generic/include/config/serio/i8042.h
/usr/src/linux-headers-3.2.0-31-generic/include/linux/i8042.h
candido@lur:~<span class="err">$</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh"><span class="nv">$ </span><span class="nb">ls</span> <span class="nt">-l</span> /usr/src/linux-headers-3.2.0-31/include/linux/i8042.h
<span class="nt">-rw-r--r--</span> 1 root root 1839 Jan  5  2012 /usr/src/linux-headers-3.2.0-31/include/linux/i8042.h
<span class="nb">ls</span> <span class="nt">-l</span> /usr/src/linux-3.4.4/drivers/input/serio/i8042.c
<span class="nt">-rw-rw-r--</span> 1 root root 34037 Jun 22 20:37 /usr/src/linux-3.4.4/drivers/input/serio/i8042.c</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_drivers_fuentes">36.4.6. Drivers Fuentes</h4>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">candido@lur:/usr/src/linux-3.4.4/drivers/input/keyboard<span class="nv">$ </span><span class="nb">ls
</span>adp5520-keys.c     ep93xx_keypad.c     jornada720_kbd.c  max7359_keypad.c      pmic8xxx-keypad.c  stmpe-keypad.c      twl4030_keypad.c
adp5588-keys.c     gpio_keys.c         Kconfig           mcs_touchkey.c        pxa27x_keypad.c    stowaway.c          w90p910_keypad.c
adp5589-keys.c     gpio_keys_polled.c  lkkbd.c           mpr121_touchkey.c     pxa930_rotary.c    sunkbd.c            xtkbd.c
amikbd.c           hil_kbd.c           lm8323.c          newtonkbd.c           qt1070.c           tc3589x-keypad.c
atakbd.c           hilkbd.c            locomokbd.c       nomadik-ske-keypad.c  qt2160.c           tca6416-keypad.c
atkbd.c            hpps2atkbd.h        Makefile          omap4-keypad.c        samsung-keypad.c   tca8418_keypad.c
bf54x-keys.c       imx_keypad.c        maple_keyb.c      omap-keypad.c         sh_keysc.c         tegra-kbc.c
davinci_keyscan.c  jornada680_kbd.c    matrix_keypad.c   opencores-kbd.c       spear-keyboard.c   tnetv107x-keypad.c</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>atkbd.c parece que es el driver que carga ya que en dmesg habla de un AT keyboard. Para ser ese el driver debe de haber un programa *.ko.</p>
</li>
<li>
<p>El chino tiene un atkbd.c ejecutable desde el espacio de usuario en lugar de desde el espacio del kernel.</p>
</li>
<li>
<p>Con el comando <code>lsmod</code> no se lista ningún módulo con el nombre atkbd.</p>
</li>
<li>
<p>Me oriento hacia cómo se ha configurado el kernel para su compilación</p>
<div class="ulist">
<ul>
<li>
<p><a href="http://how-to.wikia.com/wiki/How_to_configure_the_Linux_kernel/drivers/input/keyboard">configuration_kernel_drivers_input_keyboard</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>después de mucho buscar se ve la luz:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">candido@lur:~<span class="nv">$ </span><span class="nb">sudo </span>lsmod | <span class="nb">grep </span>serio
serio_raw              13211  0
candido@lur:~<span class="nv">$ </span>locate serio_raw
/lib/modules/3.2.0-30-generic/kernel/drivers/input/serio/serio_raw.ko
/lib/modules/3.2.0-31-generic/kernel/drivers/input/serio/serio_raw.ko
/usr/src/linux-3.4.4/drivers/input/serio/serio_raw.c</code></pre>
</div>
</div>
</li>
<li>
<p>otra dirección sobre configuración del kernel:http://lxr.linux.no/#linux+v3.6.2/drivers/input/keyboard/Kconfig[Kconfig]</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">config KEYBOARD_ATKBD
  70        tristate <span class="s2">"AT keyboard"</span> <span class="k">if </span>EXPERT <span class="o">||</span> <span class="o">!</span>X86
  71        default y
  72        <span class="k">select </span>SERIO
  73        <span class="k">select </span>SERIO_LIBPS2
  74        <span class="k">select </span>SERIO_I8042 <span class="k">if </span>X86
  75        <span class="k">select </span>SERIO_GSCPS2 <span class="k">if </span>GSC
  76        <span class="nb">help
  </span>77          Say Y here <span class="k">if </span>you want to use a standard AT or PS/2 keyboard. Usually
  78          you<span class="s1">'ll need this, unless you have a different type keyboard (USB, ADB
  79          or other). This also works for AT and PS/2 keyboards connected over a
  80          PS/2 to serial converter.
  81
  82          If unsure, say Y.
  83
  84          To compile this driver as a module, choose M here: the
  85          module will be called atkbd.</span></code></pre>
</div>
</div>
</li>
<li>
<p>Otra dirección sobre configuración del kernel drivers: <a href="http://cateee.net/lkddb/web-lkddb/KEYBOARD_ATKBD.html">lkddb</a></p>
</li>
<li>
<p>Parece que el driver del teclado que tiene el kernel es el serio_raw.ko</p>
</li>
<li>
<p>Como saber si es ese el kernel que utiliza el Xserver?</p>
</li>
<li>
<p>Desde el espacio de usuario hay alguna forma de utilizar el módulo serio_raw.ko?</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_udev">36.5. udev</h3>
<div class="paragraph">
<p>Dispositivos en el directorio /dev</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">candido@lur:/<span class="nv">$ </span><span class="nb">ls</span> /dev
agpgart          dvdrw     loop5               psaux  ram7      snd     tty17  tty31  tty46  tty60      ttyS16  ttyS30   vcs3
autofs           ecryptfs  loop6               ptmx   ram8      sr0     tty18  tty32  tty47  tty61      ttyS17  ttyS31   vcs4
block            fb0       loop7               pts    ram9      stderr  tty19  tty33  tty48  tty62      ttyS18  ttyS4    vcs5
bsg              fd        loop-control        ram0   random    stdin   tty2   tty34  tty49  tty63      ttyS19  ttyS5    vcs6
btrfs-control    full      mapper              ram1   rfkill    stdout  tty20  tty35  tty5   tty7       ttyS2   ttyS6    vcs7
bus              fuse      mcelog              ram10  rtc       tpm0    tty21  tty36  tty50  tty8       ttyS20  ttyS7    vcsa
cdrom            fw0       mei                 ram11  rtc0      <span class="nb">tty     </span>tty22  tty37  tty51  tty9       ttyS21  ttyS8    vcsa1
cdrw             hpet      mem                 ram12  sda       tty0    tty23  tty38  tty52  ttyprintk  ttyS22  ttyS9    vcsa2
char             input     net                 ram13  sda1      tty1    tty24  tty39  tty53  ttyS0      ttyS23  uinput   vcsa3
console          kmsg      network_latency     ram14  sda2      tty10   tty25  tty4   tty54  ttyS1      ttyS24  urandom  vcsa4
core             log       network_throughput  ram15  sda3      tty11   tty26  tty40  tty55  ttyS10     ttyS25  usbmon0  vcsa5
cpu              loop0     null                ram2   sda4      tty12   tty27  tty41  tty56  ttyS11     ttyS26  usbmon1  vcsa6
cpu_dma_latency  loop1     nvram               ram3   sg0       tty13   tty28  tty42  tty57  ttyS12     ttyS27  usbmon2  vcsa7
disk             loop2     oldmem              ram4   sg1       tty14   tty29  tty43  tty58  ttyS13     ttyS28  vcs      vga_arbiter
dri              loop3     port                ram5   shm       tty15   tty3   tty44  tty59  ttyS14     ttyS29  vcs1     watchdog
dvd              loop4     ppp                 ram6   snapshot  tty16   tty30  tty45  tty6   ttyS15     ttyS3   vcs2     zero
candido@lur:/<span class="nv">$ </span><span class="nb">ls</span> /dev/input
candido@lur:/<span class="nv">$ </span><span class="nb">ls</span> /dev/input
by-path  event1   event11  event13  event2  event4  event6  event8  mice    mouse1
event0   event10  event12  event14  event3  event5  event7  event9  mouse0
candido@lur:/<span class="nv">$ </span><span class="nb">ls</span> /dev/input/by-path/
platform-i8042-serio-0-event-kbd    platform-i8042-serio-1-mouse        platform-i8042-serio-2-mouse
platform-i8042-serio-1-event-mouse  platform-i8042-serio-2-event-mouse  platform-thinkpad_acpi-event
candido@lur:/<span class="nv">$ </span><span class="nb">ls</span> <span class="nt">-l</span> /dev/input/by-path/platform-i8042-serio-0-event-kbd
lrwxrwxrwx 1 root root 9 Oct 14 07:02 /dev/input/by-path/platform-i8042-serio-0-event-kbd -&gt; ../event3
candido@lur:/<span class="nv">$ </span><span class="nb">ls</span> <span class="nt">-l</span> /dev/input/by-path/platform-i8042-serio-0-event-kbd
lrwxrwxrwx 1 root root 9 Oct 14 07:02 /dev/input/by-path/platform-i8042-serio-0-event-kbd -&gt; ../event3
candido@lur:/<span class="nv">$ </span><span class="nb">cat</span> /dev/input/event3
<span class="nb">cat</span>: /dev/input/event3: Permission denied</code></pre>
</div>
</div>
<div class="paragraph">
<p>relación con KEYBOARD: input,bus,tty</p>
</div>
<div class="sect3">
<h4 id="_character_devices">36.5.1. character devices</h4>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">candido@lur:/<span class="nv">$ </span><span class="nb">cat</span> /proc/devices
Character devices:
  1 mem
  4 /dev/vc/0
  4 <span class="nb">tty
  </span>4 ttyS
  5 /dev/tty
  5 /dev/console
  5 /dev/ptmx
  5 ttyprintk
  6 lp
  7 vcs
 10 misc
 13 input   <span class="nt">--------------</span><span class="o">&gt;</span> KEYBOARD
 14 sound
 21 sg
 29 fb
 99 ppdev
108 ppp
116 alsa
128 ptm
136 pts
180 usb
189 usb_device
216 rfcomm
226 drm
250 mei
251 firewire
252 usbmon
253 bsg
254 rtc

Block devices:
  1 ramdisk
259 blkext
  7 loop
  8 sd
  9 md
 11 sr
 65 sd
 66 sd
 67 sd
 68 sd
 69 sd
 70 sd
 71 sd
128 sd
129 sd
130 sd
131 sd
132 sd
133 sd
134 sd
135 sd
252 device-mapper
253 virtblk
254 mdp</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_proc">36.5.2. /proc</h4>
<div class="paragraph">
<p>Informacion humana sobre los dispositivos en tiempo real en /proc/ &#8594; BASICOS</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">candido@lur:/<span class="nv">$ </span><span class="nb">ls</span> /proc/
1     1181  1348  1839  1900  2     2229  2542  30    382   7263  8581       cmdline      irq            net            <span class="nb">tty
</span>10    1182  1365  1841  1901  20    2270  2545  31    39    737   8587       consoles     kallsyms       pagetypeinfo   <span class="nb">uptime
</span>1035  1183  1479  1857  1904  2010  2284  2546  32    3967  738   8618       cpuinfo      kcore          partitions     version
1065  1198  15    1862  1907  2012  2290  2553  3369  3979  742   8622       crypto       key-users      sched_debug    version_signature
1100  12    1541  1865  1919  2018  2292  2554  3370  40    743   877        devices      kmsg           schedstat      vmallocinfo
1102  1200  1574  1867  1921  2020  2294  26    3371  48    7511  8868       diskstats    kpagecount     scsi           vmstat
1108  1205  16    1872  1939  2027  2296  27    3372  50    7531  888        dma          kpageflags     self           zoneinfo
1115  1208  1686  1875  1940  2034  23    2703  3373  51    769   8881       dri          latency_stats  slabinfo
1122  1228  1690  1877  1946  2039  234   2708  3397  52    79    889        driver       loadavg        softirqs
1126  1237  17    1879  1948  2046  2362  2742  34    5263  8     9          execdomains  locks          <span class="nb">stat
</span>1127  1244  1780  1880  1961  2047  24    28    35    53    80    942        fb           mdstat         swaps
1158  1269  1794  1881  1966  2053  2409  2837  36    54    81    acpi       filesystems  meminfo        sys
1159  1274  18    1884  1968  2061  2453  29    3689  55    811   asound     fs           misc           sysrq-trigger
1161  1280  1831  1885  1969  2069  2457  295   37    58    812   buddyinfo  interrupts   modules        sysvipc
1179  13    1834  1896  1970  21    2464  296   377   6     82    bus        iomem        mounts         timer_list
1180  1341  1835  19    1971  22    2466  3     38    7     8343  cgroups    ioports      mtrr           timer_stats</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_sys">36.5.3. /sys</h4>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">candido@lur:/sys/devices/platform/i8042/serio0<span class="nv">$ </span><span class="nb">ls
</span>bind_mode    drvctl     force_release  modalias  <span class="nb">set         </span>subsystem
description  err_count  <span class="nb">id             </span>power     softraw     uevent
driver       extra      input          scroll    softrepeat
candido@lur:/sys/devices/platform/i8042/serio0<span class="nv">$ </span><span class="nb">ls </span>driver
<span class="nb">bind  </span>bind_mode  description  serio0  uevent  unbind
candido@lur:/sys/devices/platform/i8042/serio0<span class="nv">$ </span><span class="nb">ls</span> <span class="nt">-l</span> driver
lrwxrwxrwx 1 root root 0 Oct 14 07:02 driver -&gt; ../../../../bus/serio/drivers/atkbd
candido@lur:/sys/bus/serio/drivers/atkbd<span class="nv">$ </span><span class="nb">ls
bind  </span>bind_mode  description  serio0  uevent  unbind
candido@lur:/sys/bus/serio/drivers/atkbd<span class="nv">$ </span><span class="nb">ls</span> <span class="nt">-l</span> serio0
lrwxrwxrwx 1 root root 0 Oct 14 07:57 serio0 -&gt; ../../../../devices/platform/i8042/serio0</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>/sys/ (block  bus  class  dev  devices  firmware  fs  hypervisor  kernel  module  power):</p>
</li>
<li>
<p>/sys/devices/</p>
</li>
<li>
<p>/sys/devices/platform/i8042/serio0</p>
</li>
<li>
<p>/sys/bus/:</p>
</li>
<li>
<p>/sys/bus/serio:</p>
</li>
<li>
<p>/sys/bus/serio/drivers/atkbd</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_interrupciones">36.6. interrupciones</h3>
<div class="ulist">
<ul>
<li>
<p>IRQ: interrupt request</p>
<div class="ulist">
<ul>
<li>
<p>asociacion numero de interrupcion-dispositivo</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">candido@lur:/<span class="nv">$ </span>find /proc/irq <span class="nt">-name</span> i8042
/proc/irq/12/i8042     <span class="nt">----------</span><span class="o">&gt;</span>PS/2 mouse
/proc/irq/1/i8042      <span class="nt">----------</span><span class="o">&gt;</span>keyboard</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Estadistica de las interrupciones producidas hasta el momento</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">candido@lur:/<span class="nv">$ </span><span class="nb">cat</span> /proc/interrupts
           CPU0       CPU1       CPU2       CPU3
  0:         71          0          0          0   IO-APIC-edge      timer
  1:      19057          0        396          0   IO-APIC-edge      i8042  <span class="nt">-----------</span><span class="o">&gt;</span>keyboard
  8:          1          0          0          0   IO-APIC-edge      rtc0
  9:       6319          0          0          0   IO-APIC-fasteoi   acpi
 12:    1116576          0     101214          0   IO-APIC-edge      i8042   <span class="nt">----------</span><span class="o">&gt;</span>mouse
 16:        260          0          0          0   IO-APIC-fasteoi   ehci_hcd:usb1, mmc0
 19:         37          0          0          0   IO-APIC-fasteoi   firewire_ohci
 23:         60          0          0          0   IO-APIC-fasteoi   ehci_hcd:usb2
 40:      85763          0          0          0   PCI-MSI-edge      ahci
 41:         25       3510          0          0   PCI-MSI-edge      eth0
 42:      19150          0     999491          0   PCI-MSI-edge      i915
 43:         25          0          0          0   PCI-MSI-edge      mei
 44:     311597          0          0          0   PCI-MSI-edge      iwlwifi
 45:        752          0        115          0   PCI-MSI-edge      snd_hda_intel
NMI:        972        483        950        496   Non-maskable interrupts
LOC:    1015060     607467    1020699     632233   Local timer interrupts
SPU:          0          0          0          0   Spurious interrupts
PMI:        972        483        950        496   Performance monitoring interrupts
IWI:          0          0          0          0   IRQ work interrupts
RES:    3248050    1179616    3095237    1186839   Rescheduling interrupts
CAL:        171        485        419        463   Function call interrupts
TLB:      24975      17203      36509      14019   TLB shootdowns
TRM:          0          0          0          0   Thermal event interrupts
THR:          0          0          0          0   Threshold APIC interrupts
MCE:          0          0          0          0   Machine check exceptions
MCP:         25         25         25         25   Machine check polls
ERR:          0
MIS:          0</code></pre>
</div>
</div>
<div class="paragraph">
<p>el contenido es 0 ¿qué significa?</p>
</div>
<div class="paragraph">
<p>Es el driver el que trata las interrupciones. Por ejemplo: /usr/src/linux-3.4.4/drivers/input/serio/serio_raw.c</p>
</div>
</div>
<div class="sect2">
<h3 id="_initialization_and_registering">36.7. Initialization and Registering</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://wiki.kubuntu.org/X/InputConfiguration">fases</a>:</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_aplicaciones_2">36.8. Aplicaciones</h3>
<div class="paragraph">
<p>Lista de comandos:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>showkey --ascii: código decimal octal y hexadecimal del carácter pulsado</p>
</li>
<li>
<p>sudo kbd_mode: informa del modo del teclado</p>
</li>
<li>
<p>xev : Cada tecla que pulso me da información del mapa de teclado</p>
</li>
<li>
<p>sudo dumpkeys: vuelca el mapa de teclado. No fácil de interpretar</p>
</li>
<li>
<p>loadkeys : load the keys translation board on kernel</p>
</li>
<li>
<p>xinput list: listar todos los dispositivos de entrada</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_scancodes">36.9. Scancodes</h3>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.computer-engineering.org/ps2keyboard/scancodes2.html">set 2</a></p>
</li>
<li>
<p><a href="http://retired.beyondlogic.org/keyboard/keybrd.htm" class="bare">http://retired.beyondlogic.org/keyboard/keybrd.htm</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_ejemplos_2">36.10. Ejemplos</h3>
<div class="paragraph">
<p>Hay programadores que han editado drivers:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://cs.smith.edu/~nhowe/262/oldlabs/keyboard.html">keyboard driver example</a></p>
</li>
<li>
<p><a href="http://www.cs.brynmawr.edu/cs355/lkmpg/c1254.htm">interrupt handler</a></p>
</li>
<li>
<p><a href="http://thc.org/papers/writing-linux-kernel-keylogger.txt">keylogger</a></p>
</li>
<li>
<p><a href="http://rick.vanrein.org/linux/funkey/#modes">funny extension keys</a></p>
</li>
<li>
<p><a href="http://www.staerk.de/thorsten/My_Tutorials/Writing_Linux_kernel_modules">kernel_keyboard</a></p>
</li>
<li>
<p><a href="http://www.tldp.org/LDP/lkmpg/2.6/lkmpg.pdf">kernel keyboard</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_referencias_4">36.11. Referencias</h3>
<div class="ulist">
<ul>
<li>
<p><a href="http://gunnarwrobel.de/wiki/Linux-and-the-keyboard.html">basico</a></p>
</li>
<li>
<p><a href="http://www.win.tue.nl/~aeb/linux/">Adries_Brouwer</a>:</p>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.win.tue.nl/~aeb/linux/kbd/scancodes.html#toc1">Andries_Brouwer scancodes overview</a></p>
</li>
<li>
<p><a href="http://www.kbd-project.org/www.win.tue.nl/~aeb/linux/kbd/kbd.html">Andries_Brouwer_howto</a></p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="http://www.computer-engineering.org/ps2keyboard/">ps2keyboard  overview</a></p>
</li>
<li>
<p><a href="https://wiki.ubuntu.com/X/Config/Input">ubuntu</a></p>
</li>
<li>
<p><a href="http://en.gentoo-wiki.com/wiki/X.Org/Input_drivers#Multiple_Keyboard_Layouts">gentoo</a></p>
</li>
<li>
<p><a href="http://www.x.org/archive/X11R7.5/doc/man/man4/evdev.4.html">X evdev</a></p>
</li>
<li>
<p><a href="http://www-01.ibm.com/software/globalization/topics/keyboards/">ibm_keyboard</a></p>
</li>
<li>
<p><a href="http://www-01.ibm.com/software/globalization/topics/keyboards/registry_index.html">ibm_loyout</a></p>
</li>
<li>
<p><a href="http://cs.smith.edu/~nhowe/262/oldlabs/keyboard.html">keyboard driver example</a></p>
</li>
<li>
<p><a href="http://thc.org/papers/writing-linux-kernel-keylogger.txt">keylogger</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_analisis_de_algunas_computadoras">37. Analisis de algunas computadoras</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_lenovo_thinkpad_t560">37.1. Lenovo ThinkPad T560</h3>
<div class="ulist">
<ul>
<li>
<p><a href="lenovo_T560_apuntes.html">Lenovo ThinkPad T560</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_lenovo_thinkpad_t520">37.2. Lenovo ThinkPad T520</h3>
<div class="ulist">
<ul>
<li>
<p><a href="lenovo_T520_apuntes.html">Lenovo ThinkPad T520</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_otras_computadoras">37.3. Otras computadoras</h3>
<div class="ulist">
<ul>
<li>
<p><a href="computadoras_otras.html">Otras computadoras</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2022-10-23 20:47:27 +0200
</div>
</div>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: {
    inlineMath: [["\\(", "\\)"]],
    displayMath: [["\\[", "\\]"]],
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [["\\$", "\\$"]],
    ignoreClass: "nostem|noasciimath"
  },
  TeX: { equationNumbers: { autoNumber: "none" } }
})
MathJax.Hub.Register.StartupHook("AsciiMath Jax Ready", function () {
  MathJax.InputJax.AsciiMath.postfilterHooks.Add(function (data, node) {
    if ((node = data.script.parentNode) && (node = node.parentNode) && node.classList.contains("stemblock")) {
      data.math.root.display = "block"
    }
    return data
  })
})
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>
</body>
</html>