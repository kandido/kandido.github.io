<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.17">
<meta name="keywords" content="computer, architecture">
<meta name="author" content="Cándido Aramburu">
<title>Estructura de Computadores  (240306)</title>
<style>
@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";
@import "https://cdn.jsdelivr.net/gh/asciidoctor/asciidoctor@2.0/data/stylesheets/asciidoctor-default.css";



h1, h2, h3, h4, h5, h6, #toctitle,
.sidebarblock > .content > .title {
  color: rgba(221, 72, 20, 0.8);
}



</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
pre.rouge table td { padding: 5px; }
pre.rouge table pre { margin: 0; }
pre.rouge .cm {
  color: #999988;
  font-style: italic;
}
pre.rouge .cp {
  color: #999999;
  font-weight: bold;
}
pre.rouge .c1 {
  color: #999988;
  font-style: italic;
}
pre.rouge .cs {
  color: #999999;
  font-weight: bold;
  font-style: italic;
}
pre.rouge .c, pre.rouge .ch, pre.rouge .cd, pre.rouge .cpf {
  color: #999988;
  font-style: italic;
}
pre.rouge .err {
  color: #a61717;
  background-color: #e3d2d2;
}
pre.rouge .gd {
  color: #000000;
  background-color: #ffdddd;
}
pre.rouge .ge {
  color: #000000;
  font-style: italic;
}
pre.rouge .gr {
  color: #aa0000;
}
pre.rouge .gh {
  color: #999999;
}
pre.rouge .gi {
  color: #000000;
  background-color: #ddffdd;
}
pre.rouge .go {
  color: #888888;
}
pre.rouge .gp {
  color: #555555;
}
pre.rouge .gs {
  font-weight: bold;
}
pre.rouge .gu {
  color: #aaaaaa;
}
pre.rouge .gt {
  color: #aa0000;
}
pre.rouge .kc {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kd {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kn {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kp {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kr {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kt {
  color: #445588;
  font-weight: bold;
}
pre.rouge .k, pre.rouge .kv {
  color: #000000;
  font-weight: bold;
}
pre.rouge .mf {
  color: #009999;
}
pre.rouge .mh {
  color: #009999;
}
pre.rouge .il {
  color: #009999;
}
pre.rouge .mi {
  color: #009999;
}
pre.rouge .mo {
  color: #009999;
}
pre.rouge .m, pre.rouge .mb, pre.rouge .mx {
  color: #009999;
}
pre.rouge .sa {
  color: #000000;
  font-weight: bold;
}
pre.rouge .sb {
  color: #d14;
}
pre.rouge .sc {
  color: #d14;
}
pre.rouge .sd {
  color: #d14;
}
pre.rouge .s2 {
  color: #d14;
}
pre.rouge .se {
  color: #d14;
}
pre.rouge .sh {
  color: #d14;
}
pre.rouge .si {
  color: #d14;
}
pre.rouge .sx {
  color: #d14;
}
pre.rouge .sr {
  color: #009926;
}
pre.rouge .s1 {
  color: #d14;
}
pre.rouge .ss {
  color: #990073;
}
pre.rouge .s, pre.rouge .dl {
  color: #d14;
}
pre.rouge .na {
  color: #008080;
}
pre.rouge .bp {
  color: #999999;
}
pre.rouge .nb {
  color: #0086B3;
}
pre.rouge .nc {
  color: #445588;
  font-weight: bold;
}
pre.rouge .no {
  color: #008080;
}
pre.rouge .nd {
  color: #3c5d5d;
  font-weight: bold;
}
pre.rouge .ni {
  color: #800080;
}
pre.rouge .ne {
  color: #990000;
  font-weight: bold;
}
pre.rouge .nf, pre.rouge .fm {
  color: #990000;
  font-weight: bold;
}
pre.rouge .nl {
  color: #990000;
  font-weight: bold;
}
pre.rouge .nn {
  color: #555555;
}
pre.rouge .nt {
  color: #000080;
}
pre.rouge .vc {
  color: #008080;
}
pre.rouge .vg {
  color: #008080;
}
pre.rouge .vi {
  color: #008080;
}
pre.rouge .nv, pre.rouge .vm {
  color: #008080;
}
pre.rouge .ow {
  color: #000000;
  font-weight: bold;
}
pre.rouge .o {
  color: #000000;
  font-weight: bold;
}
pre.rouge .w {
  color: #bbbbbb;
}
pre.rouge {
  background-color: #f8f8f8;
}
</style>
<!-- Change some CSS.
<style>
.imageblock{
  &.text-center > .title {
    text-align: center !important;
  }
}
</style>

-->

<style type="text/css"> .imageblock > .title { text-align: center; } </style>

<style>.toc-current{font-weight: bold;} .toc-root{font-family: "Open Sans","DejaVu Sans",sans-serif;
                       font-size: 0.9em;} #content{display: flex; flex-direction: column; flex: 1 1 auto;}
             .nav-footer{text-align: center; margin-top: auto;}
             .nav-footer > p > a {white-space: nowrap;}</style>
</head>
<body id="_programación_en_lenguaje_ensamblador_x86_construcciones_básicas_de_los_lenguajes_de_alto_nivel" class="book">
<div id="header">
<h1>Estructura de Computadores  (240306)</h1>
<div class="details">
<span id="author" class="author">Cándido Aramburu</span><br>
<span id="email" class="email"><a href="mailto:candido@unavarra.es">candido@unavarra.es</a></span><br>
<span id="revdate">2022-09-08</span>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<p><span class="toc-root"><a href="eecc_book.html">Estructura de Computadores  (240306)</a></span></p><ul class="sectlevel0">
<li><a href="_i_arquitectura_del_repertorio_de_instrucciones_isa_computadora_von_neumann_datos_instrucciones_programación.html">I Arquitectura del Repertorio de Instrucciones (ISA): computadora von Neumann, datos, instrucciones, programación.</a>
<ul class="sectlevel1">
<li><a href="_introducción_a_la_estructura_de_los_computadores.html">1. Introducción a la Estructura de los Computadores</a>
</li>
<li><a href="_arquitectura_von_neumann.html">2. Arquitectura Von Neumann</a>
</li>
<li><a href="_representación_de_los_datos.html">3. Representación de los Datos</a>
</li>
<li><a href="_operaciones_aritmeticas_y_logicas.html">4. Operaciones Aritmeticas y Logicas</a>
</li>
<li><a href="_representación_de_las_instrucciones.html">5. Representación de las Instrucciones</a>
</li>
<li><a href="_programación_en_lenguaje_ensamblador_x86_construcciones_básicas_de_los_lenguajes_de_alto_nivel.html"><span class="toc-current">6. Programación en Lenguaje Ensamblador (x86): Construcciones básicas de los lenguajes de alto nivel.</span></a>
<ul class="sectlevel2">
<li><a href="_programación_en_lenguaje_ensamblador_x86_construcciones_básicas_de_los_lenguajes_de_alto_nivel.html#_temario_6">6.1. Temario</a>
</li>
<li><a href="_programación_en_lenguaje_ensamblador_x86_construcciones_básicas_de_los_lenguajes_de_alto_nivel.html#_introducción_2">6.2. Introducción</a>
<ul class="sectlevel3">
<li><a href="_programación_en_lenguaje_ensamblador_x86_construcciones_básicas_de_los_lenguajes_de_alto_nivel.html#_objetivos_2">6.2.1. Objetivos</a>
</li>
<li><a href="_programación_en_lenguaje_ensamblador_x86_construcciones_básicas_de_los_lenguajes_de_alto_nivel.html#_requisitos_2">6.2.2. Requisitos</a>
</li>
</ul>
</li>
<li><a href="_programación_en_lenguaje_ensamblador_x86_construcciones_básicas_de_los_lenguajes_de_alto_nivel.html#_estructura_de_la_computadora_2">6.3. Estructura de la  Computadora</a>
<ul class="sectlevel3">
<li><a href="_programación_en_lenguaje_ensamblador_x86_construcciones_básicas_de_los_lenguajes_de_alto_nivel.html#_cpu_2">6.3.1. CPU</a>
</li>
<li><a href="_programación_en_lenguaje_ensamblador_x86_construcciones_básicas_de_los_lenguajes_de_alto_nivel.html#_memoria_2">6.3.2. Memoria</a>
</li>
<li><a href="_programación_en_lenguaje_ensamblador_x86_construcciones_básicas_de_los_lenguajes_de_alto_nivel.html#_memoria_principal_3">6.3.3. Memoria Principal</a>
</li>
<li><a href="_programación_en_lenguaje_ensamblador_x86_construcciones_básicas_de_los_lenguajes_de_alto_nivel.html#_registros_internos_a_la_cpu_2">6.3.4. Registros internos a la CPU</a>
</li>
</ul>
</li>
<li><a href="_programación_en_lenguaje_ensamblador_x86_construcciones_básicas_de_los_lenguajes_de_alto_nivel.html#_lenguaje_intel_versus_lenguaje_att">6.4. Lenguaje Intel versus Lenguaje  AT&amp;T</a>
<ul class="sectlevel3">
<li><a href="_programación_en_lenguaje_ensamblador_x86_construcciones_básicas_de_los_lenguajes_de_alto_nivel.html#_lenguajes_ensamblador_de_la_arquitectura_i386amd64">6.4.1. Lenguajes ensamblador de la arquitectura  i386/amd64</a>
</li>
<li><a href="_programación_en_lenguaje_ensamblador_x86_construcciones_básicas_de_los_lenguajes_de_alto_nivel.html#_sintaxis_de_las_instrucciones_en_el_lenguaje_intel">6.4.2. Sintaxis de las instrucciones en el lenguaje INTEL</a>
</li>
<li><a href="_programación_en_lenguaje_ensamblador_x86_construcciones_básicas_de_los_lenguajes_de_alto_nivel.html#_traductores_del_proceso_de_ensamblaje">6.4.3. Traductores del proceso de ensamblaje</a>
</li>
<li><a href="_programación_en_lenguaje_ensamblador_x86_construcciones_básicas_de_los_lenguajes_de_alto_nivel.html#_código_máquina">6.4.4. Código Máquina</a>
</li>
<li><a href="_programación_en_lenguaje_ensamblador_x86_construcciones_básicas_de_los_lenguajes_de_alto_nivel.html#_assembler_as">6.4.5. Assembler "as"</a>
</li>
</ul>
</li>
<li><a href="_programación_en_lenguaje_ensamblador_x86_construcciones_básicas_de_los_lenguajes_de_alto_nivel.html#_representación_de_los_datos_en_lenguaje_ensamblador_asm_para_la_arquitectura_i386amd64">6.5. Representación de los datos en lenguaje ensamblador (ASM) para la arquitectura i386/amd64</a>
<ul class="sectlevel3">
<li><a href="_programación_en_lenguaje_ensamblador_x86_construcciones_básicas_de_los_lenguajes_de_alto_nivel.html#_tipos_de_datos">6.5.1. Tipos de Datos</a>
</li>
<li><a href="_programación_en_lenguaje_ensamblador_x86_construcciones_básicas_de_los_lenguajes_de_alto_nivel.html#_tamaño_del_operando_x86">6.5.2. Tamaño del operando x86</a>
</li>
<li><a href="_programación_en_lenguaje_ensamblador_x86_construcciones_básicas_de_los_lenguajes_de_alto_nivel.html#_alineamiento_de_bytes_big_little_endian">6.5.3. Alineamiento de Bytes: Big-Little Endian</a>
</li>
</ul>
</li>
<li><a href="_programación_en_lenguaje_ensamblador_x86_construcciones_básicas_de_los_lenguajes_de_alto_nivel.html#_operandos_modos_de_direccionamiento_2">6.6. Operandos: Modos de Direccionamiento</a>
<ul class="sectlevel3">
<li><a href="_programación_en_lenguaje_ensamblador_x86_construcciones_básicas_de_los_lenguajes_de_alto_nivel.html#_localización_2">6.6.1. Localización</a>
</li>
<li><a href="_programación_en_lenguaje_ensamblador_x86_construcciones_básicas_de_los_lenguajes_de_alto_nivel.html#_modos_de_direccionamiento">6.6.2. Modos de Direccionamiento</a>
</li>
</ul>
</li>
<li><a href="_programación_en_lenguaje_ensamblador_x86_construcciones_básicas_de_los_lenguajes_de_alto_nivel.html#repertorio_instruc_oper">6.7. Repertorio de Instrucciones: Operaciones</a>
<ul class="sectlevel3">
<li><a href="_programación_en_lenguaje_ensamblador_x86_construcciones_básicas_de_los_lenguajes_de_alto_nivel.html#_manuales_de_referencia">6.7.1. Manuales de referencia</a>
</li>
<li><a href="_programación_en_lenguaje_ensamblador_x86_construcciones_básicas_de_los_lenguajes_de_alto_nivel.html#_transferencia">6.7.2. TRANSFERENCIA</a>
</li>
<li><a href="_programación_en_lenguaje_ensamblador_x86_construcciones_básicas_de_los_lenguajes_de_alto_nivel.html#_aritméticos">6.7.3. ARITMÉTICOS</a>
</li>
<li><a href="_programación_en_lenguaje_ensamblador_x86_construcciones_básicas_de_los_lenguajes_de_alto_nivel.html#_lógicos">6.7.4. LÓGICOS</a>
</li>
<li><a href="_programación_en_lenguaje_ensamblador_x86_construcciones_básicas_de_los_lenguajes_de_alto_nivel.html#_misceláneos">6.7.5. MISCELÁNEOS</a>
</li>
<li><a href="_programación_en_lenguaje_ensamblador_x86_construcciones_básicas_de_los_lenguajes_de_alto_nivel.html#_saltos_generales">6.7.6. SALTOS  (generales)</a>
</li>
<li><a href="_programación_en_lenguaje_ensamblador_x86_construcciones_básicas_de_los_lenguajes_de_alto_nivel.html#_saltos_sin_signo_cardinal_saltos_con_signo_integer">6.7.7. SALTOS  Sin Signo (Cardinal) SALTOS Con Signo (Integer)</a>
</li>
<li><a href="_programación_en_lenguaje_ensamblador_x86_construcciones_básicas_de_los_lenguajes_de_alto_nivel.html#_flags_oditszapc">6.7.8. FLAGS (ODITSZAPC)</a>
</li>
<li><a href="_programación_en_lenguaje_ensamblador_x86_construcciones_básicas_de_los_lenguajes_de_alto_nivel.html#_sufijos">6.7.9. Sufijos</a>
</li>
<li><a href="_programación_en_lenguaje_ensamblador_x86_construcciones_básicas_de_los_lenguajes_de_alto_nivel.html#_códigos_de_operación_2">6.7.10. Códigos de Operación</a>
</li>
</ul>
</li>
<li><a href="_programación_en_lenguaje_ensamblador_x86_construcciones_básicas_de_los_lenguajes_de_alto_nivel.html#mnemonicos_basicos_explicados">6.8. Mnemónicos Básicos (Explicados)</a>
<ul class="sectlevel3">
<li><a href="_programación_en_lenguaje_ensamblador_x86_construcciones_básicas_de_los_lenguajes_de_alto_nivel.html#_operaciones_aritméticas">6.8.1. Operaciones aritméticas</a>
</li>
<li><a href="_programación_en_lenguaje_ensamblador_x86_construcciones_básicas_de_los_lenguajes_de_alto_nivel.html#_procesamiento_condicional">6.8.2. Procesamiento Condicional</a>
</li>
<li><a href="_programación_en_lenguaje_ensamblador_x86_construcciones_básicas_de_los_lenguajes_de_alto_nivel.html#_saltos">6.8.3. Saltos</a>
</li>
<li><a href="_programación_en_lenguaje_ensamblador_x86_construcciones_básicas_de_los_lenguajes_de_alto_nivel.html#_desplazamiento_y_rotación">6.8.4. Desplazamiento y rotación</a>
</li>
<li><a href="_programación_en_lenguaje_ensamblador_x86_construcciones_básicas_de_los_lenguajes_de_alto_nivel.html#_cambiar_el_endianess">6.8.5. Cambiar el Endianess</a>
</li>
</ul>
</li>
<li><a href="_programación_en_lenguaje_ensamblador_x86_construcciones_básicas_de_los_lenguajes_de_alto_nivel.html#_formato_de_instrucción_isa_intel_x86_64">6.9. Formato de Instrucción: ISA Intel x86-64</a>
</li>
<li><a href="_programación_en_lenguaje_ensamblador_x86_construcciones_básicas_de_los_lenguajes_de_alto_nivel.html#_subrutinas">6.10. Subrutinas</a>
<ul class="sectlevel3">
<li><a href="_programación_en_lenguaje_ensamblador_x86_construcciones_básicas_de_los_lenguajes_de_alto_nivel.html#_introducción_4">6.10.1. Introducción</a>
</li>
<li><a href="_programación_en_lenguaje_ensamblador_x86_construcciones_básicas_de_los_lenguajes_de_alto_nivel.html#_lenguaje_c_sentencia_función">6.10.2. Lenguaje C: Sentencia Función</a>
</li>
<li><a href="_programación_en_lenguaje_ensamblador_x86_construcciones_básicas_de_los_lenguajes_de_alto_nivel.html#_anidamiento_de_funciones">6.10.3. Anidamiento de Funciones</a>
</li>
<li><a href="_programación_en_lenguaje_ensamblador_x86_construcciones_básicas_de_los_lenguajes_de_alto_nivel.html#_pilaframe">6.10.4. Pila/Frame</a>
</li>
<li><a href="_programación_en_lenguaje_ensamblador_x86_construcciones_básicas_de_los_lenguajes_de_alto_nivel.html#_definición_de_la_subrutina">6.10.5. Definición de la subrutina</a>
</li>
<li><a href="_programación_en_lenguaje_ensamblador_x86_construcciones_básicas_de_los_lenguajes_de_alto_nivel.html#_registros_a_preservar">6.10.6. Registros a Preservar</a>
</li>
<li><a href="_programación_en_lenguaje_ensamblador_x86_construcciones_básicas_de_los_lenguajes_de_alto_nivel.html#_argumentos_de_la_subrutina">6.10.7. Argumentos de la subrutina</a>
</li>
<li><a href="_programación_en_lenguaje_ensamblador_x86_construcciones_básicas_de_los_lenguajes_de_alto_nivel.html#_llamada_a_la_subrutina">6.10.8. Llamada a la subrutina</a>
</li>
<li><a href="_programación_en_lenguaje_ensamblador_x86_construcciones_básicas_de_los_lenguajes_de_alto_nivel.html#_retorno_de_la_subrutina">6.10.9. Retorno de la subrutina</a>
</li>
<li><a href="_programación_en_lenguaje_ensamblador_x86_construcciones_básicas_de_los_lenguajes_de_alto_nivel.html#_estado_de_la_pila">6.10.10. Estado de la pila</a>
</li>
</ul>
</li>
<li><a href="_programación_en_lenguaje_ensamblador_x86_construcciones_básicas_de_los_lenguajes_de_alto_nivel.html#_llamadas_al_sistema_operativo">6.11. Llamadas al Sistema Operativo</a>
<ul class="sectlevel3">
<li><a href="_programación_en_lenguaje_ensamblador_x86_construcciones_básicas_de_los_lenguajes_de_alto_nivel.html#_introducción_6">6.11.1. Introducción</a>
</li>
<li><a href="_programación_en_lenguaje_ensamblador_x86_construcciones_básicas_de_los_lenguajes_de_alto_nivel.html#_ejemplos_3">6.11.2. Ejemplos</a>
</li>
</ul>
</li>
<li><a href="_programación_en_lenguaje_ensamblador_x86_construcciones_básicas_de_los_lenguajes_de_alto_nivel.html#_bibliografias">6.12. Bibliografias</a>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="_ii_unidades_básicas_procesador_central_unidad_de_memoria_mecanismos_entradasalida.html">II Unidades Básicas: Procesador Central, Unidad de Memoria, Mecanismos Entrada/Salida.</a>
</li>
<li><a href="_iii_ejercicios_de_teoría.html">III Ejercicios de Teoría</a>
</li>
<li><a href="_iv_autoevaluación_teoría.html">IV Autoevaluación Teoría</a>
</li>
<li><a href="_v_guiones_de_prácticas_programación_ensamblador_x86.html">V Guiones de Prácticas: Programación Ensamblador x86</a>
</li>
<li><a href="_vi_hojas_de_referencia_rápida.html">VI Hojas de Referencia Rápida</a>
</li>
<li><a href="_vii_autoevaluación_prácticas.html">VII Autoevaluación Prácticas</a>
</li>
<li><a href="_viii_apéndices.html">VIII Apéndices</a>
</li>
<li><a href="_ix_bibliografía.html">IX Bibliografía</a>
</li>
<li><a href="_x_glosario.html">X Glosario</a>
</li>
<li><a href="_xi_colofón.html">XI Colofón</a>
</li>
<li><a href="_index.html">Index</a>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_programación_en_lenguaje_ensamblador_x86_construcciones_básicas_de_los_lenguajes_de_alto_nivel">6. Programación en Lenguaje Ensamblador (x86): Construcciones básicas de los lenguajes de alto nivel.</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_temario_6">6.1. Temario</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Programación en lenguaje Ensamblador x86</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>x86 :Representación de Datos, Representación de Instrucciones, Modos de direccionamiento.</p>
</li>
<li>
<p>Sentencias de asignación</p>
</li>
<li>
<p>Sentencias condicionales</p>
</li>
<li>
<p>Bucles</p>
</li>
<li>
<p>LLamadas y retorno de funcion o subrutina</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_introducción_2">6.2. Introducción</h3>
<div class="sect3">
<h4 id="_objetivos_2">6.2.1. Objetivos</h4>
<div class="ulist">
<ul>
<li>
<p>Analizar la arquitectura del repertorio de las instrucciones máquina (Formato de instrucciones, formato de datos, operaciones y direccionamiento de operandos) de la arquitectura x86-64 para su utilización en el desarrollo práctico de programas en lenguaje ensamblador GNU_asm_x86 (gas).</p>
</li>
<li>
<p>Capacidad para desarrollar pequeños programas en lenguaje ensamblador x86, siendo función de las prácticas de laboratorio su puesta en práctica.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_requisitos_2">6.2.2. Requisitos</h4>
<div class="ulist">
<ul>
<li>
<p>Requisitos:</p>
<div class="ulist">
<ul>
<li>
<p>Von Neumann Architecture: Arquitectura de una Computadora, Máquina IAS.</p>
</li>
<li>
<p>Programación en lenguaje ensamblador IAS</p>
</li>
<li>
<p>Representacion de datos</p>
</li>
<li>
<p>Operaciones Aritméticas y Lógicas</p>
</li>
<li>
<p>Representación de las Instrucciones</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_estructura_de_la_computadora_2">6.3. Estructura de la  Computadora</h3>
<div class="sect3">
<h4 id="_cpu_2">6.3.1. CPU</h4>
<div class="ulist">
<ul>
<li>
<p>Componentes básicos de la CPU</p>
<div class="ulist">
<ul>
<li>
<p>ALU</p>
</li>
<li>
<p>Unidad de Control</p>
</li>
<li>
<p>Registros internos</p>
</li>
</ul>
</div>
</li>
<li>
<p>Función de la CPU</p>
<div class="ulist">
<ul>
<li>
<p>Llevar a cabo el ciclo de instrucción de las instrucciones almacenadas en la memoria principal</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_memoria_2">6.3.2. Memoria</h4>
<div class="ulist">
<ul>
<li>
<p>Jerarquía de Memoria: Registros internos a la CPU y Memoria principal (DRAM) externa a la CPU</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_memoria_principal_3">6.3.3. Memoria Principal</h4>
<div class="ulist">
<ul>
<li>
<p>Memoria DRAM: Dynamic Random Access Memory</p>
</li>
<li>
<p>Almacena la secuencia de instrucciones máquina binarias y los datos en formato binario.</p>
</li>
<li>
<p>Espacio de direcciones lineal: Notación hexacecimal</p>
</li>
<li>
<p>Direccionamiento: bytes : notación hexadecimal</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_registros_internos_a_la_cpu_2">6.3.4. Registros internos a la CPU</h4>
<div class="sect4">
<h5 id="_introducción_3">introducción</h5>
<div class="ulist">
<ul>
<li>
<p>Registos NO accesibles por el programador en la arquitectura amd64</p>
<div class="ulist">
<ul>
<li>
<p>PC: Contador del Programa : x86 lo denomina RIP: 64 bits</p>
</li>
<li>
<p>IR: Registro de instrucción : 64 bits</p>
</li>
<li>
<p>MBR: Registro buffer de Memoria : 64 bits &#8594; WORD SIZE : 64</p>
</li>
<li>
<p>MAR: Registro de direcciones de Memoria: 40 bits</p>
<div class="ulist">
<ul>
<li>
<p>Capacidad de Memoria: 2<sup>40</sup> : 1TB</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Para el caso de la arquitectura i386 sustituir 64 bits por 32 bits y el registro MAR también es de 32 bits.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_registros_visibles_al_programador_2">Registros visibles al programador</h5>
<table class="tableblock frame-all grid-all" style="width: 50%;">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>63-0</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>31-0</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>15-0</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>15-8</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>7-0</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rax</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>eax</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ax</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ah</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>al</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rbx</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ebx</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bx</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bh</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bl</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rcx</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ecx</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cx</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ch</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cl</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rdx</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>edx</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dx</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dh</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dl</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rsi</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>esi</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>si</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sil</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rdi</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>edi</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>di</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dil</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rbp</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ebp</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bp</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bpl</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rsp</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>esp</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sp</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>spl</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>r8</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>r8d</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>r8w</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>r8b</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>r9</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>r9d</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>r9w</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>r9b</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>r10</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>r10d</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>r10w</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>r10b</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>r11</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>r11d</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>r11w</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>r11b</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>r12</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>r12d</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>r12w</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>r12b</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>r13</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>r13d</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>r13w</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>r13b</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>r14</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>r14d</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>r14w</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>r14b</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>r15</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>r15d</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>r15w</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>r15b</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_compatibilidad_32_64">Compatibilidad 32-64</h5>
<div class="ulist">
<ul>
<li>
<p>En la nominación de los registros de la arquitectura de 64 bits sustituir R  por E y obtenemos la nominación de la arquitectura de 32 bits.</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all" style="width: 50%;">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">64 bits</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32 bits</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RIP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EIP</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RAX</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EAX</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RFLAG</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EFLAG</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;&#8230;&#8203;.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;&#8230;&#8203;.</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<ul>
<li>
<p>Hay excepciones</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="CFR">Control Flag Register</h5>
<div class="ulist">
<ul>
<li>
<p>Registro de STATUS: La ejecución de una instrucción, activa unos bits denominados banderines que indican consecuencias de la operación realizada. Ejemplo: banderín de overflow : indica que la operación aritmética realizada ha resultado en un desbordamiento del resultado de dicha operación.</p>
</li>
<li>
<p><a href="http://en.wikipedia.org/wiki/FLAGS_register_(computing)">wikipedia</a></p>
</li>
<li>
<p>Unicamente nos fijamos en los flags OSZAPC.</p>
<table class="tableblock frame-all grid-all" style="width: 50%;">
<caption class="title">Table 7. RFLAG Register</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Flag</th>
<th class="tableblock halign-center valign-top">Bit</th>
<th class="tableblock halign-left valign-top">Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CF</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Carry flag</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PF</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parity flag</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">AF</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Adjust flag</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ZF</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Zero flag</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SF</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sign flag</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OF</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Overflow flag</p></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Carry flag:</p>
<div class="ulist">
<ul>
<li>
<p>se activa si la llevada afecta a una posición de bit mayor que del ancho de palabra (word size) de la ALU en una operación aritmética de números enteros sin signo o con signo</p>
</li>
</ul>
</div>
</li>
<li>
<p>Overflow flag:</p>
<div class="ulist">
<ul>
<li>
<p>se activa si teniendo en cuenta el bit de mayor peso MSB (aunque esté fuera el word size) indicase error en la operación aritmética con números enteros con signo. Si no se tiene en cuenta el MSB fuera del word size, la operación es correcta.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Parity Even flag:</p>
<div class="ulist">
<ul>
<li>
<p>indica si el número de bits del byte LSB del resultado de la última operación ha sido par.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Sign flag:</p>
<div class="ulist">
<ul>
<li>
<p>se activa si el resultado de la última operación ha sido negativo.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Adjust flag:</p>
<div class="ulist">
<ul>
<li>
<p>se activa si hay llevada en el nibble LSB del resultado de la última operación</p>
</li>
</ul>
</div>
</li>
<li>
<p>Ejemplos</p>
<div class="listingblock">
<div class="content">
<pre>  11111111
+ 00000001
__________
 100000000 -&gt; hay acarreo y también overflow ya que si consideramos el MSB=1 de la posición 8ª el resultado sería erróneo, es decir, si realizasemos una    extensión de signo el resultado sería erroneo y por lo tanto hay que rechazar el dígito fuera de rango con lo que la operación es correcta. El bit de signo es el de la posición más alta del "word size" (posición 7ª)


 A :    11110000
-B :   +11101100
________________
A–B:   111011100 -&gt; hay acarreo pero no overflow ya que el MSB=1 en una posición fuera del "word size" no afecta al signo del resultado, ya que las posiciones del MSB (8ª) y la anterior (7ª) del bit de signo tienen el mismo dígito de valor 1


 A :    10000000
-B :   +10000000
________________
A–B:   100000000 -&gt; hay acarreo. Hay también overflow ya que el bit MSB de valor 1 es diferente de la posición anterior ( 7ª, bit de signo) de valor 0.  Los dos sumandos son negativos (bit de signo posición 7ª) y el bit de signo del resultado (bit posición 7ª) es positivo luego el resultado es erróneo.</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_otros_registros">Otros Registros</h5>
<div class="imageblock">
<div class="content">
<img src="./images/instrucciones_representacion/registers_1200x800.png" alt="registers 1200x800">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Los registros fp, mmx y xmm se utilizan para ejecutar instrucciones complejas como la tangente que operan con números reales en coma flotante o instrucciones que ejecutan operaciones sobre múltiples datos enteros (Single Instruction Multiple Data) (P.ej producto escalar).</p>
</li>
<li>
<p>Más información en el <a href="_fpu_x87.html#fpu_x87">apéndice FPU_x87</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_lenguaje_intel_versus_lenguaje_att">6.4. Lenguaje Intel versus Lenguaje  AT&amp;T</h3>
<div class="sect3">
<h4 id="_lenguajes_ensamblador_de_la_arquitectura_i386amd64">6.4.1. Lenguajes ensamblador de la arquitectura  i386/amd64</h4>
<div class="ulist">
<ul>
<li>
<p>El lenguaje en código máquina del repertorio de instrucciones de la arquitectura AMD64 es único pero no así el lenguaje ensamblador correspondiente a dicha arquitectura.</p>
</li>
<li>
<p>En la asignatura "Estructura de Computadores" se utiliza la sintaxis <strong>AT&amp;T</strong> de la compañía telefónica americana AT&amp;T.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_sintaxis_de_las_instrucciones_en_el_lenguaje_intel">6.4.2. Sintaxis de las instrucciones en el lenguaje INTEL</h4>
<div class="ulist">
<ul>
<li>
<p>El formato de las instrucciones en lenguaje ensamblador se conoce como <em>sintaxis</em> de las instrucciones.</p>
</li>
<li>
<p>SINTAXIS ASM: Etiqueta-Código de Operación- Operando1- Operando2- Comentario</p>
</li>
<li>
<p>x86-64</p>
</li>
<li>
<p>x86</p>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 8. Sintaxis Intel</caption>
<colgroup>
<col style="width: 9.5238%;">
<col style="width: 19.0476%;">
<col style="width: 28.5714%;">
<col style="width: 4.7619%;">
<col style="width: 23.8095%;">
<col style="width: 14.2858%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>label:</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>op_mnemonic</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>operand_destination</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>operand_source</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>#comment</code></p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<ul>
<li>
<p>Ejemplo:</p>
<div class="ulist">
<ul>
<li>
<p><code>bucle:  sub     rsp,16                ;comienzo del bucle</code></p>
</li>
<li>
<p><code>suma:   add     eax,esi               ;sumar</code></p>
</li>
<li>
<p>+        mov      ax,[resultado]       ;salvar resultado+</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
La sintaxis del lenguaje ensamblador depende del traductor del proceso de ensamblaje (assembler) utilizado, en este caso, se utiliza el assembler NASM.
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>Ejemplo <a href="_lenguajes_de_programación_para_sum1ton.html#sum1toN_lang">sum1toN.asm</a> de programa en lenguaje ensamblador intel y assembler "NetWide Asm" (nasm).</p>
</li>
<li>
<p>Tutorial completo <a href="_ix_bibliografía.html#NASM_tuto">NASM tutorialspoint</a></p>
</li>
<li>
<p>Apuntes de la  <a href="_ix_bibliografía.html#NASM_bristol">Universidad de Bristol</a></p>
</li>
<li>
<p>Apuntes del <a href="_ix_bibliografía.html#paul_carter">Dr. Paul Carter</a> y <a href="_ix_bibliografía.html#pc_asm">Dr. Paul Carter</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_gnu_assembly_gas">GNU Assembly (Gas)</h5>
<div class="ulist">
<ul>
<li>
<p>Lenguaje desarrollado por la empresa de telefonía AT&amp;T</p>
</li>
<li>
<p>Assembler gas (GNU as)</p>
<div class="ulist">
<ul>
<li>
<p>arquitecturas: i386, amd64, mips, 68000, etc</p>
</li>
<li>
<p>Sintaxis: Etiqueta-Código de Operación- Operando1- Operando2- Comentario</p>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 9. Sintaxis AT&amp;T</caption>
<colgroup>
<col style="width: 9.5238%;">
<col style="width: 19.0476%;">
<col style="width: 23.8095%;">
<col style="width: 4.7619%;">
<col style="width: 28.5714%;">
<col style="width: 14.2858%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>label:</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>op_mnemonic</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>operand_source</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>operand_destination</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>;comment</code></p></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Ejemplo:</p>
<div class="ulist">
<ul>
<li>
<p><code>bucle:  subq     $16,%rsp                ;comienzo del bucle</code></p>
</li>
<li>
<p><code>suma:   addl     %esi,%eax               ;sumar</code></p>
</li>
<li>
<p>+        movw     %ax,resultado           ;salvar resultado+</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>ETIQUETA</p>
<div class="ulist">
<ul>
<li>
<p>Se especifica en la primera columna. Tiene el sufifjo <strong>:</strong></p>
</li>
</ul>
</div>
</li>
<li>
<p>CODIGO DE OPERACION: Se utilizan símbolos <em>mnemónicos</em> que ayudan a interpretar intuitivamente la operación. Pej: ADD sumar, MOV mover, SUB restar, &#8230;&#8203;</p>
</li>
<li>
<p>OPERANDO FUENTE Y/O DESTINO</p>
<div class="ulist">
<ul>
<li>
<p>dato alfanumérico: representación alfanumérica 	&#8594; 16</p>
<div class="ulist">
<ul>
<li>
<p>direccionamiento <em>inmediato</em>: prefijo $</p>
</li>
</ul>
</div>
</li>
<li>
<p>dirección de memoria externa: etiqueta		&#8594; resultado</p>
<div class="ulist">
<ul>
<li>
<p>direccionamiento <em>directo</em></p>
</li>
</ul>
</div>
</li>
<li>
<p>registros internos de la CPU: %rax,%rbx,%rsp,%esi,..	&#8594; %rsp,%esi</p>
<div class="ulist">
<ul>
<li>
<p>El prefijo % significa que el nombre hace referencia a un registro</p>
</li>
</ul>
</div>
</li>
<li>
<p>tamaño del dato operando: sufijos de los mnemónicos: q(quad):8 bytes, l(long):4 bytes, w(word):2 bytes, b(byte):1 byte.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
La sintaxis del lenguaje ensamblador depende del traductor del proceso de ensamblaje (assembler) utilizado, en este caso, se utiliza el assembler GAS.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_traductores_del_proceso_de_ensamblaje">6.4.3. Traductores del proceso de ensamblaje</h4>
<div class="ulist">
<ul>
<li>
<p>Existen dos lenguajes ensamblador para la ISA i386/amd64, dos sintaxis diferentes, que deben de ser traducidos por diferentes traductores de ensamblador produciendo un módulo binario en el mismo lenguaje máquina.</p>
</li>
<li>
<p>los traductores de ensamblador  "NASM" (Netwide Asm), "FASM", "MASM", "TASM", and "YASM" traducen módulos fuente que utilizan la sintaxis del lenguaje ensamblador <strong>intel</strong> a modulos binarios para las arquitecturas i386/amd64</p>
</li>
<li>
<p>El traductor "as" de la fundación GNU traduce módulos fuente  que utilizan las sintaxis del lenguaje de ensamblador <strong>AT&amp;T</strong> a módulos binarios para las arquitecturas i386/amd64</p>
</li>
<li>
<p>La traducción entre la representación del módulo fuente en lenguaje ensamblador almacenado en un fichero del disco duro y la representación del programa en lenguaje máquina se da en el <a href="_apéndice_prácticas.html#fases_compilacion">proceso de ensamblaje</a>:</p>
<div class="ulist">
<ul>
<li>
<p>Módulo Fuente en lenguaje ensamblador &#8594; Traductor Ensamblador &#8594; Módulo Objeto Reubicable &#8594; Linker &#8594; Módulo Objeto Ejecutable Binario&#8594; Cargador &#8594; Proceso</p>
<div class="ulist">
<ul>
<li>
<p>Ejemplo: hola_mundo.s &#8594; <strong>as</strong> &#8594; hola_mundo.o &#8594; <strong>ld</strong> &#8594; hola_mundo (formato ELF) &#8594; <strong>loader</strong> &#8594; hola_mundo (memoria principal) &#8594; creación proceso (hola_mundo en ejecución). "as", "ld" y "loader" son las herramientas GNU necesarias para la creación de un proceso a partir del módulo en lenguaje ensamblador.</p>
</li>
<li>
<p>el linker <strong>ld</strong> mezcla el módulo objeto con módulos del entorno del sistema operativo y con módulos de las librerías.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="imageblock text-center text-center kroki-format-svg kroki">
<div class="content">
<img src="https://kroki.io/graphviz/svg/eNqNj00KwkAMhfeeIszeEwiCFnVjsegBSmYaNHV-SmpX4mE8gCuP0Is5rVgRRFzm5X0vLwXvBasDrOA8Uml7LxobYNmQPxEkCsZTyIQqCYZqdBzl0GlJcBVbLIJ008DNdmmPqIWPbm2xJPVh2OiSYsKcPQoH2FKj2aC2T9ua_ZHkF7AoyTSnAVAJyr5vQR5SckEYn4usbxw6vWcMt3evJsOL9Sv5XaFWQ4UvPstaSNob5gX79uoik0fN5ORz989luDwAO-SAQg==" alt="proceso_compilacion.png">
</div>
<div class="title">Figure 33. Proceso de Compilación</div>
</div>
</div>
<div class="sect3">
<h4 id="_código_máquina">6.4.4. Código Máquina</h4>
<div class="sect4">
<h5 id="_almacenamiento_en_memoria_2">Almacenamiento en Memoria</h5>
<div class="ulist">
<ul>
<li>
<p>Una vez realizado el proceso de traducción del módulo fuente en lenguaje ensamblador se genera un módulo objeto en lenguaje binario que se almacena en el disco duro en forma de fichero.</p>
</li>
<li>
<p>El fichero que contiene el módulo objeto ejecutable en lenguaje binario es necesario cargarlo en la memoria principal. Esta tarea la realiza el <strong>cargador</strong> del sistema operativo.</p>
</li>
<li>
<p>Cada dirección de memoria apunta a 1 byte.</p>
</li>
<li>
<p>La dirección más baja apunta a todo el objeto: instrucción o dato.</p>
</li>
<li>
<p>Ejemplo:</p>
<div class="ulist">
<ul>
<li>
<p><strong>4001a4:       48 83 ec 10</strong></p>
<div class="ulist">
<ul>
<li>
<p>En la posición <strong>0x4001A4</strong> está el byte <strong>48</strong></p>
</li>
<li>
<p>En la posición <strong>0x4001A4+1</strong> está el byte <strong>83</strong></p>
</li>
<li>
<p>En la posición <strong>0x4001A4+2</strong> está el byte <strong>EC</strong></p>
</li>
<li>
<p>En la posición <strong>0x4001A4+3</strong> está el byte <strong>10</strong></p>
</li>
<li>
<p>En la posición de memoria principal <code>0x4001A4</code> está almacenada la instrucción de 4 Bytes 48 83 ec 10.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_interpretación_del_código_máquina">Interpretación del Código Máquina</h5>
<div class="ulist">
<ul>
<li>
<p>Ejemplo:</p>
<div class="ulist">
<ul>
<li>
<p>instrucción máquina arquitectura amd64.</p>
<div class="ulist">
<ul>
<li>
<p><strong>4001a4:       48 83 ec 10   &#8594;  subq    $16,%rsp</strong></p>
</li>
</ul>
</div>
</li>
<li>
<p>Interpretación del programador:</p>
<div class="ulist">
<ul>
<li>
<p>lenguaje ensamblador AT&amp;T de la arquitectura x86.</p>
</li>
<li>
<p>Descripción de la instrucción en lenguaje <strong>RTL</strong>: <em>RSP &#8592; RSP - 16</em></p>
</li>
<li>
<p>En la posición de memoria principal 0x4001A4 está almacenada la instrucción <code>subq    $16,%rsp</code></p>
</li>
<li>
<p>subq indica la operación de resta con datos enteros de 64 bits (sufijo q). Resta del operando destino el operando fuente.</p>
</li>
<li>
<p>El operando fuente  tiene valor decimal 16, 0x10 en hexadecimal y el direccionamiento de este operando es inmediato, es decir, su valor es 16 y está ubicado en la propia instrucción.</p>
</li>
<li>
<p>El operando destino está almacenado en el registro interno de la CPU denominado RSP</p>
</li>
<li>
<p>La referencia a la Próxima Instrucción la realiza no la instrucción sino la CPU realizando la opeación PC&#8592;PC+tamaño de la instrucción en bytes.</p>
</li>
</ul>
</div>
</li>
<li>
<p>¿Cómo interpretar una instrucción máquina  en lenguaje binario ? Es necesario consultar el <strong>Manual de Referencia de la Arquitectura ISA de la máquina x86</strong> y tener conocimientos de los modos de direccionamiento. Este ejemplo se desarrolla al final de este Tema en el apartado 8) <em>Formato de Instrucción de la arquitectura ISA x86</em></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_assembler_as">6.4.5. Assembler "as"</h4>
<div class="sect4">
<h5 id="_directivas">Directivas</h5>
<div class="ulist">
<ul>
<li>
<p>Directivas del traductor ensamblador "as" utilizado por el sistema GNU/linux para el lenguaje ensamblador AT&amp;T.</p>
<div class="ulist">
<ul>
<li>
<p>Al assembler de GNU también se el conoce como "gas".</p>
</li>
<li>
<p><a href="https://www.gnu.org/software/binutils/">binutils</a> &#8594; <a href="https://sourceware.org/binutils/docs-2.26/as/index.html">as assembler</a>: manual oficial</p>
</li>
<li>
<p><a href="http://www.coranac.com/files/gba/re-ejected-gasref.pdf">gas ref card</a></p>
<div class="ulist">
<ul>
<li>
<p>.word reserva 2 bytes en amd64.</p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="https://docs.oracle.com/cd/E26502_01/html/E28388/eoiyg.html">oracle</a></p>
</li>
<li>
<p><a href="https://sourceware.org/binutils/docs-2.26/as/i386_002dDependent.html#i386_002dDependent">opciones para x86 y x86-64</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_manual">Manual</h5>
<div class="ulist">
<ul>
<li>
<p><a href="https://sourceware.org/binutils/docs/as/">binutils as</a>: manual oficial</p>
</li>
<li>
<p><a href="http://asm.sourceforge.net/howto/Assembly-HOWTO.html">Linux Assembly howto</a>: referencias a diferentes assemblers</p>
</li>
<li>
<p><a href="http://web.mit.edu/gnu/doc/html/as_1.html">MIT</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_representación_de_los_datos_en_lenguaje_ensamblador_asm_para_la_arquitectura_i386amd64">6.5. Representación de los datos en lenguaje ensamblador (ASM) para la arquitectura i386/amd64</h3>
<div class="sect3">
<h4 id="_tipos_de_datos">6.5.1. Tipos de Datos</h4>
<div class="sect4">
<h5 id="_números_y_caracteres">Números y Caracteres</h5>
<div class="ulist">
<ul>
<li>
<p>Número sin signo (naturales): codificación binario natural</p>
</li>
<li>
<p>Números enteros con signo: entero codificados en complemento a 2</p>
</li>
<li>
<p>Números reales reales codificados en formato IEEE-754 de simple o doble precisión</p>
</li>
<li>
<p>Caracteres alfanuméricos: código ASCII</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_directivas_de_la_sección_de_datos">Directivas de la Sección de Datos</h5>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<strong>Recomendable</strong> leerse los seis primeros apartados por lo menos y sobre todo lo referente a las <a href="https://sourceware.org/binutils/docs-2.26/as/i386_002dDependent.html#i386_002dDependent:">directivas dependientes de la arquitectura x86</a>
</td>
</tr>
</table>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 10. Directivas básicas</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Directivas</th>
<th class="tableblock halign-left valign-top">descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">.global o .globl etiqueta</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">variables globales</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">.section .data</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">sección de las variables locales estáticas inicializadas</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">.section .text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">sección de las instrucciones</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">.section .bss</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">sección de las variables sin inicializar</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">.section .rodata</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">sección de las variables de sólo lectura</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">.type	  name , type description</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tipo de variable, p.ej @function</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">.common   100</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">reserva 100 bytes sin inicializar y puede ser referenciado globalmente</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">.lcomm   bucle, 100</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">reserva 100bytes referenciados con el símbolo local bucle. Sin inicializar.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">.space    100</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">reserva 100 bytes inicializados a cero</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">.space    100, 3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">reserva 100 bytes inicializados a 3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">.string  "Hola"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">añade el byte 0 al final de la cadena</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">.asciz   "Hola"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">añade el byte 0 al final de la cadena</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">.ascii   "Hola"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no añade le caracter NULL de final de cadena</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">.byte    3,7,-10,0b1010,0xFF,0777</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tamaño 1Byte y formatos decimal,decimal,decimal,binario,hexadecimal,octal</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">.2byte    3,7,-10,0b1010,0xFF,0777</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tamaño 2Bytes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">.word    3,7,-10,0b1010,0xFF,0777</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tamaño 2Bytes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">.short   3,7,-10,0b1010,0xFF,0777</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tamaño 2B</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">.4byte    3,7,-10,0b1010,0xFF,0777</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tamaño 4B</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">.long    3,7,-10,0b1010,0xFF,0777</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tamaño 4B</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">.int     3,7,-10,0b1010,0xFF,0777</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tamaño 4B</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">.8byte    3,7,-10,0b1010,0xFF,0777</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tamaño 8B</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">.quad    3,7,-10,0b1010,0xFF,0777</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tamaño 8B</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">.octa    3,7,-10,0b1010,0xFF,0777</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">formato octal</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">.double  3.14159, 2 E-6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">precisión doble</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">.float   2E-6, 3.14159</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">precisión simple</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">.single  2E-6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">precisión simple</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">.include "file"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">incluye el fichero . Obligatorias las comillas.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">.equ     SUCCESS, 0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">macro que asocia el símbolo SUCCESS al número 0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">.macro macname macargs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">define el comienzo de una macro de nombre macname y argumentos macargs</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">.endmacro</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">define el final de una macro</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">.align   n</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">las instrucciones o datos posteriores empezarán en una dirección multiplo de n bytes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">.end</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">fin del ensamblaje</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<ul>
<li>
<p>Et: Etiqueta</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_tamaño_del_operando_x86">6.5.2. Tamaño del operando x86</h4>
<div class="ulist">
<ul>
<li>
<p>Tamaño del operando: sufijos de los MNEMÓNICOS.</p>
<div class="listingblock">
<div class="content">
<pre>q (quad) 8bytes
l (long) 4bytes
w (word) 2bytes
b (byte) 1byte</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Ejemplos:</p>
<div class="ulist">
<ul>
<li>
<p>movq  %rax,resultado</p>
</li>
<li>
<p>movl  %eax,resultado</p>
</li>
<li>
<p>movw  %ax,resultado</p>
</li>
<li>
<p>movb  %ah,resultado</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_alineamiento_de_bytes_big_little_endian">6.5.3. Alineamiento de Bytes: Big-Little Endian</h4>
<div class="ulist">
<ul>
<li>
<p>Los bytes de un dato de varios bytes se pueden almacenar en memoria en sentido MSB-<em><em>_- LSB ó MSB-</em>_</em>-LSB</p>
</li>
<li>
<p>Alineamiento <em>Little Endian</em>: El byte de menor peso LSB se almacena en la posición de memoria más baja</p>
</li>
<li>
<p>Ejemplo <strong>0x40000: 00 AF BF CF</strong></p>
<div class="ulist">
<ul>
<li>
<p>En la posición de memoria principal 0x40000 está almacenado el dato de 4 bytes: <code>00 AF BF CF</code></p>
<div class="ulist">
<ul>
<li>
<p>Los bytes se guardan en dirección de memoria ascendente. Cuando se escribe en horizontal, ascendente significa de izda a dcha.</p>
</li>
<li>
<p>En la posición <strong>0x40000</strong> está el byte 00 &#8594; <strong>LSB</strong> (Least Significant Byte)</p>
</li>
<li>
<p>En la posición <strong>0x40001</strong> está el byte AF</p>
</li>
<li>
<p>En la posición <strong>0x40002</strong> está el byte BF</p>
</li>
<li>
<p>En la posición <strong>0x40003</strong> está el byte CF &#8594; <strong>MSB</strong> (Most Significant Byte)</p>
<div class="imageblock kroki">
<div class="content">
<img src="https://kroki.io/ditaa/svg/eNrjcvEMcnV29vT3cw1WgAFnf78QVz9PF38uLgUUoK2LFWiDlBlUGIAASFmNAlZQQ7JphlQ1zYhKpiFrG96mGVSYYIlTiADMEp9gJ5JNRI9XRzdK3Icer04UmWaMZpozsmkKviT5diSllDQQoIZpAA9ft-o=" alt="Diagram">
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>El byte de menor peso se almacena en la posición de memoria más baja. La posición más baja de las cuatro es la 0x4000 donde se almacena el 00, luego este es el byte de menor peso. El dato almacenado en formato little-endian  es el <strong>0xCFBFAF00</strong>.</p>
</li>
<li>
<p>La arquitectura i386/amd64 utiliza LITTLE ENDIAN</p>
</li>
</ul>
</div>
</li>
<li>
<p>Tipos de información que siguen el formato little endian.</p>
<div class="ulist">
<ul>
<li>
<p>Para las instrucciones el formato es por campos por lo que no tiene sentido hablar de posiciones de mayor o menor peso de la instrucción por lo que no siguen el formato little endian.</p>
</li>
<li>
<p>Las cadenas de caracteres (strings) no representan un valor y por lo tanto no siguen el formato little endian.</p>
</li>
<li>
<p>Los números enteros se almacenan siguiendo el formato little endian.</p>
</li>
<li>
<p>Los números reales se almacenan siguiendo el formato little endian</p>
</li>
<li>
<p>Las direcciones de memoria se almacenan siguiendo la organización Little Endian.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Formato Big Endian</p>
<div class="ulist">
<ul>
<li>
<p>El orden de almacenamiento es el inverso al little endian, es decir, el byte LSB del dato se almacena en la dirección de memoria mayor de la región que ocupa el dato.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_operandos_modos_de_direccionamiento_2">6.6. Operandos: Modos de Direccionamiento</h3>
<div class="sect3">
<h4 id="_localización_2">6.6.1. Localización</h4>
<div class="ulist">
<ul>
<li>
<p>Ejemplo:</p>
<div class="ulist">
<ul>
<li>
<p><code>bucle:  SUBQ     $16,%rsp                ;comienzo del bucle</code></p>
<div class="ulist">
<ul>
<li>
<p>Operando fuente: $ indica direccionamiento INMEDIATO .El operando está en la propia instrucción &#8594; Operando=16</p>
</li>
<li>
<p>Operando destino: % indica REGISTRO. El operando está en el registro RSP</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>suma:   ADDW     (%ESI),resultado        ;fin de operación</code></p>
<div class="ulist">
<ul>
<li>
<p>Operando fuente: () indica INDIRECCION y % registro .El registro ESI continene la dirección de memoria donde está el operando</p>
</li>
<li>
<p>Operando destino: "resultado" es una etiqueta. Direccionamiento ABSOLUTO. El operando está en la dirección de memoria "resultado".</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_modos_de_direccionamiento">6.6.2. Modos de Direccionamiento</h4>
<div class="ulist">
<ul>
<li>
<p>Manual del assembler, apartado directivas dependientes de la arquitectura x86</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://sourceware.org/binutils/docs-2.26/as/i386_002dDependent.html#i386_002dDependent" class="bare">https://sourceware.org/binutils/docs-2.26/as/i386_002dDependent.html#i386_002dDependent</a>:</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<strong>RECOMENDABLE</strong> leerse los seis primeros apartados por lo menos
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>Direccionamientos:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>INMEDIATO:</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>El valor del operando está ubicado inmediatamente después del código de operación de la instruccion. Unicamente se especifica el operando fuente.</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" rowspan="2"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sintaxis: el valor del operando se indica con el prefijo <strong>$</strong> .</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ejemplo: <strong>movl $0xabcd1234, %ebx</strong>. El operando fuente es el valor 0xABCD1234</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>REGISTRO:</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>El valor del operando está localizado en un registro de la CPU.</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" rowspan="2"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sintaxis: Nombre del registro con el prefijo <strong>%</strong>.</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ejemplo: <strong>movl %eax, %ebx</strong>. El operando fuente es el REGISTRO EAX y el destino es el REGISTRO EBX</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DIRECTO:</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>La dirección efectiva apuntando al operando almacenado en la Memoria Principal es la dirección absoluta referenciada por la etiqueta especificada en el campo de operando. El programador utiliza el direccionamiento directo pero el compilador lo transforma en un direccionamiento relativo al contador de programa. Ver direccionamiento con desplazamiento.</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" rowspan="2"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sintaxis: una etiqueta definida por el programador</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ejemplo: <strong>je somePlace</strong>   . Salto a la dirección marcada por la etiqueta somePlace si el resultado de la operación anterior activa el flag ZF=1 del registro RFLAG.</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>INDEXADO:</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>El valor del operando está localizado en memoria. La dirección efectiva apuntando a Memoria es la SUMA del valor del registro_base MAS scale POR el valor en el registro_índice, MAS el offset. <em>EA=Offset+R_Base+R_índice*Scale</em></code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" rowspan="2"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sintaxis: lista de valores separados por coma y entre paréntesis (base_register, index_register, scale) y precedido por un offset.</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ejemplo: <strong>movl $0x6789cdef, -16(%edx, %eax, 4)</strong> . La dirección efectiva del destino es  EDX + EAX*4 - 16.</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>INDIRECTO:</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Si  el modo general de indexación  lo particularizamos en <code>(base_register)</code> entonces la dirección del operando no se obtiene mediante una indexación sino que la dirección efectiva es el contenido de rdx y por lo tanto se accede al operando indirectamente.</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" rowspan="2"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sintaxis:  (base_register)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ejemplo: <strong>movl $0x6789cdef, (%edx)</strong> . La dirección efectiva del destino es  EDX. EDX es un puntero.</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>RELATIVO: registro base más un offset:</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>El valor del operando está ubicado en memoria. La dirección efectiva del operando es la suma del valor contenido en un registro base más un valor de offset.</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" rowspan="2"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sintaxis: registro entre paréntesis y el offset inmediatamente antes del paréntesis.</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ejemplo: <strong>movl $0xaabbccdd, -12(%eax)</strong>  . La dirección efectiva del operando destino es  EAX-12</code></p></td>
</tr>
</tbody>
</table>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_ejemplos_2">Ejemplos</h5>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 11. Modos de Direccionamiento de los Operandos</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Direccionamiento Operando</th>
<th class="tableblock halign-left valign-top">Valor Operando</th>
<th class="tableblock halign-left valign-top">Nombre del Modo</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$0</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Valor Cero</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Inmediato</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>%rax</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>RAX</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Registro</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>loop_exit</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>M[loop_exit]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Directo</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>data_items(,%rdi,4)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>M[data_item + 4*RDI]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Indexado</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(%rbx)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>M[RBX]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Indirecto</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(%rbx,%rdi,4)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>M[RBX + 4*RDI]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Indirecto Indexado</code></p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<ul>
<li>
<p>M[loop_exit]: directo ya que loop_exit es una dirección de memoria externa y M indica la memoria externa.</p>
</li>
<li>
<p>M[RBX]: indirecto ya que RBX es una dirección de memoria interna y M indica memoria externa: A la mem. externa se accede a través de la mem. interna.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="repertorio_instruc_oper">6.7. Repertorio de Instrucciones: Operaciones</h3>
<div class="sect3">
<h4 id="_manuales_de_referencia">6.7.1. Manuales de referencia</h4>
<div class="sect4">
<h5 id="_lenguaje_intel">Lenguaje Intel</h5>
<div class="ulist">
<ul>
<li>
<p>Manuales oficiales</p>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html">Intel</a>: Vol 2</p>
</li>
<li>
<p><a href="http://developer.amd.com/resources/documentation-articles/developer-guides-manuals/">AMD</a>: apartado Manuals : vol 3</p>
</li>
<li>
<p><a href="https://sourceware.org/binutils/docs-2.25/">binutils</a>:</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://sourceware.org/binutils/docs-2.25/as/index.html"><strong>as: traductor assembler</strong></a>: opciones de la línea de comandos, directivas, tipos de datos, etc</p>
</li>
<li>
<p><a href="https://sourceware.org/binutils/docs-2.25/ld/index.html">ld: linker</a></p>
</li>
<li>
<p><a href="https://sourceware.org/binutils/docs-2.25/binutils/index.html">objdump, readelf, &#8230;&#8203;.</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Manuales no oficiales:</p>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.felixcloutier.com/x86/">manual Intel quick</a>: <strong>recomendado</strong></p>
</li>
<li>
<p><a href="http://www.cs.nyu.edu/~mwalfish/classes/ut/s13-cs439/ref/i386/toc.htm">intel descriptivo i386</a></p>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.cs.nyu.edu/~mwalfish/classes/ut/s13-cs439/ref/i386/c17.htm">Repertorio ISA y Formato de Instrucción</a></p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="http://docs.oracle.com/cd/E19253-01/817-5477/817-5477.pdf">AT&amp;T Solaris Manual amd64-i386 </a>: lenguaje y traductor assembler.</p>
</li>
<li>
<p><a href="http://www.unixwiz.net/techtips/x86-jumps.html">Saltos Condicionales</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_lenguaje_att">lenguaje AT&amp;T</h5>
<div class="ulist">
<ul>
<li>
<p><a href="https://docs.oracle.com/cd/E53394_01/html/E54851/eqbsu.html">Oracle Solaris ASM</a></p>
<div class="ulist">
<ul>
<li>
<p>En este documento  a la sintaxis AT&amp;T la denomina "Oracle Solaris".</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_transferencia">6.7.2. TRANSFERENCIA</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 9.0909%;">
<col style="width: 18.1818%;">
<col style="width: 18.1818%;">
<col style="width: 36.3636%;">
<col style="width: 18.1819%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Nombre</th>
<th class="tableblock halign-left valign-top">Comentario</th>
<th class="tableblock halign-left valign-top">Código</th>
<th class="tableblock halign-left valign-top">Operación</th>
<th class="tableblock halign-left valign-top">O D I T S Z A P C</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MOV</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mover (copiar)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MOV Fuente,Dest</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dest:=Fuente</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">XCHG</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Intercambiar</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XCHG Op1,Op2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Op1:=Op2 , Op2:=Op1</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">STC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set the carry (Carry = 1)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">STC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CF:=1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CLC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Clear Carry (Carry = 0)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CLC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CF:=0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CMC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Complementar Carry</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CMC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CF:=Ø</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">±</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">STD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Setear dirección</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">STD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DF:=1(interpreta strings de arriba hacia abajo)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CLD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Limpiar dirección</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CLD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DF:=0(interpreta strings de abajo hacia arriba)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">STI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Flag de Interrupción en 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">STI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IF:=1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CLI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Flag de Interrupción en 0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CLI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IF:=0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PUSH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Apilar en la pila</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PUSH Fuente</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DEC SP, [SP]:=Fuente</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PUSHF</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Apila los flags</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PUSHF</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O, D, I, T, S, Z, A, P, C 286+: También NT,IOPL</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PUSHA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Apila los registros generales</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PUSHA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AX, CX, DX, BX, SP, BP, SI, DI</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">POP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Desapila de la pila</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">POP Dest</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Destino:=[SP], INC SP</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">POPF</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Desapila a los flags</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">POPF</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O,D,I,T,S,Z,A,P,C 286+: También NT,IOPL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">± ± ± ± ± ± ± ± ±</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">POPA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Desapila a los reg. general.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">POPA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DI, SI, BP, SP, BX, DX, CX, AX</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CBW</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Convertir Byte a Word</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CBW</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AX:=AL (con signo)</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Convertir Word a Doble</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DX:AX:=AX (con signo)</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWDE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conv. Word a Doble Exten.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CWDE 386</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EAX:=AX (con signo)</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">IN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Entrada</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IN Dest,Puerto</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AL/AX/EAX := byte/word/double del puerto esp.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OUT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Salida</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OUT Puer,Fuente</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Byte/word/double del puerto := AL/AX/EAX</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="ulist">
<ul>
<li>
<p>Flags: <strong>±</strong> =Afectado por esta instrucción, <strong>?</strong> =Indefinido luego de esta instrucción</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_aritméticos">6.7.3. ARITMÉTICOS</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 9.0909%;">
<col style="width: 18.1818%;">
<col style="width: 18.1818%;">
<col style="width: 36.3636%;">
<col style="width: 18.1819%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Nombre</th>
<th class="tableblock halign-left valign-top">Comentario</th>
<th class="tableblock halign-left valign-top">Código</th>
<th class="tableblock halign-left valign-top">Operación</th>
<th class="tableblock halign-left valign-top">O D I T S Z A P C</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ADD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Suma</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ADD Fuente,Dest</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dest:=Dest+ Fuente</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">±       ± ± ± ± ±</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ADC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Suma con acarreo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ADC Fuente,Dest</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dest:=Dest+ Fuente +CF</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">±       ± ± ± ± ±</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SUB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Resta</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SUB Fuente,Dest</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dest:=Dest- Fuente</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">±       ± ± ± ± ±</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SBB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Resta con acarreo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SBB Fuente,Dest</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dest:=Dest-(Fuente +CF)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">±       ± ± ± ± ±</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DIV</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">División (sin signo)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DIV Op</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Op=byte: AL:=AX / Op AH:=Resto</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">?       ? ? ? ? ?</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DIV</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">División (sin signo)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DIV Op</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Op=word:         AX:=DX:AX / Op DX:=Resto</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">?       ? ? ? ? ?</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DIV</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">386 División (sin signo)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DIV Op</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Op=doublew.:     EAX:=EDX:EAX / Op EDX:=Resto</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">?	 ? ? ? ? ?</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">IDIV</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">División entera con signo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IDIV Op</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Op=byte:        AL:=AX / Op AH:=Resto</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">?	 ? ? ? ? ?</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">IDIV</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">División entera con signo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IDIV Op</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Op=word: AX:=DX:AX / Op DX:=Resto</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">?	 ? ? ? ? ?</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">IDIV</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">386 División entera con signo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IDIV Op</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Op=doublew.: EAX:=EDX:EAX / Op EDX:=Resto</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">?	 ? ? ? ? ?</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MUL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Multiplicación (sin signo)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MUL Op</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Op=byte: AX:=AL*Op si AH=0 #</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">±	 ? ? ? ? ±</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MUL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Multiplicación (sin signo)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MUL Op</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Op=word: DX:AX:=AX*Op si DX=0 #</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">±	 ? ? ? ? ±</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MUL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">386 Multiplicación (sin signo)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MUL Op</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Op=double: EDX:EAX:=EAX*Op si EDX=0 #</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">±	 ? ? ? ? ±</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">IMUL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">i Multiplic. entera con signo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IMUL Op</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Op=byte: AX:=AL*Op si AL es suficiente #</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">±	 ? ? ? ? ±</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">IMUL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Multiplic. entera con signo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IMUL Op</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Op=word: DX:AX:=AX*Op si AX es suficiente #</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">±	 ? ? ? ? ±</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">IMUL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">386 Multiplic. entera con signo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IMUL Op</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Op=double: EDX:EAX:=EAX*Op si EAX es sufi. #</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">±	 ? ? ? ? ±</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">INC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Incrementar</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">INC Op</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Op:=Op+1 (El Carry no resulta afectado !)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">±	 ± ± ± ±</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DEC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Decrementar</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DEC Op</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Op:=Op-1 (El Carry no resulta afectado !)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">±       ± ± ± ±</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CMP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Comparar</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CMP Fuente,Destino</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Destino-Fuente</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">±       ± ± ± ± ±</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SAL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Desplazam. aritm. a la izq.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SAL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Op,Cantidad</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">i       ± ± ? ± ±</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SAR</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Desplazam. aritm. a la der.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SAR</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Op,Cantidad</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">i       ± ± ? ± ±</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RCL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rotar a la izq. c/acarreo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RCL Op,Cantidad</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">i               ±</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RCR</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rotar a la derecha c/acarreo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RCR Op,Cantidad</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">i               ±</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ROL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rotar a la izquierda</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ROL Op,Cantidad</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">i               ±</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<ul>
<li>
<p><strong>i</strong>:para más información ver especificaciones de la intrucción,</p>
</li>
<li>
<p><strong>#</strong>:entonces CF:=0, OF:=0 sino CF:=1, OF:=1</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_lógicos">6.7.4. LÓGICOS</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 9.0909%;">
<col style="width: 18.1818%;">
<col style="width: 18.1818%;">
<col style="width: 36.3636%;">
<col style="width: 18.1819%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Nombre</th>
<th class="tableblock halign-left valign-top">Comentario</th>
<th class="tableblock halign-left valign-top">Código</th>
<th class="tableblock halign-left valign-top">Operación</th>
<th class="tableblock halign-left valign-top">O D I T S Z A P C</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">NEG</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Negación (complemento a 2)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NEG Op</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Op:=0-Op si Op=0 entonces CF:=0 sino CF:=1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">±       ± ± ± ± ±</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">NOT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Invertir cada bit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NOT Op</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Op:=Ø~Op (invierte cada bit)</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">AND</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Y</em> (And) lógico</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AND Fuente,Dest</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dest:=Dest ^ Fuente</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0       ± ± ? ± 0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OR</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>O</em> (Or) lógico</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OR  Fuente,Dest</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dest:=Dest v Fuente</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0       ± ± ? ± 0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">XOR</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>O</em> (Or) exclusivo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XOR Fuente,Dest</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dest:=Dest (xor) Fuente</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0       ± ± ? ± 0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SHL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Desplazam. lógico a la izq.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SHL Op,Cantidad</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">i       ± ± ? ± ±</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SHR</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Desplazam. lógico a la der.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SHR Op,Cantidad</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">i       ± ± ? ± ±</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_misceláneos">6.7.5. MISCELÁNEOS</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 9.0909%;">
<col style="width: 18.1818%;">
<col style="width: 18.1818%;">
<col style="width: 36.3636%;">
<col style="width: 18.1819%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Nombre</th>
<th class="tableblock halign-left valign-top">Comentario</th>
<th class="tableblock halign-left valign-top">Código</th>
<th class="tableblock halign-left valign-top">Operación</th>
<th class="tableblock halign-left valign-top">O D I T S Z A P C</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">NOP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hacer nada</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NOP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No hace operación alguna</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LEA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cargar direciión Efectiva</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LEA Fuente,Dest</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dest := dirección fuente</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">INT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Interrupción</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">INT Num</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Interrumpe el proceso actual y salta al vector Num</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0 0</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_saltos_generales">6.7.6. SALTOS  (generales)</h4>
<div class="ulist">
<ul>
<li>
<p><a href="https://en.wikibooks.org/wiki/X86_Assembly/Control_Flow#Jump_if_Lesser">wiki x86 assembly</a></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>Nombre  Comentario                      Código          Operación
CALL    Llamado a subrutina             CALL Proc
JMP     Saltar                          JMP Dest
JE      Saltar si es igual              JE Dest         (= JZ)
JZ      Saltar si es cero               JZ Dest         (= JE)
JCXZ    Saltar si CX es cero            JCXZ Dest
JP      Saltar si hay paridad           JP Dest         (= JPE)
JPE     Saltar si hay paridad par       JPE Dest        (= JP)
JPO     Saltar si hay paridad impar     JPO Dest        (= JNP)
JNE     Saltar si no es igual           JNE Dest        (= JNZ)
JNZ     Saltar si no es cero            JNZ Dest        (= JNE)
JECXZ   Saltar si ECX es cero           JECXZ Dest 386
JNP     Saltar si no hay paridad        JNP Dest        (= JPO)
RET     Retorno de subrutina            RET</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_saltos_sin_signo_cardinal_saltos_con_signo_integer">6.7.7. SALTOS  Sin Signo (Cardinal) SALTOS Con Signo (Integer)</h4>
<div class="listingblock">
<div class="content">
<pre>Nombre  Comentario                      Código          Operación
JA      Saltar si es superior           JA Dest         (= JNBE)
JAE     Saltar si es superior o igual   JAE Dest        (= JNB = JNC)
JB      Saltar si es inferior           JB Dest         (= JNAE = JC)
JBE     Saltar si es inferior o igual   JBE Dest        (= JNA)
JNA     Saltar si no es superior        JNA Dest        (= JBE)
JNAE    Saltar si no es super. o igual  JNAE Dest       (= JB = JC)
JNB     Saltar si no es inferior        JNB Dest        (= JAE = JNC)
JNBE    Saltar si no es infer. o igual  JNBE Dest       (= JA)
JC      Saltar si hay carry JC Dest     JO  Dest        Saltar si hay Overflow
JNC     Saltar si no hay carry          JNC Dest
JNO     Saltar si no hay Overflow       JNO Dest
JS      Saltar si hay signo (=negativo) JS Dest
JG      Saltar si es mayor              JG Dest         (= JNLE)
JGE     Saltar si es mayor o igual      JGE Dest        (= JNL)
JL      Saltar si es menor              JL Dest         (= JNGE)
JLE     Saltar si es menor o igual      JLE Dest        (= JNG)
JNG     Saltar si no es mayor           JNG Dest        (= JLE)
JNGE    Saltar si no es mayor o igual   JNGE Dest       (= JL)
JNL     Saltar si no es inferior        JNL Dest        (= JGE)
JNLE    Saltar si no es menor o igual   JNLE Dest       (= JG)</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_flags_oditszapc">6.7.8. FLAGS (ODITSZAPC)</h4>
<div class="listingblock">
<div class="content">
<pre>O: Overflow resultado de operac. sin signo es muy grande o pequeño.
D: Dirección
I: Interrupción Indica si pueden ocurrir interrupciones o no.
T: Trampa Paso, por paso para debugging
S: Signo Signo del resultado. Razonable sólo para enteros. 1=neg. 0=pos.
Z: Cero Resultado de la operación es cero. 1=Cero
A: Carru Aux. Similar al Carry, pero restringido para el nibble bajo únicamente
P: Paridad 1=el resultado tiene cantidad par de bits en uno
C: Carry resultado de operac. sin signo es muy grande o inferior a cero</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_sufijos">6.7.9. Sufijos</h4>
<div class="ulist">
<ul>
<li>
<p>Sufijos de los mnemónicos del código de operación:</p>
<div class="ulist">
<ul>
<li>
<p><em>q</em> : quad: operando de 8 bytes: cuádruple palabra</p>
</li>
<li>
<p><em>l</em> : long: operando de 4 bytes: doble palabra</p>
</li>
<li>
<p><em>w</em> : word: operando de 2 bytes: palabra</p>
</li>
<li>
<p><em>b</em> : byte: operando de 1 byte</p>
</li>
</ul>
</div>
</li>
<li>
<p>Si el mnemónico de operación no lleva sufijo el tamaño por defecto del operando es <em>long</em></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_códigos_de_operación_2">6.7.10. Códigos de Operación</h4>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.cs.nyu.edu/~mwalfish/classes/ut/s13-cs439/ref/i386/MOV.htm">MOV</a></p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">MOV <span class="nt">--</span> Move Data

Opcode   Instruction       Clocks        Description

88  /r   MOV r/m8,r8       2/2           Move byte register to r/m byte
89  /r   MOV r/m16,r16     2/2           Move word register to r/m word
89  /r   MOV r/m32,r32     2/2           Move dword register to r/m dword
8A  /r   MOV r8,r/m8       2/4           Move r/m byte to byte register
8B  /r   MOV r16,r/m16     2/4           Move r/m word to word register
8B  /r   MOV r32,r/m32     2/4           Move r/m dword to dword register
8C  /r   MOV r/m16,Sreg    2/2           Move segment register to r/m word
8D  /r   MOV Sreg,r/m16    2/5,pm<span class="o">=</span>18/19  Move r/m word to segment register
A0       MOV AL,moffs8     4             Move byte at <span class="o">(</span>seg:offset<span class="o">)</span> to AL
A1       MOV AX,moffs16    4             Move word at <span class="o">(</span>seg:offset<span class="o">)</span> to AX
A1       MOV EAX,moffs32   4             Move dword at <span class="o">(</span>seg:offset<span class="o">)</span> to EAX
A2       MOV moffs8,AL     2             Move AL to <span class="o">(</span>seg:offset<span class="o">)</span>
A3       MOV moffs16,AX    2             Move AX to <span class="o">(</span>seg:offset<span class="o">)</span>
A3       MOV moffs32,EAX   2             Move EAX to <span class="o">(</span>seg:offset<span class="o">)</span>
B0 + rb  MOV reg8,imm8     2             Move immediate byte to register
B8 + rw  MOV reg16,imm16   2             Move immediate word to register
B8 + rd  MOV reg32,imm32   2             Move immediate dword to register
C6       MOV r/m8,imm8     2/2           Move immediate byte to r/m byte
C7       MOV r/m16,imm16   2/2           Move immediate word to r/m word
C7       MOV r/m32,imm32   2/2           Move immediate dword to r/m dword</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>dword :double word: 32 bits</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
la sintaxis del lenguage ASM no es AT&amp;T sino Intel &#8594;  mnemónico operando_destino, operando fuente
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Programas Ejemplo</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="mnemonicos_basicos_explicados">6.8. Mnemónicos Básicos (Explicados)</h3>
<div class="sect3">
<h4 id="_operaciones_aritméticas">6.8.1. Operaciones aritméticas</h4>
<div class="ulist">
<ul>
<li>
<p><code>mul</code>: multiplicación de números naturales, sin signo</p>
<div class="listingblock">
<div class="content">
<pre>Performs an unsigned multiplication of the first operand (destination operand) and the second operand (source operand) and stores the result in the destination operand. The destination operand is an implied operand located in register AL, AX or EAX (depending on the size of the operand); the source operand is located in a general-purpose register or a memory location</pre>
</div>
</div>
</li>
<li>
<p><code>mul</code>: multiplicación de números enteros con signo</p>
<div class="ulist">
<ul>
<li>
<p>Puede tener 1,2 o 3 operandos</p>
<div class="listingblock">
<div class="content">
<pre>Performs a signed multiplication of two operands. This instruction has three forms, depending on the number of operands.

    One-operand form — This form is identical to that used by the MUL instruction. Here, the source operand (in a general-purpose register or memory location) is multiplied by the value in the AL, AX, EAX, or RAX register (depending on the operand size) and the product (twice the size of the input operand) is stored in the AX, DX:AX, EDX:EAX, or RDX:RAX registers, respectively.</pre>
</div>
</div>
</li>
<li>
<p><code>imull Etiqueta</code> :  R[ %edx ]:R[ %eax ] ← M[Etiqueta] × R[ %eax ]</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>div</code>: división de números naturales, sin signo</p>
</li>
<li>
<p><code>idiv</code>:</p>
<div class="listingblock">
<div class="content">
<pre>Divides the (signed) value in the AX, DX:AX, or EDX:EAX (dividend) by the source operand (divisor) and stores the result in the AX (AH:AL), DX:AX, or EDX:EAX registers. The source operand can be a general-purpose register or a memory location. The action of this instruction depends on the operand size (dividend/divisor).

Non-integral results are truncated (chopped) towards 0</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>idiv</code></p>
<div class="ulist">
<ul>
<li>
<p>EAX&#8592;Cociente{[EDX:EAX]/M[Op_fuente]} , EDX&#8592;Resto{[EDX:EAX]/M[Op_fuente]}</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Extensión de signo</p>
<div class="ulist">
<ul>
<li>
<p>movsbw src,Reg &#8594; Mov Sign Byte to Word</p>
</li>
<li>
<p>movsbl src,Reg &#8594; Mov Sign Byte to Long</p>
</li>
<li>
<p>movswl rc,Reg  &#8594; Mov Sign Word to Long</p>
</li>
</ul>
</div>
</li>
<li>
<p>Cambio de tamaño</p>
<div class="ulist">
<ul>
<li>
<p>movzbw src,Reg &#8594; Mov Byte to Word</p>
</li>
<li>
<p>movzbl src,Reg &#8594; Mov Byte to Long</p>
</li>
<li>
<p>movzwl src,Reg &#8594; Mov Byte to Long</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_procesamiento_condicional">6.8.2. Procesamiento Condicional</h4>
<div class="sect4">
<h5 id="_boolean_comparación">Boolean &amp; Comparación</h5>
<div class="ulist">
<ul>
<li>
<p>NOT</p>
<div class="ulist">
<ul>
<li>
<p>no flags</p>
</li>
</ul>
</div>
</li>
<li>
<p>AND</p>
<div class="ulist">
<ul>
<li>
<p>Clear CF,OF</p>
</li>
<li>
<p>Modifica SF,ZF,PF</p>
</li>
</ul>
</div>
</li>
<li>
<p>OR</p>
<div class="ulist">
<ul>
<li>
<p>Clear CF,OF</p>
</li>
<li>
<p>Modifica SF,ZF,PF</p>
</li>
</ul>
</div>
</li>
<li>
<p>XOR</p>
<div class="ulist">
<ul>
<li>
<p>Clear CF,OF</p>
</li>
<li>
<p>Modifica SF,ZF,PF</p>
</li>
</ul>
</div>
</li>
<li>
<p>TEST</p>
<div class="ulist">
<ul>
<li>
<p>Clear CF,OF</p>
</li>
<li>
<p>Modifica SF,ZF,PF</p>
</li>
</ul>
</div>
</li>
<li>
<p>CMP</p>
<div class="ulist">
<ul>
<li>
<p>Modifica CF,OF,SF,ZF,PF,AF</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_saltos">6.8.3. Saltos</h4>
<div class="sect4">
<h5 id="_indirectos">Indirectos</h5>
<div class="ulist">
<ul>
<li>
<p>Símbolo <em><strong></em> para indicar indirección en los saltos y diferenciarlos del direccionamiento relativo. En cambio en los movimientos MOV no hace falta el símbolo <em></strong></em> ya que no hay saltos relativos.</p>
<div class="listingblock">
<div class="content">
<pre>jmp bucle   -&gt; salto relativo a EIP
jmp *bucle
jmp *eax
jmp *(eax)
jmp *(mem)
jmp *table(%ebx,%esi,4)</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_desplazamiento_y_rotación">6.8.4. Desplazamiento y rotación</h4>
<div class="ulist">
<ul>
<li>
<p><code>sar</code>,<code>sal</code> : Shift Arithmetic Right, Shift Arithmetic Left.</p>
<div class="ulist">
<ul>
<li>
<p>desplazamiento aritmético: El digito entrante por la izda o dcha es el bit de signo.</p>
<div class="listingblock">
<div class="content">
<pre>Shifts the bits in the first operand (destination operand) to the left or right by the number of bits specified in the second operand (count operand). Bits shifted beyond the destination operand boundary are first shifted into the CF flag, then discarded. At the end of the shift operation, the CF flag contains the last bit shifted out of the destination operand.</pre>
</div>
</div>
</li>
<li>
<p><code>sarl $31, %edx</code> : desplazamiento de 31 bits a la dcha y el bit entrante es el bit de signo el operando en EDX.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>shr</code>,<code>shl</code></p>
</li>
<li>
<p>desplazmiento lógico: entran ceros</p>
<div class="ulist">
<ul>
<li>
<p>Ejemplos de multiplicación y división</p>
</li>
</ul>
</div>
</li>
<li>
<p>ROL,ROR</p>
<div class="ulist">
<ul>
<li>
<p>el bit que sale fuera se copia en CF</p>
</li>
<li>
<p>Aplicación: conversión endianess</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_cambiar_el_endianess">6.8.5. Cambiar el Endianess</h4>
<div class="listingblock">
<div class="content">
<pre>## Cambio del endianess en EAX. Previamente guarda el original de EAX y al final restaura EAX
swapbytes:
       xchg (%ebx), %eax
       bswap %eax
       xchg (%ebx), %eax</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_formato_de_instrucción_isa_intel_x86_64">6.9. Formato de Instrucción: ISA Intel x86-64</h3>
<div class="ulist">
<ul>
<li>
<p>Apéndice <a href="_formato_de_instrucción_isa_intel_x86_64_2.html#form_inst">Formato Instrucción</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_subrutinas">6.10. Subrutinas</h3>
<div class="sect3">
<h4 id="_introducción_4">6.10.1. Introducción</h4>
<div class="ulist">
<ul>
<li>
<p>Las subrutinas en lenguaje ensamblador son el equivalente a las funciones en el lenguaje de programación en C, por lo que es necesario repasar el concepto de función en el lenguaje C.</p>
</li>
<li>
<p>Referencias a las subrutinas son la práctica 5 y el capítulo 14 del Apéndice.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_lenguaje_c_sentencia_función">6.10.2. Lenguaje C: Sentencia Función</h4>
<div class="sect4">
<h5 id="_introducción_5">Introducción</h5>
<div class="paragraph">
<p>El objetivo de las funciones es descomponer el programa en módulos de código para dotar al programa de una estructura organizada que facilite el desarrollo del programa y su mantenimiento.
La librería standard "libc" son colecciones de funciones básicas desarrolladas en el lenguaje C que son reutilizadas por la mayoría de los programas. De esta manera el programador no tiene que inventar la rueda.
Por lo tanto en un programa coexisten funciones desarrolladas por el propio usuario en lenguaje C y funciones de librerías accesibles en código binario.</p>
</div>
</div>
<div class="sect4">
<h5 id="_declaración">Declaración</h5>
<div class="ulist">
<ul>
<li>
<p>La declaración de una función en lenguaje C se denomina <strong>prototipo</strong>. Ejemplo de prototipo: <code>int sumMtoN(short sumando1, short sumando2)</code>
donde</p>
<div class="ulist">
<ul>
<li>
<p>Nombre: el nombre de la función es <em>sumMtoN</em></p>
</li>
<li>
<p>Argumentos: el nombre del primer argumento es <em>sumando1</em> y es del tipo short, el nombre del 2º argumento es <em>sumando2</em> y es del tipo shrot.</p>
</li>
<li>
<p>Tipo del valor de retorno: el tipo del valor de retorno es int.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_definición">Definición</h5>
<div class="ulist">
<ul>
<li>
<p>La definición de la función <em>sumMtoN</em> consiste en desarrollar el algoritmo mediante sentencias de C, es decir, el cuerpo de la función:</p>
<div class="listingblock">
<div class="content">
<pre>int sumMtoN(short sumando1, short sumando2)   {
      //sumando2 &gt; sumando1
      short i;
      int resultado=0; // variable local a la función
      i=sumando2;
        while (i &gt;= sumando1) {
          resultado += i ;
          i--;
        }
      printf("\n\t Subrutina sumMtoN \n");
      return resultado;
    }</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>resultado es la variable que contiene el valor de retorno</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_llamada_y_retorno">LLamada y Retorno</h5>
<div class="ulist">
<ul>
<li>
<p>La función <em>main()</em> llama a la función <em>sumMtoN()</em> la cual después de ser ejecutada devuelve el resultado de la suma.</p>
<div class="listingblock">
<div class="content">
<pre>/*
   Programa: sumMtoN.c
   Compilación: gcc -g -ggdb3 -o sumMtoN sumMtoN.c
                -ggdb3 : inserta en la tabla de símbolos del depurador información de macros
*/

// Prototipos de las funciones
#include &lt;stdio.h&gt;  // Declaración de la función printf()
#include &lt;stdlib.h&gt;  // Declaración de la función exit()

//Macros
#define SUCCESS   0

//Prototipos: declaración de la función sumMtoN()
int sumMtoN(short sumando1, short sumando2);

// Definición de la Función Principal main()
void main(void) {
       //Inicialización de los argumentos M y N de la función sumMtoN()
       short M=1;
       short N=1;
       // Llamada a la función
       printf("El resultado de la suma es %d \n", sumMtoN(M,N));
       // La evaluación de sumMtoN consiste en:  llamar a la función y capturar el valor de retorno.
       exit(SUCCESS);
     }

// Definición de las Funciones
int sumMtoN(short sumando1, short sumando2)   {
      //sumando2 &gt; sumando1
      short i;
      int resultado=0; // variable local a la función
      i=sumando2;
        while (i &gt;= sumando1) {
          resultado += i ;
          i--;
        }
      printf("\n\t Subrutina sumMtoN \n");
      return resultado;
    }</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>printf &#8594; sumMtoN : printf imprime el resultado de <strong>evaluar</strong> la función <em>sumMtoN()</em> . La evaluación consiste en obtener el <strong>valor de retorno</strong> de la ejecución de la función <em>sumMtoN()</em></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_anidamiento_de_funciones">6.10.3. Anidamiento de Funciones</h4>
<div class="ulist">
<ul>
<li>
<p>LLamada: init() &#8594; main() &#8594; sumMtoN() &#8594; printf() &#8594; write()</p>
</li>
<li>
<p>El sistema operativo llama a la función principal ,del programador, que a su vez llama a la función sumMtoN() ,del programador, la cual a su vez llama a la función printf() , de la librería libc, la cual a su vez llama al sistema operativo para que ejecute la función write(), del sistema.</p>
</li>
<li>
<p>Retorno: write() &#8594; printf() &#8594; sumMtoN() &#8594; main () &#8594; exit()</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_pilaframe">6.10.4. Pila/Frame</h4>
<div class="ulist">
<ul>
<li>
<p>Ver concepto de pila en el <a href="_pila.html#pila">Apéndice</a>.</p>
</li>
<li>
<p>La pila es una <em>sección</em> del programa en la memoria principal como lo son la sección de datos y la sección de instrucciones.</p>
</li>
<li>
<p>Los argumentos M y N de la subrutina <em>sumMtoN</em> se pasan a través de la pila.</p>
</li>
<li>
<p>Partición de la pila en frames: Cada rutina y subrutina tienen su <em>segmento</em> de pila que se denomina <strong>frame</strong>.</p>
<div class="ulist">
<ul>
<li>
<p>La rutina <em>main</em> tiene su frame y la subrutina <em>sumMtoN</em> su propio frame.</p>
</li>
<li>
<p>Los frames se apilan según se anidan las llamadas a subrutinas.</p>
</li>
<li>
<p>Dinamismo: En un momento dado de la ejecución del programa el último frame generado es el frame activo.</p>
<div class="ulist">
<ul>
<li>
<p>La parte baja del frame activo esta referenciada por el puntero EBP y el top del frame por el puntero ESP.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_definición_de_la_subrutina">6.10.5. Definición de la subrutina</h4>
<div class="ulist">
<ul>
<li>
<p>Nombre: <em>sumMtoN</em></p>
</li>
<li>
<p>El nombre de la subrutina es la etiqueta que apunta a la primera instrucción de la subrutina.</p>
</li>
<li>
<p>La subrutina finaliza con la instrucción ret.</p>
</li>
<li>
<p>La subrutina está estructurada en 3 partes:</p>
<div class="ulist">
<ul>
<li>
<p>Prólogo:</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Salvar los registros que van a ser modificados por el cuerpo de la subrutina.</p>
</li>
<li>
<p>Activar el nuevo frame inicializando los punteros <code>EBP</code> y <code>ESP</code>.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Cuerpo:</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Capturar los argumentos y procesarlos</p>
</li>
</ol>
</div>
</li>
<li>
<p>Epílogo:</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Salvar el valor de retorno en el registro <code>EAX</code></p>
</li>
<li>
<p>Recuperar el valor de los registros salvados en el Prólogo</p>
</li>
<li>
<p>Activar el frame de la función que ha realizado la llamada actualizando <code>EBP</code> y <code>ESP</code> con sus antiguos valores.</p>
</li>
<li>
<p>Retorno a la función que ha realizado la llamada.</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Código</p>
<div class="listingblock">
<div class="content">
<pre># Comienzo de la subrutina
sumMtoN:
# Prólogo
		push  %ebp 	# salvo el bottom del frame de la función llamante en la parte baja del nuevo frame
		mov   %esp,%ebp # configuro el puntero %ebp apuntando a la parte baja del nuevo frame
		push   xxx      # Si fuera necesario: salvar registros que se utilizarán en el Cuerpo de la subrutina
		push   xxx
# Cuerpo
		mov 8(%ebp),%ebx	#capturo el 1º argumento
		mov 16(%ebp),%ecx	#capturo el 2º argumento
		xxx xxx
		xxx xxx
# Epílogo
		mov resultado,%eax	#inicializo el valor de retorno
                pop   xxx               #recuperar registros que se salvaron en el prólogo
		pop   xxx
                mov %ebp,%esp
                pop %ebp
		ret</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_registros_a_preservar">6.10.6. Registros a Preservar</h4>
<div class="sect4">
<h5 id="_refs">Refs</h5>
<div class="ulist">
<ul>
<li>
<p><a href="_ix_bibliografía.html#ABI_i386">ABI x86-32</a></p>
</li>
<li>
<p><a href="_ix_bibliografía.html#ms_llamada">Convenio de LLamada MicroSoft</a></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_rutina_llamante">Rutina llamante</h5>
<div class="paragraph">
<p>La rutina que realiza la llamada (caller routine) está obligada a preservar los siguientes registros si los está utilizando:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>EAX-ECX-EDX</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Es decir, dichos registros pueden ser utilizados libremente por la subrutina llamada. En caso de no ser utilizados por la subrutina no sería necesario preservarlos. En caso de ser utilizados se copiarían en la pila antes de realizar la llamada a la subrutina y serían recuperados al finalizar la subrutina.</p>
</div>
</div>
<div class="sect4">
<h5 id="_subrutina_llamada">Subrutina llamada</h5>
<div class="paragraph">
<p>La subrutina llamada (callee routine) está obligada a preservar los siguientes registros:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>EBX-ESP-EBP-ESI-EDI y X87CW</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Es decir, dichos registros al finalizar la subrutina de mantener el mismo valor que antes de la llamada. En caso de no utilizarlos no sería necesario preservarlos</p>
</div>
</div>
<div class="sect4">
<h5 id="_arquitectura_amd64">Arquitectura amd64</h5>
<div class="paragraph">
<p>Caller routine: The registers RAX, RCX, RDX, R8, R9, R10, R11 are considered volatile and must be considered destroyed on function calls (unless otherwise safety-provable by analysis such as whole program optimization).</p>
</div>
<div class="paragraph">
<p>Callee routine: The registers RBX, RBP, RDI, RSI, RSP, R12, R13, R14, and R15 are considered nonvolatile and must be saved and restored by a function that uses them.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_argumentos_de_la_subrutina">6.10.7. Argumentos de la subrutina</h4>
<div class="ulist">
<ul>
<li>
<p>Los argumentos deben de transferirse a través de la pila y antes de realizar la llamada.</p>
</li>
<li>
<p>Los argumentos se apilan uno detrás de otro comenzando por el último argumento y finalizando con el primer argumento.</p>
</li>
<li>
<p>Se apilan mediante la  instrucción <code>push argumento</code> donde el operando es el argumento a transferir.</p>
<div class="listingblock">
<div class="content">
<pre>push N
push M</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_llamada_a_la_subrutina">6.10.8. Llamada a la subrutina</h4>
<div class="ulist">
<ul>
<li>
<p>La rutina llamante <em>main</em> llama a la subrutina <em>sumMtoN</em> mediante la instrucción <code>call sumMtoN</code>. Por lo que la rutina <em>main</em> queda interrumpida hasta que finalice la ejecución de la subrutina <em>sumMtoN</em>.</p>
</li>
<li>
<p>La instrucción <code>call</code> se ejecuta en dos fases:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Apila la dirección de retorno: en la rutina <em>main</em> siguiente instrucción a <code>call sumMtoN</code>: <strong>ESP &#8592; ESP-4</strong> y  <strong>M[ESP] &#8592; PC</strong></p>
</li>
<li>
<p>Salta a la etiqueta <em>sumMtoN</em>: <strong>PC &#8592; sumMtoN</strong></p>
</li>
</ol>
</div>
</li>
<li>
<p>básicamente la instrucción call es una salto con retorno a la dirección donde fue interrumpida la rutina llamante.</p>
<div class="listingblock">
<div class="content">
<pre>push N
push M
call sumMtoN</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_retorno_de_la_subrutina">6.10.9. Retorno de la subrutina</h4>
<div class="ulist">
<ul>
<li>
<p>La última instrucción de la subrutina es <strong>RET</strong> cuya ejecución por la Unidad de Control de la CPU realiza las siguientes órdenes:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><strong>PC &#8592; M[ESP]</strong> : extrae de la pila la dirección de retorno guardada por la instrucción <strong>CALL</strong> y la carga en el Contador de Programa, por lo que se ejecutará el ciclo de instrucción de la instrucción posterior a <strong>call sumMtoN</strong></p>
</li>
<li>
<p>Actualiza el stack pointer: <strong>ESP &#8592; ESP + 4</strong></p>
</li>
</ol>
</div>
</li>
<li>
<p>Es necesario que en el epílogo de la subrutina, antes de la ejecución de RET el stack pointer apunte a la dirección de la pila donde está almacenada la dirección de retorno.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_estado_de_la_pila">6.10.10. Estado de la pila</h4>
<div class="sect4">
<h5 id="_previo_al_salto_de_la_llamada_a_la_subrutina">Previo al salto  de la llamada a la subrutina</h5>
<div class="ulist">
<ul>
<li>
<p>Estado de la pila ejecutando la <em>rutina main</em> justo antes de ejecutar la instrucción <code>call sumMtoN</code>:</p>
<div class="ulist">
<ul>
<li>
<p>El frame activo de la pila es el correspodiente a main.</p>
</li>
<li>
<p>Los últimos datos apilados en el <em>frame main</em> son los argumentos de <em>sumMtoN</em></p>
<div class="listingblock">
<div class="content">
<pre>	push N
	push M
	call sumMtoN</pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Contenido de los  registros EIP,EBP,ESP:</p>
<div class="ulist">
<ul>
<li>
<p>RIP:</p>
</li>
<li>
<p>EBP:</p>
</li>
<li>
<p>ESP:</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_posterior_al_salto_de_la_llamada_a_la_subrutina">Posterior al salto de la llamada a la subrutina</h5>
<div class="ulist">
<ul>
<li>
<p>Estado de la pila ejecutando la <em>subrutina sumMtoN</em> justo después de ejecutar el salto <code>call sumMtoN</code>:</p>
<div class="ulist">
<ul>
<li>
<p>El frame activo de la pila es el correspodiente a main.</p>
</li>
<li>
<p>El último dato apilado en el frame main es la <em>dirección de retorno</em> a main desde sumMtoN</p>
</li>
</ul>
</div>
</li>
<li>
<p>Contenido de los  registros EIP,EBP,ESP:</p>
<div class="ulist">
<ul>
<li>
<p>RIP:</p>
</li>
<li>
<p>EBP:</p>
</li>
<li>
<p>ESP:</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_creación_del_nuevo_frame_summton">Creación del nuevo frame <em>sumMtoN</em></h5>
<div class="ulist">
<ul>
<li>
<p>Estado de la pila después de ejecutar:</p>
<div class="listingblock">
<div class="content">
<pre>sumMtoN:
	push %ebp
	mov  %esp,%ebp</pre>
</div>
</div>
</li>
<li>
<p>Contenido de los  registros EIP,EBP,ESP:</p>
<div class="ulist">
<ul>
<li>
<p>EIP:</p>
</li>
<li>
<p>EBP:</p>
</li>
<li>
<p>ESP:</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_previo_al_salto_de_retorno">Previo al salto de retorno</h5>
<div class="ulist">
<ul>
<li>
<p>Estado de la pila ejecutando la <em>subrutina sumMtoN</em> justo antes de ejecutar la instrucción <code>ret</code>:</p>
<div class="ulist">
<ul>
<li>
<p>El frame activo de la pila es el correspodiente a sumMtoN.</p>
</li>
<li>
<p>El puntero del top <em>ESP</em>  del frame sumMtoN apunta a la dirección de pila que contiene la <em>dirección de retorno</em></p>
</li>
</ul>
</div>
</li>
<li>
<p>Contenido de los  registros EIP,EBP,ESP:</p>
<div class="ulist">
<ul>
<li>
<p>EIP:</p>
</li>
<li>
<p>EBP:</p>
</li>
<li>
<p>ESP:</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_posterior_al_salto_de_retorno">Posterior al salto de retorno</h5>
<div class="ulist">
<ul>
<li>
<p>Estado de la pila ejecutando la <em>subrutina sumMtoN</em> justo después de ejecutar la instrucción <code>ret</code>:</p>
<div class="ulist">
<ul>
<li>
<p>La ejecución de <code>ret</code> ha realizado las siguientes operaciones:</p>
<div class="ulist">
<ul>
<li>
<p><code>pop %irp</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>El frame activo de la pila es el correspodiente a main.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Contenido de los  registros EIP,EBP,ESP:</p>
<div class="ulist">
<ul>
<li>
<p>EIP:</p>
</li>
<li>
<p>EBP:</p>
</li>
<li>
<p>ESP:</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_llamadas_al_sistema_operativo">6.11. Llamadas al Sistema Operativo</h3>
<div class="sect3">
<h4 id="_introducción_6">6.11.1. Introducción</h4>
<div class="ulist">
<ul>
<li>
<p>Se conoce con el nombre de <em>llamadas al sistema</em> a las Llamadas que realizar el programa de usuario a subrutinas del Kernel del Sistema Operativo.</p>
</li>
<li>
<p>Para realizar funciones privilegiadas del sistema operativo como el acceso a los dispositivos i/o de la computadora es necesario que los programas de usuario llamen al kernel para que sea éste quien realice la operación de una manera segura y eficaz. De esta forma se evita que el programador de aplicaciones acceda al hardware y al mismo tiempo se facilita la programación.</p>
</li>
<li>
<p>Ejemplos de llamadas</p>
<div class="ulist">
<ul>
<li>
<p><strong>exit</strong> : el kernel suspende la ejecución del programa eliminando el proceso</p>
</li>
<li>
<p><strong>read</strong> : el kernel lee los datos de un fichero accediendo al disco duro</p>
</li>
<li>
<p><strong>write</strong>: el kernel escribe en un fichero</p>
</li>
<li>
<p><strong>open</strong> : el kernel abre un fichero</p>
</li>
<li>
<p><strong>close</strong>: el kernel cierra el proceso</p>
</li>
<li>
<p>más ejemplos de llamada en el listado <code>man 2 syscalls</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>La llamada a los servicios del kernel denominados <em>syscalls</em> se puede realizar de dos formas: <strong>directa</strong> o <strong>indirecta</strong></p>
<div class="ulist">
<ul>
<li>
<p>Directa: desde ASM mediante la instrucción <code>syscall</code></p>
</li>
<li>
<p>Indirecta: desde C o ASM mediante funciones de la librería <code>libc</code>: wrappers de las llamadas directas</p>
</li>
</ul>
</div>
</li>
<li>
<p>API/ABI</p>
<div class="imageblock kroki">
<div class="content">
<img src="https://kroki.io/ditaa/svg/eNqNUUEKwjAQvOcVe2wp_YJQo2AvHorgOS0RgmksSRsJ5PHWanQbrDqXhM0wO5MhYJzpeQsNkxKumnUd15CkkK-AwmlQTS8uisALHt-h3G_KaksPBZpakuULyIifKBSkqDXT7n42T60Ro5fJx7icGcPbWjoQyvR6eNjwaPUM_svT34wQ5bfUO6CPAqJpIBXrEkla-AQbW5xw5lpxGXMRLQkfFooyKaIt1jCvJJLfHW8uzG55" alt="Diagram">
</div>
</div>
</li>
<li>
<p>Ejemplo arquitectura i386</p>
<div class="ulist">
<ul>
<li>
<p>Los 6 primeros argumentos se pasan a través de los registros: [EBX-ECX-EDX-ESI-EDI-EBP] previamente a la instrucción de la llamada <code>int 0x80</code></p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c"><span class="o">*</span> <span class="n">printf</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">write</span><span class="p">(</span><span class="kt">int</span> <span class="n">fd</span><span class="p">,</span> <span class="k">const</span> <span class="kt">void</span> <span class="o">*</span><span class="n">buf</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">count</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="n">EBX</span><span class="o">-</span><span class="n">ECX</span><span class="o">-</span><span class="n">EDX</span><span class="o">-</span><span class="n">ESI</span><span class="o">-</span><span class="n">EDI</span><span class="o">-</span><span class="n">EBP</span><span class="p">,</span><span class="kt">int</span> <span class="mh">0x80</span><span class="p">]</span> <span class="o">-&gt;</span> <span class="n">kernel</span> <span class="n">syscall</span> <span class="n">write</span>
<span class="o">*</span> <span class="n">API</span>      <span class="o">-&gt;</span>        <span class="n">wrapper</span> <span class="n">function</span>                      <span class="o">-&gt;</span>                <span class="n">ABI</span>                  <span class="o">-&gt;</span>  <span class="n">kernel</span> <span class="n">syscall</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Ejemplo arquitectura amd64</p>
<div class="ulist">
<ul>
<li>
<p>Los 6 primeros argumentos se pasan a través de los registros: [RAX-RDI-RSI-RDX-R10-R8-R9] previamente a la instrucción de la llamada <code>syscall</code></p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c"><span class="o">*</span> <span class="n">printf</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">write</span><span class="p">(</span><span class="kt">int</span> <span class="n">fd</span><span class="p">,</span> <span class="k">const</span> <span class="kt">void</span> <span class="o">*</span><span class="n">buf</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">count</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="n">RAX</span><span class="o">-</span><span class="n">RDI</span><span class="o">-</span><span class="n">RSI</span><span class="o">-</span><span class="n">RDX</span><span class="o">-</span><span class="n">R10</span><span class="o">-</span><span class="n">R8</span><span class="o">-</span><span class="n">R9</span><span class="p">,</span><span class="n">syscall</span><span class="p">]</span> <span class="o">-&gt;</span> <span class="n">kernel</span> <span class="n">syscall</span> <span class="n">write</span>
<span class="o">*</span> <span class="n">API</span>      <span class="o">-&gt;</span>        <span class="n">wrapper</span> <span class="n">function</span>                      <span class="o">-&gt;</span>                <span class="n">ABI</span>                  <span class="o">-&gt;</span>  <span class="n">kernel</span> <span class="n">syscall</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_ejemplos_3">6.11.2. Ejemplos</h4>
<div class="ulist">
<ul>
<li>
<p>Ver en el <a href="_llamadas_al_sistema_operativo_2.html#llamadas_SO">Apéndice</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_bibliografias">6.12. Bibliografias</h3>
<div class="ulist">
<ul>
<li>
<p>Listado <a href="_ix_bibliografía.html#prog_ensamblador">Programación Ensamblador</a>.</p>
<div class="ulist">
<ul>
<li>
<p>Apuntes completos <a href="_ix_bibliografía.html#WikiBook">WikiBook</a> de programación en lenguaje AT&amp;T con diversidad de aspectos.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="paragraph nav-footer">
<p>← Previous: <a href="_representación_de_las_instrucciones.html">Representación de las Instrucciones</a> | ↑ Up: <a href="_i_arquitectura_del_repertorio_de_instrucciones_isa_computadora_von_neumann_datos_instrucciones_programación.html">I Arquitectura del Repertorio de Instrucciones (ISA): computadora von Neumann, datos, instrucciones, programación.</a> | ⌂ Home: <a href="eecc_book.html">Estructura de Computadores  (240306)</a> | Next: <a href="_ii_unidades_básicas_procesador_central_unidad_de_memoria_mecanismos_entradasalida.html">II Unidades Básicas: Procesador Central, Unidad de Memoria, Mecanismos Entrada/Salida.</a> →</p>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2022-09-05 10:43:18 +0200
</div>
</div>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: {
    inlineMath: [["\\(", "\\)"]],
    displayMath: [["\\[", "\\]"]],
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [["\\$", "\\$"]],
    ignoreClass: "nostem|noasciimath"
  },
  TeX: { equationNumbers: { autoNumber: "none" } }
})
MathJax.Hub.Register.StartupHook("AsciiMath Jax Ready", function () {
  MathJax.InputJax.AsciiMath.postfilterHooks.Add(function (data, node) {
    if ((node = data.script.parentNode) && (node = node.parentNode) && node.classList.contains("stemblock")) {
      data.math.root.display = "block"
    }
    return data
  })
})
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>
</body>
</html>